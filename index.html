<!doctype html>
<!-- The Time Machine GitHub pages theme was designed and developed by Jon Rohan, on Feb 7, 2012. -->
<!-- Follow him for fun. http://twitter.com/jonrohan. Tail his code on https://github.com/jonrohan -->
<html lang="en-US">
<head>
  <style>
  .alert {
  padding: 20px;
  background-color: #f44336;
  color: white;
    font-weight: bold;
}

.closebtn {
  margin-left: 15px;
  color: white;
  font-weight: bold;
  float: right;
  font-size: 22px;
  line-height: 20px;
  cursor: pointer;
  transition: 0.3s;
}

.closebtn:hover {
  color: black;
}
  </style>
  <script>
  function imaruIframeLoaded(){
var autoQCSrc = document.getElementById("autoQCFullLatest").contentWindow.document.body.innerText;
eval(autoQCSrc.split("\n")[0]); //eval( 'var IMARUVERSION = "Jan3/2021" ');
document.getElementById("imaruVersion").innerText = "Last update: "+IMARUVERSION;
var autoQCMini = "javascript:(function()%7B"+encodeURIComponent(autoQCSrc.trim()).replace(/%20%20/g,' ').replace(/\s/g,'')+"%7D)()%3B"
document.getElementById("mainBookmarklet").href=autoQCMini;
document.getElementById("mainBookmarklet").style.opacity="1";    
}
  </script>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  
  <link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>

  
  <link rel="stylesheet" href="/nettufurikusu/assets/css/style.css?v=333577be4cd2bb5e65abca54b71cfa4e3b7cdb58">
  <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
  <script src="/nettufurikusu/assets/js/script.js"></script>
<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>imaruÂ·nettu the metabookmarklet</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="imaruâ€¢nettu" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Combining all the previous Netflix Originator UX enhancements into one metabookmarklet, she is all you need to Export MP4, Export/Import SRT (Source, Target), Export Bilingual HTML, AutoQC and AutoFix. Her name is â€˜imarunettufurikusu.â€™ We still donâ€™t know why." />
<meta property="og:description" content="Combining all the previous Netflix Originator UX enhancements into one metabookmarklet, she is all you need to Export MP4, Export/Import SRT (Source, Target), Export Bilingual HTML, AutoQC and AutoFix. Her name is â€˜imarunettufurikusu.â€™ We still donâ€™t know why." />
<link rel="canonical" href="https://katzurki.github.io/nettufurikusu/" />
<meta property="og:url" content="https://katzurki.github.io/nettufurikusu/" />
<meta property="og:site_name" content="nettufurikusu" />
<script type="application/ld+json">
{"@type":"WebSite","description":"Combining all the previous Netflix Originator UX enhancements into one metabookmarklet, she is all you need to Export MP4, Export/Import SRT (Source, Target), Export Bilingual HTML, AutoQC and AutoFix. Her name is â€˜imarunettufurikusu.â€™ We still donâ€™t know why.","url":"https://katzurki.github.io/nettufurikusu/","name":"nettufurikusu","headline":"Essential","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


</head>

<body>

  <div class="alert">
  <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span> 
  <center><strong>As of August 2021, please only use <a href="https://chrome.google.com/webstore/detail/originator-autoqc-etc/fmdlmdfceiaaljfpdkbpfhoppcklkopo">Netflix Originator AutoQC</a> available as an official Chrome extension.</strong></center>
</div>
  
  <div class="wrapper">
    <header>
      <h1 class="title">ã¾Ì¼ã‚‹ã­Ì¼ã£Ì¼ã¤Ì¼ãµÌ¼ã‚ŠãÌ¼ã™Ì¼</h1>
      <h2 class="title" style="color: #A52A2A;">^Ì·^Ì·ã€ğš’ğš–ğšŠğš›ğšÂ·ğš—ğšğšğšğšÂ·ğšğšğš›ğš’Â·ğš”ğšğšœğšã€:ğŸ¯</h2>
    </header>
    <div id="container">
      <p class="tagline" style="align: center; font-family: Netflix-Sans;">Combining all the previous Netflix Originator UX enhancements into one metabookmarklet, she is all you need to Export MP4, Export/Import SRT (Source, Target), Export Bilingual HTML, AutoQC and AutoFix. Her name is â€˜imarunettufurikusu.â€™ We still don't know why.</p>
      <div id="main" role="main">
        <div class="download-bar">
        <div class="inner">
     
          <a href="https://github.com/katzurki/nettufurikusu" class="code">imaruÂ·nettuÂ·furiÂ·kusu, a project by @katzurki</a>&nbsp;<span id="imaruVersion" style="position: relative; top: 9px; left: 51px; color: gold; box-shadow: lime 0px 0px 2px inset, lime 0px 0px 1px; color: gold;"></span>
        </div>
        <span class="blc"></span><span class="trc"></span>
        </div>
        <article class="markdown-body">
          <h1 id="essential">(OUTDATED) Meet imaruÂ·nettuÂ·furiÂ·kusu</h1>

<p><strong>Drag</strong> this link:<br><center><a id="mainBookmarklet" style="opacity:0.2;" href="javascript:(function()%7B!function()%7Bvar%20menu%3Ddocument.querySelector(%22div.popup%22)%2CitemButtons%3Ddocument.getElementsByClassName(%22item-button%22)%2Cdropdown%3DitemButtons%5BitemButtons.length-1%5D%2CimarunettuButtons%3D%7BimarunettuBilingualExportHTML%3A%22Export%20Bilingual%20File%22%2CimarunettuExportMP4%3A%22Export%20Video%20as%20MP4%22%2CimarunettuDoubleExportSRT%3A%22Export%20Subtitles%20as%20SRT%22%2CimarunettuImportBetterSrt%3A%22Import%20SRT%20as%20Subtitles%22%2CimarunettuRemoveWatermark%3A%22Remove%20Watermark%22%2CimarunettuRunAutoQC%3A%22Run%20AutoQC%22%7D%2Cclq%3DdecodeURIComponent(document.location.href).split(%22%3A%22)%5B3%5D%3Bif(!localStorage%5B%22lang%3A%22%2Bclq%5D)var%20LANG%3DimarunettuGetLang()%3Bvar%20imarunettuClickDropdown%3D%22%22%3Bfunction%20imarunettuPopulateDropdown()%7Bvar%20e%3Ddocument.getElementsByClassName(%22item-button%22)%2Ct%3De%5Be.length-1%5D%3BimarunettuClickDropdown%3Dfunction(e)%7BsetTimeout(imarunettuAddButtonsToMenu%2C30)%7D%2Ct.addEventListener(%22click%22%2CimarunettuClickDropdown%2C%7Bpassive%3A!1%2Ccapture%3A!0%7D)%7Dfunction%20deferAddButtonUntil(condition%2Cargument)%7Beval(condition)%3F(console.log(%22Condition%3A%20%22%2Bcondition%2B%22%20evalued%20TRUE%20after%20%22%2Bfiredon%2B%22ms%22)%2Cfiredon%3D0%2CimarunettuAddButtonToMenu(argument))%3A(firedon%2B%2B%2CsetTimeout(function()%7BdeferAddButtonUntil(condition%2Cargument)%7D%2C1))%7Dfunction%20imarunettuExportMP4()%7B!function()%7Bvideolink%3Ddocument.getElementsByClassName(%22video-holder%22)%5B0%5D.children%5B0%5D.getAttribute(%22src%22)%2Cfunction(e)%7Bvar%20t%3Ddocument.createElement(%22a%22)%3Bt.setAttribute(%22href%22%2Ce)%2Ct.style.display%3D%22none%22%2Cdocument.body.appendChild(t)%2Ct.click()%2Cdocument.body.removeChild(t)%7D(videolink)%7D()%7Dfunction%20imarunettuRunAutoQC(e%3Dwindow.imarunettuLang)%7B!function()%7Bvar%20t%3BLANG%3De%7C%7CimarunettuGetLang()%3Bvar%20n%2Co%2Ca%2Cr%2Ci%2Cs%3D%7B%7D%3Bif(s.lang%3DLANG%2CdecodeURIComponent(document.location.href).includes(%22originator.backlot.netflix.com%22))(c%3DdecodeURIComponent(document.location.href).split(%22%3A%22)%5B3%5D)%26%26(s.clq%3Dc)%2Ct%3D!1%2Cconsole.log(%22DEBUG%3A%20state%3A%20inTheBox%5Cnour_clq%3A%20from%20location%20%22%2Bc)%3Belse%20if(void%200!%3D%3DWindow.autoQC_safe_meta)%7Bvar%20l%3DJSON.parse(Window.autoQC_safe_meta)%2Cc%3Dl.clq%3Bconsole.log(%22DEBUG%3A%20state%3A%20outOfTheBox%5Cnour_clq%3A%20from%20qcSavedMeta%20%22%2Bc)%7Delse%20if(document.body.innerText.split(%22%5Cn%22)%5B1%5D.includes(%22%20--%5Cx3e%20%22))%7Bc%3Ddocument.body.innerText.split(%22%5Cn%22)%3Bconsole.log(%22DEBUG%3A%20state%3A%20in%20SRT%20file%5Cnour_clq%3A%20split%20object%20%22%2Btypeof%20c)%7Dn%3Dthis%2Co%3Dfunction()%7B%22use%20strict%22%3Breturn%20function()%7BString.prototype.regexIndexOf%3Dfunction(e%2Ct)%7Bvar%20n%3Dthis.substring(t%7C%7C0).search(e)%3Breturn%20n%3E%3D0%3Fn%2B(t%7C%7C0)%3An%7D%3Bvar%20e%3Dnew%20RegExp(%22%5E%5B0-9a-f%5D%7B8%7D-%5B0-9a-f%5D%7B4%7D-%5B1-5%5D%5B0-9a-f%5D%7B3%7D-%5B89ab%5D%5B0-9a-f%5D%7B3%7D-%5B0-9a-f%5D%7B12%7D%24%22%2C%22i%22)%3B%22object%22!%3Dtypeof%20c%26%26(c%3Darguments.length%3E0%26%26void%200!%3D%3Darguments%5B0%5D%26%26e.test(arguments%5B0%5D)%3Farguments%5B0%5D%3A%22%22)%2CLANG%3DLANG.toUpperCase()%2Cconsole.log(%22DEBUG%3A%20Starting%20AutoQC%20with%20LANG%3A%20%22%2BLANG)%3Bvar%20n%3D0%2Co%3D0%2Ca%3D0%3Bswitch(LANG)%7Bcase%22AR%22%3An%3D42%2Ca%3D20%2Co%3D26%3Bbreak%3Bcase%22CN%22%3An%3D16%2Ca%3D9%2Co%3D11.7%3Bbreak%3Bcase%22RU%22%3An%3D39%2Ca%3D17%2Co%3D22.1%3Bbreak%3Bcase%22DE%22%3Acase%22MS%22%3Acase%22GR%22%3Acase%22FR%22%3Acase%22PT%22%3Acase%22EN%22%3An%3D42%2Ca%3D20%2Co%3D25%3Bbreak%3Bdefault%3An%3D42%2Ca%3D17%2Co%3D22.1%7Dif(%22object%22!%3Dtypeof%20c)%7Bif(!c%7C%7C!e.test(c))return%20alert(%22You%20must%20be%20in%20a%20started%2C%20saved%20Originator%20task!%22)%2Cnull%3Bif(!e.test(c))return%20alert(%22The%20CLQ%20is%20invalid%3A%20%22%2Bc%2B%22%5CnPlease%20report%20me%20to%20the%20developer.%22)%2Cnull%7Dvar%20r%3DlocalStorage.getItem(%22shotChanges%3A%22%2Bc)%3Btry%7Br%3Dr.split(%22%2C%22)%2Cconsole.log(%22DEBUG%3A%20Shot%20changes%20validated.%22)%7Dcatch(e)%7Br%3Dvoid%200%2Cconsole.log(%22DEBUG%3A%20No%20shot%20changes%20found%2C%20which%20is%20ok%20if%20our_clq%20is%20object%3A%20%22%2Btypeof%20c)%7Dvar%20i%3D!!document.getElementsByClassName(%22marketing-border%22)%5B0%5D%3Btry%7Bvar%20d%3Ddocument.getElementsByClassName(%22Watermark%22)%5B0%5D.innerHTML%2Cp%3Ddocument.getElementsByClassName(%22username%22)%5B0%5D.textContent%7Dcatch(e)%7Bd%3D%22LOCAL%20ITERATION%22%7Dvar%20u%3D'%3Chead%3E%3Cmeta%20charset%3D%22utf-8%22%3E%5Cn%20%3Cscript%3E%5Cn%20Window.autoQC_safe_meta%20%3D%20METADATATOKEN%5Cn%20%3C%5C%2Fscript%3E%5Cn%20%3Cscript%3Evar%20prevScrollpos%20%3D%20window.pageYOffset%3B%5Cn%20window.onscroll%20%3D%20function()%20%7B%5Cn%20var%20currentScrollPos%20%3D%20window.pageYOffset%3B%5Cn%20if%20(prevScrollpos%20%3E%20currentScrollPos)%20%7B%5Cn%20document.getElementById(%22navbar%22).style.top%20%3D%20%220%22%3B%5Cn%20%7D%20else%20%7B%5Cn%20document.getElementById(%22navbar%22).style.top%20%3D%20%22-50px%22%3B%5Cn%20%7D%5Cn%20prevScrollpos%20%3D%20currentScrollPos%3B%5Cn%20%7D%3C%5C%2Fscript%3E%5Cn%20%3Cscript%3Evar%20z%3Dfunction(q)%20%7B%5Cn%20var%20s%3Ddocument.getElementsByClassName(q)%3B%5Cn%20for(x%20of%20s)%20%7B%5Cn%20x.className%3D%3D%3Dq%20%3F%20(x.className%3Dq%2B%22%20of0%22)%3A%20(x.setAttribute(%22class%22%2C%20q))%5Cn%20%7D%5Cn%20%7D%5Cn%5Cn%20%3B%5Cn%20%3C%5C%2Fscript%3E%3Cstyle%3Ebody%20%7B%5Cn%20background-color%3A%20%23212121%5Cn%20%7D%5Cn%5Cn%20%23navbar%20%7B%5Cn%20background-color%3A%20%23333%3B%5Cn%20position%3A%20fixed%3B%20%5Cn%20top%3A%200%3B%20%5Cn%20width%3A%20100%25%3B%5Cn%20transition%3A%20top%200.5s%3B%5Cn%5Cn%20%7D%5Cn%5Cn%20%23navbar%20a%20%7B%5Cn%20float%3A%20left%3B%5Cn%20display%3A%20block%3B%5Cn%20color%3A%20white%3B%5Cn%20text-align%3A%20center%3B%5Cn%20padding%3A%205px%3B%5Cn%20text-decoration%3A%20none%3B%5Cn%20%7D%5Cn%5Cn%20%23navbar%20a%3Ahover%20%7B%5Cn%20background-color%3A%20%23ddd%3B%5Cn%20color%3A%20black%3B%5Cn%20%7D%5Cn%5Cn%20%23background%7B%5Cn%20position%3Afixed%3B%5Cn%20z-index%3A-999%3B%5Cn%20background%3A%23212121%3B%5Cn%20display%3Ablock%5Cn%20height%3A100vh%3B%20%5Cn%20width%3A100vh%3B%5Cn%20color%3Agrey%3B%20%5Cn%20%7D%5Cn%5Cn%20.bg-text%5Cn%20%7B%5Cn%20font-family%3A%20Netflix-Sans%3B%5Cn%20pointer-events%3A%20none%3B%5Cn%20color%3Alightgrey%3B%5Cn%20text-align%3A%20center%3B%5Cn%20opacity%3A%200.06%3B%5Cn%20font-size%3A80px%3B%5Cn%20transform%3Arotate(320deg)%3B%5Cn%20-webkit-transform%3Arotate(320deg)%3B%5Cn%20position%3A%20relative%3B%5Cn%20overflow%3A%20visible%3B%5Cn%20user-select%3A%20none%3B%5Cn%20-webkit-user-select%3A%20none%3B%5Cn%20-khtml-user-select%3A%20none%3B%5Cn%20-moz-user-select%3A%20none%3B%5Cn%20-ms-user-select%3A%20none%3B%5Cn%20%7D%5Cn%5Cn%20.of0%20%7B%5Cn%20visibility%3A%20hidden%3B%5Cn%20color%3A%20%23000!important%3B%5Cn%20%7D%5Cn%5Cn%20.username%20%7B%5Cn%20float%3Aleft%3B%5Cn%20%7D%5Cn%5Cn%20.ipAddress%20%7B%5Cn%20float%3Aright%3B%20%5Cn%20%7D%5Cn%5Cn%20.cSpace%20%7B%5Cn%20color%3A%20%2300fa00%3B%5Cn%20visibility%3A%20visible%3B%5Cn%20%7D%5Cn%5Cn%20.StyledTextEditor%20%7B%5Cn%20font-family%3A%20Netflix-Sans%3B%5Cn%20line-height%3A%201.3%3B%5Cn%20margin%3A%202px%3B%5Cn%20white-space%3A%20nowrap%3B%5Cn%20overflow%3A%20hidden%3B%5Cn%20font-variant-ligatures%3A%20none%3B%5Cn%20position%3A%20relative%3B%5Cn%20pointer-events%3A%20none%5Cn%20%7D%5Cn%5Cn%20.StyledTextEditor%20.ltr%20%7B%5Cn%20unicode-bidi%3A%20embed%3B%5Cn%20direction%3A%20ltr%5Cn%20%7D%5Cn%5Cn%20.TimedTextEvent%20%7B%5Cn%20font-family%3A%20Netflix-Sans%3B%5Cn%20font-size%3A%201.3rem%3B%5Cn%20font-weight%3A%20400%3B%5Cn%20line-height%3A%202rem%3B%5Cn%20margin-top%3A%20.5rem%3B%5Cn%20display%3A%20-webkit-box%3B%5Cn%20display%3A%20-moz-box%3B%5Cn%20display%3A%20-webkit-flex%3B%5Cn%20display%3A%20-ms-flexbox%3B%5Cn%20display%3A%20box%3B%5Cn%20display%3A%20flex%3B%5Cn%20-webkit-box-orient%3A%20vertical%3B%5Cn%20-moz-box-orient%3A%20vertical%3B%5Cn%20-o-box-orient%3A%20vertical%3B%5Cn%20-webkit-flex-direction%3A%20column%3B%5Cn%20-ms-flex-direction%3A%20column%3B%5Cn%20flex-direction%3A%20column%3B%5Cn%20border%3A%201px%20solid%20transparent%3B%5Cn%20-webkit-transition%3A%20height%20250ms%20ease%2C%20border%20150ms%20ease%3B%5Cn%20-moz-transition%3A%20height%20250ms%20ease%2C%20border%20150ms%20ease%3B%5Cn%20-o-transition%3A%20height%20250ms%20ease%2C%20border%20150ms%20ease%3B%5Cn%20-ms-transition%3A%20height%20250ms%20ease%2C%20border%20150ms%20ease%3B%5Cn%20transition%3A%20height%20250ms%20ease%2C%20border%20150ms%20ease%5Cn%20%7D%5Cn%5Cn%20.TimedTextEvent%20.details%20%7B%5Cn%20padding-top%3A%20.5rem%3B%5Cn%20padding-left%3A%201rem%3B%5Cn%20padding-right%3A%201rem%3B%5Cn%20display%3A%20-webkit-box%3B%5Cn%20display%3A%20-moz-box%3B%5Cn%20display%3A%20-webkit-flex%3B%5Cn%20display%3A%20-ms-flexbox%3B%5Cn%20display%3A%20box%3B%5Cn%20display%3A%20flex%3B%5Cn%20-webkit-box-orient%3A%20horizontal%3B%5Cn%20-moz-box-orient%3A%20horizontal%3B%5Cn%20-o-box-orient%3A%20horizontal%3B%5Cn%20-webkit-flex-direction%3A%20row%3B%5Cn%20-ms-flex-direction%3A%20row%3B%5Cn%20flex-direction%3A%20row%5Cn%20%7D%5Cn%5Cn%20.TimedTextEvent%20.details%20.timing%20%7B%5Cn%20-webkit-flex-shrink%3A%200%3B%5Cn%20flex-shrink%3A%200%3B%5Cn%20display%3A%20-webkit-box%3B%5Cn%20display%3A%20-moz-box%3B%5Cn%20display%3A%20-webkit-flex%3B%5Cn%20display%3A%20-ms-flexbox%3B%5Cn%20display%3A%20box%3B%5Cn%20display%3A%20flex%3B%5Cn%20-webkit-box-orient%3A%20vertical%3B%5Cn%20-moz-box-orient%3A%20vertical%3B%5Cn%20-o-box-orient%3A%20vertical%3B%5Cn%20-webkit-flex-direction%3A%20column%3B%5Cn%20-ms-flex-direction%3A%20column%3B%5Cn%20flex-direction%3A%20column%3B%5Cn%20width%3A%208rem%5Cn%20%7D%5Cn%5Cn%20%23titleinfo%20%7B%5Cn%20color%3A%20%23fffff0%3B%5Cn%20font-weight%3A%20bolder%3B%5Cn%20font-style%3A%20normal%3B%5Cn%20font-family%3A%20Roboto%2C%20Netflix-Sans%3B%5Cn%20font-size%3A%20150%25%3B%5Cn%20margin-left%3A%2030px%3B%5Cn%20margin-right%3A%2020px%3B%5Cn%20position%3A%20relative%3B%20top%3A%207px%3B%20left%3A%20-5px%3B%5Cn%20width%3A%20580px%3B%5Cn%20flex-shrink%3A%201%3B%5Cn%20white-space%3A%20nowrap%3B%5Cn%20overflow%3A%20hidden%3B%5Cn%20text-overflow%3A%20ellipsis%3B%5Cn%20display%3A%20inline-block%3B%5Cn%20%7D%5Cn%5Cn%5Cn%5Cn%20.issue%20%7B%5Cn%20font-size%3A%2016%3B%5Cn%20vertical-align%3A%20middle%3B%5Cn%20font-family%3A%20Netflix-Sans%3B%5Cn%20position%3A%20relative%3B%5Cn%20top%3A%20-1px%5Cn%20%7D%5Cn%5Cn%20.TimedTextEvent%20.details%20.timing%20.TimeCode%20%7B%5Cn%20color%3A%20rgba(255%2C%20255%2C%20255%2C%20.54)%3B%5Cn%20padding%3A%200%20.5rem%3B%5Cn%20border-radius%3A%201rem%3B%5Cn%20white-space%3A%20nowrap%5Cn%20%7D%5Cn%5Cn%20.TimedTextEvent%20.details%20.content%20%7B%5Cn%20-webkit-box-flex%3A%201%3B%5Cn%20-moz-box-flex%3A%201%3B%5Cn%20-o-box-flex%3A%201%3B%5Cn%20-ms-box-flex%3A%201%3B%5Cn%20box-flex%3A%201%3B%5Cn%20-webkit-flex-grow%3A%201%3B%5Cn%20flex-grow%3A%201%3B%5Cn%20display%3A%20-webkit-box%3B%5Cn%20display%3A%20-moz-box%3B%5Cn%20display%3A%20-webkit-flex%3B%5Cn%20display%3A%20-ms-flexbox%3B%5Cn%20display%3A%20box%3B%5Cn%20display%3A%20flex%3B%5Cn%20-webkit-box-orient%3A%20vertical%3B%5Cn%20-moz-box-orient%3A%20vertical%3B%5Cn%20-o-box-orient%3A%20vertical%3B%5Cn%20-webkit-flex-direction%3A%20column%3B%5Cn%20-ms-flex-direction%3A%20column%3B%5Cn%20flex-direction%3A%20column%3B%5Cn%20padding-left%3A%202rem%3B%5Cn%20padding-bottom%3A%20.5rem%3B%5Cn%20width%3A%2024rem%5Cn%20%7D%5Cn%5Cn%20.TimedTextEvent%20.details%20.content%20.header%20%7B%5Cn%20display%3A%20-webkit-box%3B%5Cn%20display%3A%20-moz-box%3B%5Cn%20display%3A%20-webkit-flex%3B%5Cn%20display%3A%20-ms-flexbox%3B%5Cn%20display%3A%20box%3B%5Cn%20display%3A%20flex%3B%5Cn%20-webkit-box-orient%3A%20horizontal%3B%5Cn%20-moz-box-orient%3A%20horizontal%3B%5Cn%20-o-box-orient%3A%20horizontal%3B%5Cn%20-webkit-flex-direction%3A%20row%3B%5Cn%20-ms-flex-direction%3A%20row%3B%5Cn%20flex-direction%3A%20row%5Cn%20%7D%5Cn%5Cn%20.TimedTextEvent%20.details%20.content%20.header%20.index%20%7B%5Cn%20color%3A%20rgba(255%2C%20255%2C%20255%2C%20.66)%5Cn%20%7D%5Cn%5Cn%20.TimedTextEvent%20.details%20.content%20.header%20.duration%20%7B%5Cn%20color%3A%20rgba(255%2C%20255%2C%20255%2C%20.54)%3B%5Cn%20margin-left%3A%20auto%3B%5Cn%20border-radius%3A%201rem%5Cn%20%7D%5Cn%5Cn%20.TimedTextEvent%20.details%20.content%20.StyledTextEditor%20%7B%5Cn%20color%3A%20rgba(255%2C%20255%2C%20255%2C%20.87)%3B%5Cn%20min-height%3A%203.2rem%3B%5Cn%20margin-top%3A%20.3rem%5Cn%20%7D%5Cn%5Cn%20img%20%7B%5Cn%20display%3A%20table-cell%3B%5Cn%20vertical-align%3A%20middle%5Cn%20%7D%5Cn%5Cn%20%23logonetflix%20%7B%5Cn%20margin-left%3A%2012px%3B%5Cn%20%7D%5Cn%5Cn%20.TimedTextEvent%20.footer%20%7B%5Cn%20height%3A%20.5rem%3B%5Cn%20border-bottom%3A%202px%20solid%20rgba(0%2C%200%2C%200%2C%20.77)%3B%5Cn%20margin-left%3A%201rem%3B%5Cn%20margin-right%3A%201rem%5Cn%20%7D%5Cn%5Cn%20.outline%20%7B%5Cn%20color%3A%20%23000%3B%5Cn%20position%3A%20relative%3B%5Cn%20left%3A%20350%25%3B%5Cn%20%7D%5Cn%5Cn%20button%20%7B%5Cn%20background-color%3A%20black%3B%5Cn%20color%3A%20%2339ff1a%3B%5Cn%20opacity%3A%200.5%3B%5Cn%20%7D%5Cn%5Cn%20i%20%7B%5Cn%20font-style%3A%20italic!important%3B%5Cn%20font-family%3A%20serif!important%5Cn%20%7D%5Cn%5Cn%20%23feedback%20%7B%5Cn%20height%3A%200%3B%5Cn%20width%3A%2065px%3B%5Cn%20position%3A%20fixed%3B%5Cn%20right%3A%200%3B%5Cn%20top%3A%2050%25%3B%5Cn%20z-index%3A%201000%3B%5Cn%20transform%3A%20rotate(-90deg)%3B%5Cn%20-webkit-transform%3A%20rotate(-90deg)%3B%5Cn%20-moz-transform%3A%20rotate(-90deg)%3B%5Cn%20-o-transform%3A%20rotate(-90deg)%5Cn%20%7D%5Cn%5Cn%20%23feedback%20a%20%7B%5Cn%20display%3A%20block%3B%5Cn%20background%3A%20%2306c%3B%5Cn%20height%3A%2015px%3B%5Cn%20width%3A%20165px%3B%5Cn%20padding%3A%208px%2016px%3B%5Cn%20color%3A%20%23fff%3B%5Cn%20font-family%3A%20Arial%2C%20sans-serif%3B%5Cn%20font-size%3A%2017px%3B%5Cn%20font-weight%3A%20700%3B%5Cn%20text-decoration%3A%20none%3B%5Cn%20border-bottom%3A%20solid%201px%20%23333%3B%5Cn%20border-left%3A%20solid%201px%20%23333%3B%5Cn%20border-right%3A%20solid%201px%20%23fff%5Cn%20%7D%5Cn%5Cn%20%23feedback%20a%3Ahover%20%7B%5Cn%20background%3A%20%23ccc%5Cn%20%7D%5Cn%5Cn%20%3C%2Fstyle%3E%3Cbody%20style%3D%22width%3A70%25%3Bheight%3A100%25%22%3E%5Cn%20%3Cdiv%20id%3D%22navbar%22%3E%5Cn%20%3Ca%20href%3D%22https%3A%2F%2Fpartnerhelp.netflixstudios.com%2Fhc%2Fen-us%2Farticles%2F215758617-Timed-Text-Style-Guide-General-Requirements%22%3E%3Cimg%20id%3D%22logonetflix%22%20width%3D%22auto%22%20height%3D%2232%22%20src%3D%22https%3A%2F%2Fupload.wikimedia.org%2Fwikipedia%2Fcommons%2F0%2F08%2FNetflix_2015_logo.svg%22%20title%3D%22Netflix%20TTSG%20Quality%20Compliance%20Initiative%22%3E%3C%2Fa%3E%5Cn%20%3Cspan%20id%3D%22titleinfo%22%20title%3D%22TITLEINFOTOKEN%22%3ETITLEINFOTOKEN%3C%2Fspan%3E%5Cn%20%3C%2Fdiv%3E%5Cn%20%3Cdiv%20id%3D%22background%22%3E%5Cn%20%3Cp%20class%3D%22bg-text%22%20style%3D%22top%3A%200px%3B%20left%3A%20100px%3B%22%3EWATERMARKPLACEHOLDER%3Cbr%3ENETFLIX%20CONFIDENTIAL%3C%2Fp%3E%5Cn%20%3Cp%20class%3D%22bg-text%22%20style%3D%22top%3A%20-100px%3B%20left%3A%20540px%3B%22%3ENETFLIX%20CONFIDENTIAL%3Cbr%3EWATERMARKPLACEHOLDER%3C%2Fp%3E%5Cn%20%3C%2Fdiv%3E%5Cn%5Cn%20%3Cdiv%20id%3D%22stick%22%20style%3D%22position%3Arelative%3Bleft%3A750px%3B%22%3E%3Cbutton%20type%3D%22button%22%20class%3D%22f%22%20onclick%3D%22alert(Window.autoQC_safe_meta)%22%3E%F0%9F%9B%88%3C%2Fbutton%3E%3Cbutton%20type%3D%22button%22%20class%3D%22f%22%20onclick%3D%22z(%5C'cSpace%5C')%22%20title%3D%22Highlight%20whitespace%22%3E%F0%9F%9F%A9%3C%2Fbutton%3E%3Cbutton%20title%3D%22Display%20minor%20issues%22%20type%3D%22button%22%20class%3D%22f%22%20onclick%3D%22z(%5C'minor_issue%5C')%20%22%3E%E2%9A%A0%EF%B8%8F%3C%2Fbutton%3E%3Cbutton%20title%3D%22Display%20major%20issues%22%20type%3D%22button%22%20class%3D%22f%22%20onclick%3D%22z(%5C'major_issue%5C')%22%3E%F0%9F%9A%AB%3C%2Fbutton%3E%3Cbutton%20title%3D%22Shot-change%20suggestions%22%20type%3D%22button%22%20onclick%3D%22z(%5C'shot_change_issue%5C')%20%22%3E%F0%9F%8E%9E%3C%2Fbutton%3EDLFIXSRTTOKEN%3Cspan%20style%3D%22position%3A%20relative%3B%20top%3A%203px%3B%20left%3A%20165px%3B%20font-family%3A%20monospace%3B%20color%3A%20%23fdfdf2%3B%20opacity%3A%200.33%3B%22%3ELinguist%3A%20LINGUISTNAME%3C%2Fdiv%3E'%3Bif(document.location.href.includes(%22originator.backlot.netflix.com%22))%7Bvar%20f%3DlocalStorage%5B%22clq%3Aorigination%3A%22%2Bc%5D%3Bif(!f)return%20alert(%22Timed%20text%20events%20not%20found%20in%20localStorage%5Cnfor%20CLQ%3A%20%22%2Bc%2B'%5CnIf%20the%20CLQ%20is%20correct%20and%5Cn%22Save%20to%20local%20storage%22%20is%20enabled%20in%20Settings%2C%5Cnsave%20the%20task%20and%20try%20again.')%2Cnull%3Bvar%20m%3DJSON.parse(f)%2Cg%3Dm.events%2Ch%3D(b%3Dm.meta.fps).split(%22_%22)%5B1%5D%2F100%3Bs.fps%3Dh%2Cs.fps_%3Db%7Delse%20if(t)%7Bh%3Dl.fps%3Bvar%20b%3Dl.fps_%7Delse%20if(%22object%22%3D%3Dtypeof%20c)%7Bvar%20v%3Dprompt(%22What%20FPS%20does%20this%20SRT%20file%20likely%20have%3F%5Cn2397%2C%202398%2C%202400%2C%202500%2C%202997%20are%20the%20most%20likely%22)%3Bv.length%3C4%3F(h%3D24%2Cb%3D%22FPS_2400%22)%3Ah%3D(b%3D%22FPS_%22%2Bv.replace(%2F%5B%5E%5Cd%5D%2Fg%2C%22%22).replace(%2F(%5E....)(.%2B%24)%2F%2C%22%241%22)).split(%22_%22)%5B1%5D%2F100%2Calert(%22Continuing%20with%20%22%2Bb%2B%22%20and%20real%20fps%20set%20to%20%22%2Bh)%7Dvar%20y%3D0%2Cx%3D0%2Cw%3D0%2CE%3D0%2CT%3D0%3Bif(%22object%22!%3Dtypeof%20c)%7Bvar%20S%3Dprompt(%22Framerate%20set%20to%3A%20%22%2Bh%2B%22%20fps.%5CnEnter%20custom%20FPS%20or%20press%20Enter%20to%20keep%20current%22)%3Bif(S)%7Bvar%20k%3DS.substring(0%2C2)%2CC%3DS.substring(2%2CS.length)%3Bb%3D%22FPS_%22%2Bk%2BC%2Ch%3D1*(k%2B%22.%22%2BC)%2Calert(%22Continuing%20with%20%22%2Bb%2B%22%20and%20real%20fps%20set%20to%20%22%2Bh)%7D%7Dvar%20I%3D1e3%2Fh%3Bif(document.location.href.includes(%22originator.backlot.netflix.com%22))%7Bvar%20N%3Ddocument.getElementsByClassName(%22cpe-page-menu-label%22)%5B0%5D.innerText.replace(%2F%20%22%2Fg%2C%22%20%E2%80%9C%22).replace(%2F%22%2Fg%2C%22%E2%80%9D%22)%3Bs.titleinfo%3DN%7Delse%20N%3D%22object%22!%3Dtypeof%20c%3Fl.titleinfo%3Adocument.location.href.replace(%2F(.%2B%3F)(%5B%5E%5C%2F%5D%2B%24)%2Fg%2C%22%242%22)%3Bfunction%20R(e%3D%22%22%2Ct%3D%22.srt%22)%7Bvar%20n%3D(N.replace(%2F%5B%20%5D%2Fg%2C%22_%22).replace(%2F%5B%5Ea-z0-9_%5D%2Fgi%2C%22%22)%2B%22_%22%2Be%2Bt).trim()%3Breturn%20n%7C%7C(n%3Dc%2B%22_%22%2Be%2Bt)%2Cn%7Dfunction%20_(e%2Ct%3Dh)%7Bvar%20n%3De%2Ft%2Co%3DMath.floor(n)%2Ca%3Dn-o%2Cr%3DMath.round(a*t)%2B%22%22%2Ci%3Dnew%20Date(0)%3Bi.setSeconds(o)%3Btry%7Bvar%20s%3Di.toISOString().substr(11%2C8)%3B1%3D%3Dr.length%26%26(r%3D%220%22%2Br)%3Bvar%20l%3Ds%2B%22%3A%22%2Br%7Dcatch(e)%7Bl%3D%22ERROR%22%7Dreturn%20l%7Dfunction%20A(e)%7Bvar%20t%3DMath.round(e*I)%3Breturn%20function(e)%7Blet%20t%3De.hours.toString()%3B1%3D%3D%3Dt.length%26%26(t%3D%220%22%2Bt)%3Blet%20n%3De.minutes.toString()%3B1%3D%3D%3Dn.length%26%26(n%3D%220%22%2Bn)%3Blet%20o%3De.seconds.toString()%3B1%3D%3D%3Do.length%26%26(o%3D%220%22%2Bo)%3Blet%20a%3De.milliseconds.toString()%3Breturn%201%3D%3D%3Da.length%26%26(a%3D%2200%22%2Ba)%2C2%3D%3D%3Da.length%26%26(a%3D%220%22%2Ba)%2Ct%2B%22%3A%22%2Bn%2B%22%3A%22%2Bo%2B%22%2C%22%2Ba%7D(function(e)%7Blet%20t%3De%2Cn%3DMath.floor(t%2F36e5)%3Bt%25%3D36e5%3Blet%20o%3DMath.floor(t%2F6e4)%3Bt%25%3D6e4%3Blet%20a%3DMath.floor(t%2F1e3)%3Breturn%7Bhours%3An%2Cminutes%3Ao%2Cseconds%3Aa%2Cmilliseconds%3At%25%3D1e3%7D%7D(t))%7Dfunction%20L(e%2Ct)%7Bvar%20n%3D0%3Bfor(var%20o%20of%20t)%7Bvar%20a%3Do.from%2Bn%3Bn%2B%3D3%2Ce%3D%5Be.slice(0%2Ca)%2C%22%3Ci%3E%22%2Ce.slice(a)%5D.join(%22%22)%3Bvar%20r%3Do.to%2Bn%3Bn%2B%3D4%2Ce%3D%5Be.slice(0%2Cr)%2C%22%3C%2Fi%3E%22%2Ce.slice(r)%5D.join(%22%22)%7Dreturn%20e%7Dfunction%20O(e%2Ct%2Cn)%7Bvar%20o%3Dt%2Ca%3Dn%3Breturn%20t%3En%26%26(o%3Dn%2Ca%3Dt)%2Ce%3E%3Do%26%26e%3C%3Da%7Dfunction%20F(e%2Ct%2Cn%2Co)%7Bvar%20a%2Cr%3D!1%2Ci%3D_(t)%2Cs%3D(_(n)%2Co)%3Bif(O(e%2C5%2C11))%7Bvar%20l%3D_(a%3Dt%2B(d%3D12-e))%2Cc%3Dd%3E0%3F%22%2B%22%2Bd%3Ad%3Br%3D%22%F0%9F%8E%9E%20Move%20out-cue%20right%20%22%2B(d%3DM(d))%2B'%20to%20%2B12%20frames%20after%20shot%20change%3Cbr%3E%3Cfont%20style%3D%22color%3A%20%237DFDFE%3B%20font-family%3A%20monospace%22%3E%5BOUT-CUE%3A%20'%2Bi%2B%22%20%22%2Bc%2B%22%20%3D%20%22%2Bl%2B%22%5D%3C%2Ffont%3E%22%7Dif(O(e%2C-1%2C4)%26%26(l%3D_(a%3Dt%2B(d%3D-2-e))%2Cc%3Dd%3E0%3F%22%2B%22%2Bd%3Ad%2Cr%3D%22%F0%9F%8E%9E%20Move%20out-cue%20left%20%22%2B(d%3DM(d))%2B'%20to%20-2%20frames%20before%20shot%20change%3Cbr%3E%3Cfont%20style%3D%22color%3A%20%237DFDFE%3B%20font-family%3A%20monospace%22%3E%5BOUT-CUE%3A%20'%2Bi%2B%22%20%22%2Bc%2B%22%20%3D%20%22%2Bl%2B%22%5D%3C%2Ffont%3E%22)%2CO(e%2C-3%2C-7)%26%26(l%3D_(a%3Dt%2B(d%3D-2-e))%2Cc%3Dd%3E0%3F%22%2B%22%2Bd%3Ad%2Cr%3D%22%F0%9F%8E%9E%20Move%20out-cue%20right%20%22%2B(d%3DM(d))%2B'%20to%20-2%20before%20shot%20change%3Cbr%3E%3Cfont%20style%3D%22color%3A%20%237DFDFE%3B%20font-family%3A%20monospace%22%3E%5BOUT-CUE%3A%20'%2Bi%2B%22%20%22%2Bc%2B%22%20%3D%20%22%2Bl%2B%22%5D%3C%2Ffont%3E%22)%2Cs%3E2%26%26s%3C12%26%26s%3C%3DMath.abs(e)%26%26(l%3D_(a%3Dt%2B(d%3Ds-2))%2Cc%3Dd%3E0%3F%22%2B%22%2Bd%3Ad%2Cr%3D%22%F0%9F%8E%9E%20Move%20out-cue%20right%20%22%2B(d%3DM(d))%2B%22%20to%20reduce%20frame%20gap%20from%20%22%2Bs%2B'%20to%202.%3Cbr%3E%3Cfont%20style%3D%22color%3A%20%237DFDFE%3B%20font-family%3A%20monospace%22%3E%5BOUT-CUE%3A%20'%2Bi%2B%22%20%22%2Bc%2B%22%20%3D%20%22%2Bl%2B%22%5D%3C%2Ffont%3E%22)%2CEe)%7Bvar%20d%3Dde%3Bl%3D_(a%3Dt%2Bde)%2Cc%3Dd%3E0%3F%22%2B%22%2Bd%3Ad%2Cr%3D%22%F0%9F%93%96%20Move%20out-cue%20right%20%22%2B(d%3DM(d))%2B'%20to%20reduce%20CPS%20to%2017.%3Cbr%3E%3Cfont%20style%3D%22color%3A%20%237DDDFF%3B%20font-family%3A%20monospace%22%3E%5BOUT-CUE%3A%20'%2Bi%2B%22%20%22%2Bc%2B%22%20%3D%20%22%2Bl%2B%22%5D%3C%2Ffont%3E%22%2CEe%3D!1%7D(Te%26%26(d%3Dde%2Cl%3D_(a%3Dt%2Bde)%2Cc%3Dd%3E0%3F%22%2B%22%2Bd%3Ad%2Cd%3DM(d)%2CTe%3D!1%2Cr%3D%22%F0%9F%93%96%20Move%20out-cue%20right%20%22%2Bd%2B%22%20to%20reduce%20CPS%20to%20%22%2BSe%2B'.%3Cbr%3E%3Cfont%20style%3D%22color%3A%20%237DDDFF%3B%20font-family%3A%20monospace%22%3E%5BOUT-CUE%3A%20'%2Bi%2B%22%20%22%2Bc%2B%22%20%3D%20%22%2Bl%2B%22%5D%3C%2Ffont%3E%22%2CTe%3D!1)%2CMath.abs(s)%3C2)%26%26(l%3D_(a%3Dt%2B(d%3DMath.abs(s)-2))%2Cc%3Dd%3E0%3F%22%2B%22%2Bd%3Ad%2Cr%3D%22%F0%9F%8E%9E%20Move%20out-cue%20%22%2B(d%3DM(d))%2B'%20to%20-2%20before%20next%20subtitle%20event%3Cbr%3E%3Cfont%20style%3D%22color%3A%20%237DFDFE%3B%20font-family%3A%20monospace%22%3E%5BOUT-CUE%3A%20'%2Bi%2B%22%20%22%2Bc%2B%22%20%3D%20%22%2Bl%2B%22%5D%3C%2Ffont%3E%22)%3Breturn!!r%26%26(w%2B%2B%2CT%2B%2B%2C%7Bviolation%3A'%3Cspan%20class%3D%22shot_change_issue%22%3E'%2Br%2B%22%3C%2Fspan%3E%22%2Cstart%3Avoid%200%2Cend%3AA(a)%7D)%7Dfunction%20M(e)%7Bvar%20t%3D%22%20frames%22%3Breturn%201%3D%3DMath.abs(e)%26%26(t%3D%22%20frame%22)%2Ce%3C%3D0%3Fe%2Bt%3A%22%2B%22%2Be%2Bt%7Dfunction%20D(e%2Ct%2Cn)%7Bvar%20o%2Ca%2Cr%3D!1%2Ci%3D_(t)%3Bif(_(n)%2CO(e%2C1%2C10))%7Bvar%20s%3D_(a%3Dt%2B(o%3D0-e))%2Cl%3Do%3E0%3F%22%2B%22%2Bo%3Ao%3Br%3D%22%F0%9F%8E%9E%20Move%20in-cue%20left%20%22%2B(o%3DM(o))%2B'%20to%20snap%20it%20to%20shot%20change%3Cbr%3E%3Cfont%20style%3D%22color%3A%20%237FFFD4%3B%20font-family%3A%20monospace%22%3E%5BIN-CUE%3A%20'%2Bi%2B%22%20%22%2Bl%2B%22%20%3D%20%22%2Bs%2B%22%5D%3C%2Ffont%3E%22%7D(O(e%2C11%2C11)%26%26(s%3D_(a%3Dt%2B(o%3D1))%2Cl%3Do%3E0%3F%22%2B%22%2Bo%3Ao%2Cr%3D%22%F0%9F%8E%9E%20Move%20in-cue%20right%20%22%2B(o%3DM(o))%2B'%20to%20put%2012%20frames%20after%20shot%20change%3Cbr%3E%3Cfont%20style%3D%22color%3A%20%237FFFD4%3B%20font-family%3A%20monospace%22%3E%5BIN-CUE%3A%20'%2Bi%2B%22%20%22%2Bl%2B%22%20%3D%20%22%2Bs%2B%22%5D%3C%2Ffont%3E%22)%2CO(e%2C10%2C10)%26%26(s%3D_(a%3Dt%2B(o%3D2))%2Cl%3Do%3E0%3F%22%2B%22%2Bo%3Ao%2Cr%3D%22%F0%9F%8E%9E%20Move%20in-cue%20right%20%22%2B(o%3DM(o))%2B'%20to%20%2B12%20frames%20after%20shot%20change%3Cbr%3E%3Cfont%20style%3D%22color%3A%20%237FFFD4%3B%20font-family%3A%20monospace%22%3E%5BIN-CUE%3A%20'%2Bi%2B%22%20%22%2Bl%2B%22%20%3D%20%22%2Bs%2B%22%5D%3C%2Ffont%3E%22)%2CO(e%2C-11%2C-5)%26%26(s%3D_(a%3Dt%2B(o%3D-12-e))%2Cl%3Do%3E0%3F%22%2B%22%2Bo%3Ao%2Cr%3D%22%F0%9F%8E%9E%20Move%20in-cue%20left%20%22%2B(o%3DM(o))%2B'%20to%20-12%20frames%20before%20shot%20change%3Cbr%3E%3Cfont%20style%3D%22color%3A%20%237FFFD4%3B%20font-family%3A%20monospace%22%3E%5BIN-CUE%3A%20'%2Bi%2B%22%20%22%2Bl%2B%22%20%3D%20%22%2Bs%2B%22%5D%3C%2Ffont%3E%22)%2CO(e%2C-4%2C-1))%26%26(s%3D_(a%3Dt%2B(o%3D0-e))%2Cl%3Do%3E0%3F%22%2B%22%2Bo%3Ao%2Cr%3D%22%F0%9F%8E%9E%20Move%20in-cue%20right%20%22%2B(o%3DM(o))%2B'%20to%20snap%20it%20to%20shot%20change%3Cbr%3E%3Cfont%20style%3D%22color%3A%20%237FFFD4%3B%20font-family%3A%20monospace%22%3E%5BIN-CUE%3A%20'%2Bi%2B%22%20%22%2Bl%2B%22%20%3D%20%22%2Bs%2B%22%5D%3C%2Ffont%3E%22)%3Breturn!!r%26%26(w%2B%2B%2CT%2B%2B%2C%7Bviolation%3A'%3Cspan%20class%3D%22shot_change_issue%22%3E'%2Br%2B%22%3C%2Fspan%3E%22%2Cstart%3AA(a)%2Cend%3Avoid%200%7D)%7Dfunction%20B(e)%7Bif(r)%7Bvar%20t%3DNumber.POSITIVE_INFINITY%2Cn%3D0%3Bfor(let%20a%20of%20r)%7Bvar%20o%3Da-e%3Bo%3Ct%26%26a%3E%3De%26%26(t%3Do%2Cn%3D1*a)%7Dreturn%20n%7Dreturn!1%7Dfunction%20U(e)%7Bif(r)%7Bvar%20t%3DNumber.POSITIVE_INFINITY%2Cn%3D0%3Bfor(let%20a%20of%20r)%7Bvar%20o%3DMath.abs(e-a)%3Bo%3Ct%26%26(t%3Do%2Cn%3D1*a)%7Dreturn%20n%7Dreturn!1%7Dif(g%26%26!t)%7Bconsole.log(%22DEBUG%3A%20In%20Originator%2C%20working%20with%20json_src%22)%3Bvar%20P%3Dfunction(e)%7Bvar%20t%3D%5B%5D%3Bfor(var%20n%20in%20e)%7Btry%7B%22fn%22%3D%3D%3De%5Bn%5D.type%26%26(e%5Bn%5D.txt%2B%3D%22%3Cb%3E%3C%2Fb%3E%22)%7Dcatch(e)%7B%7Dt.push(%5Be%5Bn%5D.start%2Ce%5Bn%5D.end%2Ce%5Bn%5D.txt%2Ce%5Bn%5D.styles%2Ce%5Bn%5D.rgn%5D)%7Dt.sort(function(e%2Ct)%7Breturn%20e%5B0%5D-t%5B0%5D%7D)%3Bvar%20o%3D0%2Ca%3D%22%22%3Bfor(event%20of%20t)%7Bo%2B%2B%3Bvar%20r%3DA(event%5B0%5D)%2Ci%3DA(event%5B1%5D)%2Cs%3Devent%5B2%5D%3Btry%7Bvoid%200!%3D%3Devent%5B3%5D%5B0%5D.type%26%26%22italic%22%3D%3Devent%5B3%5D%5B0%5D.type%26%26(s%3DL(s%2Cevent%5B3%5D))%7Dcatch(e)%7B%7Dtry%7Bvoid%200!%3D%3Devent%5B4%5D%26%26%22top%22%3D%3Devent%5B4%5D%26%26(s%3D%22%7B%5C%5Can8%7D%22%2Bs)%7Dcatch(e)%7B%7Dtry%7B%22fn%22%3D%3Devent.type%26%26(s%2B%3D%22%3Cb%3E%3C%2Fb%3E%22)%7Dcatch(e)%7B%7Da%2B%3Do%2B%22%5Cn%22%2Br%2B%22%20--%5Cx3e%20%22%2Bi%2B%22%5Cn%22%2Bs%2B%22%5Cn%5Cn%22%7Dreturn%20a%7D(g)%3BP%3DparseSRT(P)%7Delse%22object%22!%3Dtypeof%20c%26%26t%3F(console.log(%22DEBUG%3A%20In%20AutoQC%2C%20working%20with%20encoded%20fixed%22)%2CP%3DdecodeURIComponent(document.getElementById(%22FixedTaskSRT%22).href).replace(%22data%3Atext%2Fplain%3Bcharset%3Dutf-8%2C%22%2C%22%22)%2CP%3DparseSRT(P))%3A%22object%22%3D%3Dtypeof%20c%26%26(console.log(%22DEBUG%3A%20In%20SRT%20file%2C%20working%20with%20document%20body%22)%2CP%3Dc.join(%22%5Cn%22).trim()%2CP%3DparseSRT(P))%3Bfor(var%20G%2Cj%3DP%2Cz%3D0%2Cq%3D0%3Bq%3CP.length%3Bq%2B%2B)%7Bvar%20Q%3DP%5Bq%5D.end%3Bif(void%200!%3D%3DP%5Bq%2B1%5D)var%20W%3DP%5Bq%2B1%5D.start%3Belse%20W%3D23976023976%3Bvar%20H%3DMath.round((W-Q)*h)%3BP%5Bq%5D.frames_to_next%3DH%7Dfor(event%20of%20P)%7Bvar%20%24%3Devent.start%2CK%3Devent.end%2CJ%3DMath.round(1e3*(K-%24))%2F1e3%2CY%3D(Math.floor(J)%2CMath.round((J-Math.floor(J))*h)%2CMath.round(%24*h))%2CV%3DMath.round(K*h)%2CX%3D_(Y)%2CZ%3D_(V)%2Cee%3Devent.id%2Cte%3Dee-1%2Cne%3Devent.frames_to_next%2Coe%3D(G%3D4%2Cee.toString().padStart(G%2C0))%2Cae%3D%5B%5D%2Cre%3Devent.text%2Cie%3Dre.replace(%2F%5Cn%2Fg%2C%22%E2%80%A3%22).replace(%2F%3C(%7C%5C%2F)(i%7Cb)%3E%2Fg%2C%22%22).replace(%2F%5C%7B.an.%5C%7D%2Fg%2C%22%22)%2Cse%3Die.length-1%2Cle%3DMath.round(se%2FJ*1e3)%2F1e3%2Cce%3DMath.round(se%2Fa*1e3)%2F1e3%2Cde%3DMath.floor(1e3*(ce-J)*h%2F1e3%2B1)%2Cpe%3DMath.floor(le%2B1)%2Cue%3D%22%22%2Cfe%3Devent.text%2Cme%3Devent.text%2Cge%3D-1!%3D%3Devent.text.indexOf(%22%3Cb%3E%3C%2Fb%3E%22)%2Che%3Dge%26%26%22CN%22!%3D%3DLANG%26%26ie.toUpperCase().trim()%3D%3D%3Die.trim()%2Cbe%3DU(Y)%2Cve%3DU(V)%2Cye%3DB(V)-V%2Cxe%3DY-be%2Cwe%3DV-ve%2CEe%3D!1%2CTe%3D!1%2CSe%3D!1%3Bif(le%3Ea%26%26le%3Co%26%26ye-de%3E11%26%26ne-de%3E11%26%26de%3C12%26%26!he%26%26(Ee%3D!0)%2Cle%3E%3Do%26%26ye-12%3E11%26%26ne-12%3E11%26%26!he)%7BTe%3D!0%2Cde%3D12%3Bvar%20ke%3D12%2Fh%3BSe%3DMath.round(se%2F(J%2Bke)*1e3)%2F1e3%7D_(be)%2C_(ve)%3Bvar%20Ce%3DD(xe%2CY%2Cbe)%2CIe%3DF(we%2CV%2Cve%2Cne)%3Bif(Ce%3F(ae.push(Ce.violation)%2Cj%5Bte%5D.start%3DCe.start)%3Aj%5Bte%5D.start%3DA(Math.round(j%5Bte%5D.start*h))%2CIe%3F(ae.push(Ie.violation)%2Cj%5Bte%5D.end%3DIe.end)%3Aj%5Bte%5D.end%3DA(Math.round(j%5Bte%5D.end*h))%2Cge%26%26(oe%2B%3D'%3Cspan%20class%3D%22outline%22%20style%3D%22color%3A%20purple%3B%20position%3A%20relative%3B%20top%3A%200px%3B%20left%3A%20137px%3B%22%3E%F0%9F%85%B5%F0%9F%85%BD%3C%2Fspan%3E')%2C-1!%3D%3D(re%3D(re%3Dre.replace(%2F(%3C(%5B%5E%3E%5D%2B)%3E)%2Fgi%2C%22%22)).replace(%2F%7B.an.%7D%2Fgi%2C%22%22)).indexOf(%22%5Cn%22)%26%26-1%3D%3Dre.indexOf(%22%5Cn-%22)%26%26re.replace(%22%5Cn%22%2C%22%20%22).length%3C%3Dn%26%26!he%26%26!i%26%26(ae.push('%3Cspan%20class%3D%22major_issue%22%3E%F0%9F%9A%AB%20Can%20fit%20on%20one%20line%20('%2Bn%2B%22%20for%20%22%2BLANG%2B%22)%22)%2Cy%2B%2B%2Cfe%3D(fe%3Dfe.replace(%2F%5Cn%2Fg%2C%22%20%22)).replace(%2F%20%2Fgi%2C%22%20%22).replace(%2F%5B%20%5D%5B%20%5D%2Fg%2C%22%20%22)%2CT%2B%2B)%2C-1!%3D%3Dre.indexOf(%22...%22)%26%26(ae.push('%3Cspan%20class%3D%22minor_issue%22%3E%E2%9A%A0%EF%B8%8F%20Legacy%20ellipsis%20detected%2C%20replace%20with%20U%2B2026%3A%20%E2%80%A6')%2Cx%2B%2B%2Cfe%3Dfe.replace(%2F%5C.%5C.%5C.%2Fg%2C%22%E2%80%A6%22)%2CT%2B%2B)%2C-1%3D%3D%3Dre.indexOf('%22%2C')%26%26-1%3D%3D%3Dre.indexOf('%22.')%7C%7C%22EN%22!%3DLANG%7C%7C-1!%3Dre.indexOf('%22...')%7C%7C(ae.push('%3Cspan%20class%3D%22minor_issue%22%3E%E2%9A%A0%EF%B8%8F%20Commas%20and%20periods%20stay%20within%20%E2%80%9Cquotes%2C%E2%80%9D%20%E2%80%9Clike%20so.%E2%80%9D')%2Cx%2B%2B%2Cfe%3Dfe.replace(%2F%22(%5B.%2C%5D)%2Fg%2C'%241%22')%2CT%2B%2B)%2C-1!%3D%3Dre.regexIndexOf(%2F(%5B%5E%5Cw%5D%7C%5E)OK%5B%5E%5Cw%5D%2F%2C0)%26%26%22EN%22%3D%3DLANG%26%26(ae.push('%3Cspan%20class%3D%22minor_issue%22%3E%E2%9A%A0%EF%B8%8F%20Netflix%20requires%20OK%20to%20be%20spelled%20fully%3A%20%E2%80%9COkay.%E2%80%9D')%2Cx%2B%2B%2Cfe%3Dfe.replace(%2F(%5B%5Cw%2C%22%E2%80%9C%E2%80%9D%E2%80%99%E2%80%A6%3B%3A%5D%5B%5E%5Cw%5D)OK(%5B%5E%5Cw%5D)%2Fg%2C%22%241okay%242%22).replace(%2F(%5B%5E%5Cw%5D%7C%5E)OK(%5B%5E%5Cw%5D)%2Fg%2C%22%241Okay%242%22)%2CT%2B%2B)%2C-1!%3D%3Dre.indexOf(%22'%22)%7C%7C-1!%3D%3Dre.indexOf('%22'))switch(LANG)%7Bcase%22EN%22%3Aae.push('%3Cspan%20class%3D%22minor_issue%22%3E%E2%9A%A0%EF%B8%8F%20Smart%20quotes%20recommended%20for%20EN%3A%20%3Cb%3E%E2%80%9C%20%E2%80%9D%20%E2%80%99%3C%2Fb%3E')%2Cx%2B%2B%2Cfe%3Dfe.replace(%2F%22(%5B%5Cw%5D%7B1%7D)%2Fg%2C%22%E2%80%9C%241%22).replace(%2F%22%2Fg%2C%22%E2%80%9D%22).replace(%2F'%2Fg%2C%22%E2%80%99%22)%2CT%2B%2B%3Bbreak%3Bcase%22RU%22%3Aae.push('%3Cspan%20class%3D%22minor_issue%22%3E%E2%9A%A0%EF%B8%8F%20Proper%20Russian%20uses%20chevrons%3A%20%3Cb%3E%C2%AB%20%C2%BB%3C%2Fb%3E')%2Cx%2B%2B%2Cfe%3Dfe.replace(%2F%22(%5B%5E%24%5C%5Cn%5Cs.%2C%3A%3F!%5D)%2Fg%2C%22%C2%AB%241%22).replace(%2F%22%2Fg%2C%22%C2%BB%22)%2CT%2B%2B%7D-1!%3D%3Dre.indexOf(%22!%3F%22)%26%26(ae.push(%22%3Cspan%20class%3D%5C%22minor_issue%5C%22%3E%E2%9A%A0%EF%B8%8F%20Unconventional%20punctuation%20detected.%20Did%20you%20mean%20to%20use%20'%3F!'%22)%2Cx%2B%2B%2Cfe%3Dfe.replace(%2F%5B!%5D%5B%3F%5D%2Fg%2C%22%3F!%22)%2CT%2B%2B)%2C-1%3D%3D%3Dre.indexOf(%22%20-%20%22)%7C%7Cge%7C%7C(ae.push('%3Cspan%20class%3D%22minor_issue%22%3E%E2%9A%A0%EF%B8%8F%20Instead%20of%20hyphen%2C%20consider%20en%20or%20em%20dash%3A%20%E2%80%93%20or%20%E2%80%94')%2Cx%2B%2B%2CT%2B%2B)%3Bvar%20Ne%3D!1%2CRe%3D%2F(%5Cs%24%7C%5E%5Cs)%2F%2C_e%3Dre.split(%22%5Cn%22)%2CAe%3Dre.lastIndexOf(%22%5Cn%22)%2CLe%3DAe%26%26void%200%3D%3D%3Dre%5BAe%2B1%5D%2COe%3D!1%2CFe%3Dre.replace(%22%5Cn%22%2C%22%22).split(%2F%5Cs%5Cs%2F).length-1%2CMe%3Dvoid%200!%3D%3D_e%5B2%5D%3Bfor(var%20De%20of%20_e)Le%3DRe.test(De)%7C%7CLe%2CDe.length%3En%26%26(Ne%3DDe%2COe%3D!0)%3Bif(Fe%26%26(ae.push('%3Cspan%20class%3D%22minor_issue%3E%22%3Cspan%20class%3D%22minor_issue%22%3E%E2%9A%A0%EF%B8%8F%20Double%20spaces%20detected%2C%20replace%20with%20single%20space%3C%2Fspan%3E')%2Cx%2B%2B)%2CMe%26%26(ae.push('%3Cspan%20class%3D%22major_issue%22%3E%F0%9F%9A%AB%20Three%20lines%20detected%20in%20this%20event')%2Cy%2B%2B)%2CLe)if(re.length%3E1)%7Bae.push('%3Cspan%20class%3D%22minor_issue%22%3E%E2%9A%A0%EF%B8%8F%20One%20of%20the%20lines%20begins%20or%20ends%20with%20whitespace')%3Btry%7Bfe%3D(fe%3D(fe%3D(fe%3Dfe.replace(%2F(%20%7C)%5Cn(%20%7C)%2F%2C%22%E2%80%A3%22).replace(%2F%5B%20%5D%7B2%2C%7D%2Fgi%2C%22%20%22).trim().replace(%22%E2%80%A3%22%2C%22%5Cn%22)).replace(%22%20%3Cb%3E%3C%2Fb%3E%22%2C%22%3Cb%3E%3C%2Fb%3E%22).replace(%22%20%3C%2Fi%3E%3Cb%3E%3C%2Fb%3E%22%2C%22%3C%2Fi%3E%3Cb%3E%3C%2Fb%3E%22)).replace(%2F(%20)(%3C(%7C%5C%2F)i%3E)(%5Cn)%2Fg%2C%22%242%244%22)).replace(%22%3Ci%3E%3C%2Fi%3E%22%2C%22%22)%2CT%2B%2B%7Dcatch(e)%7Bfe%3Dfe.replace(%2F(%20%7C)%5Cn(%20%7C)%2F%2C%22%C3%97%22).replace(%2F%20%5Cs%2B%2Fgi%2C%22%20%22).trim().replace(%22%C3%97%22%2C%22%5Cn%22)%2CT%2B%2B%7D%7Delse%20ae.push('%3Cspan%20class%3D%22major_issue%22%3E%F0%9F%9A%AB%20Empty%20event%20detected!')%2Cy%2B%2B%2CNe%3D%22%3Cspan%20style%3D'color%3Ared%3B'%3E%26lt%3Btext%20cannot%20be%20empty%26gt%3B%3C%2Fspan%3E%22%3BOe%26%26(ae.push('%3Cspan%20class%3D%22major_issue%22%3E%F0%9F%9A%AB%20Line%20over%20max%20limit%20of%20'%2Bn%2B%22%20for%20%22%2BLANG)%2Cy%2B%2B%2CNe%3D%5BNe.slice(0%2Cn)%2C%22%3Cspan%20style%3D'color%3A%20red%3B%20text-overflow%3A%20fade%3B'%3E%22%2CNe.slice(n)%5D.join(%22%22))%2CJ*J%3E49%26%26(ae.push('%3Cspan%20class%3D%22major_issue%22%3E%F0%9F%9A%AB%20Maximum%20duration%20exceeded%20for%20current%20FPS!')%2Cy%2B%2B)%2Cle%3Ea%26%26le%3Co%3Fue%3D'%3Cdiv%3E%3Cspan%20style%3D%22color%3A%20gold%3B%22%3E%26nbsp%3B%26nbsp%3B%26emsp%3B'%2Bpe%2B%22%20c%2Fs%3C%2Fspan%3E%3C%2Fdiv%3E%22%3Ale%3Eo%3F(ae.push('%3Cspan%20class%3D%22major_issue%22%3E%F0%9F%9A%AB%20Reading%20speed%20above%20maximum!%20Either%20truncate%20text%20or%20extend%20timings!')%2Cy%2B%2B%2Cue%3D'%3Cdiv%3E%3Cspan%20style%3D%22color%3Ared%3B%22%3E%26nbsp%3B%26nbsp%3B%26emsp%3B'%2Bpe%2B%22%20c%2Fs%3C%2Fspan%3E%3C%2Fdiv%3E%22)%3Aue%3D'%3Cdiv%3E%3Cspan%20style%3D%22color%3Asilver%3B%22%3E%26nbsp%3B%26nbsp%3B%26emsp%3B'%2Bpe%2B%22%20c%2Fs%3C%2Fspan%3E%3C%2Fdiv%3E%22%3Bvar%20Be%3D_(J*h).substr(6)%3Bif(re.trim().split(%22%5Cn%22)%2Cvoid%200!%3D%3Dae%26%26ae.length%3E0)%7Bz%2B%2B%3Bvar%20Ue%3D(X%2B%22%20%22%2B_e%5B0%5D.slice(0%2Cn).padEnd(n%2B4%2C%22%20%22)%2Boe).padEnd(n%2B10%2C%22%20%22)%3Bvoid%200!%3D%3D_e%5B1%5D%3FUe%2B%3D%22%5Cn%22%2BZ%2B%22%20%22%2B_e%5B1%5D.padEnd(n%2B8%2C%22%20%22)%3AUe%2B%3D%22%5Cn%22%2BZ%2B%22%20%22%2B%22%20%22.padEnd(n%2B6%2C%22%20%22)%2Cconsole.log(%22%25c%22%2BUe%2C%22background%3A%20%2312343b%3B%20color%3A%20%2366ff00%22)%2Cconsole.log((%2Boe%2B%22%5Cn%22%2BX%2B%22%5Cn%22%2BZ%2B%22%5Cn%22%2Bre).padEnd(50)%2C%22background%3A%20%23222%3B%20color%3A%20%23bada55%22)%2Cconsole.log((%22%25c%22%2Bae.join(%22%5Cn%22)).padEnd(50)%2C%22background%3A%20%23FFF%3B%20color%3A%20%23FF0000%3B%20font-style%3A%20italic%3B%20border%3Asolid%201px%20%23000%3B%22)%2Cconsole.log(%22%E2%94%89%22.repeat(63))%2CPe(%7Bid%3Aoe%2Cissues%3Aae%2Ccontent%3Are%2CcontentO%3Ame%2Cstart_tcf%3AX%2Cend_tcf%3AZ%2Cstart_frames%3AY%2Cend_frames%3AV%2Cstart_time%3A%24%2Cend_time%3AK%2Cduration%3AJ%2Ccps%3Ale%2Chtml_cps%3Aue%2Cdur_tcf%3ABe%2Cspecial%3ANe%7D)%2Cfe!%3D%3Dme%26%26(j%5Bte%5D.text%3Dfe)%7D%7Dfunction%20Pe(e)%7Btry%7Bvar%20t%3De.contentO.replace(%22%3Cb%3E%3C%2Fb%3E%22%2C%22%22).replace(%2F%7B.an.%7D%2Fg%2C%22%22)%7Dcatch(n)%7Bt%3De.content%7Dif(t%3D(t%3D(t%3D(t%3Dt.replace(%2F%5Cn%2Fg%2C%22%E2%8F%8E%22)).replace(%2F%5Cs%2Fg%2C%22%3Cspan%20class%3D'cSpace'%3E%E2%8E%B5%3C%2Fspan%3E%22)).replace(%2F%E2%8F%8E%2Fg%2C%22%3Cspan%20class%3D'cSpace'%20style%3D%5C%22color%3A%20%2300fa00%3B%5C%22%3E%E2%8F%8E%3C%2Fspan%3E%5Cn%22)).split(%22%5Cn%22)%2Ce.special)%7Bvar%20o%3Dt%5B0%5D.length%3Bif(t%5B0%5D%3De.special%2Co%3En)%7Bvar%20a%3De.special.substring(n-1)%3Bt%5B0%5D%3De.special.substring(0%2Cn-1).replace(%2F%5Cs%2Fg%2C%22%3Cspan%20class%3D'cSpace'%3E%E2%8E%B5%3C%2Fspan%3E%22)%2Ba%7D%7Dvar%20r%3D'%3Cdiv%20class%3D%22TimedTextEvent%22%20style%3D%22width%3A%20700px%3B%20max-width%3A%20100%25%3B%22%3E%3Cdiv%20class%3D%22details%22%3E%3Cdiv%20class%3D%22timing%22%3E%3Cspan%20class%3D%22TimeCode%22%3E'%2Be.start_tcf%2B'%3C%2Fspan%3E%3Cspan%20class%3D%22TimeCode%22%3E'%2Be.end_tcf%2B'%3C%2Fspan%3E%3C%2Fdiv%3E%3Cdiv%20class%3D%22content%22%3E%3Cdiv%20class%3D%22header%22%3E%3Cspan%20class%3D%22index%22%3E'%2Be.id%2B%22%3C%2Fspan%3E%22%2Be.html_cps%2B'%3Cspan%20class%3D%22duration%22%3E%3Cspan%20class%3D%22TimeCode%22%3E'%2Be.dur_tcf%2B'%3C%2Fspan%3E%3C%2Fspan%3E%3C%2Fdiv%3E%3Cdiv%20class%3D%22StyledTextEditor%22%20dir%3D%22ltr%22%20style%3D%22position%3Arelative%3B%20top%3A-20px%3B%22%3E%3Cpre%3E%3Cspan%3E'%2Bt%5B0%5D%3Bfor(var%20i%20of(void%200%3D%3D%3Dt%5B1%5D%26%26(t%5B1%5D%3D%22%22)%2Cr%2B%3D%22%3C%2Fspan%3E%3Cdiv%3E%3Cspan%3E%22%2Bt%5B1%5D%2B%22%3C%2Fspan%3E%3C%2Fdiv%3E%22%2Cvoid%200!%3D%3Dt%5B2%5D%3Fr%2B%3D'%3Cdiv%3E%3Cspan%20style%3D%22color%3Ared%3B%22%3E'%2Bt%5B2%5D%2B%22%3C%2Fspan%3E%3C%2Fdiv%3E%3C%2Fpre%3E%22%3Ar%2B%3D%22%3C%2Fpre%3E%22%2Ce.issues))r%2B%3D%22%3Cdiv%20style%3D%5C%22vertical-align%3Amiddle%3Bfloat%3Aleft%3B%5C%22%3E%3Cspan%20class%3D'issue'%3E%22%2Bi%2B%22%3C%2Fspan%3E%3C%2Fspan%3E%3C%2Fdiv%3E%3Cbr%20%2F%3E%22%3Bu%2B%3Dr%2B%22%3C%2Fdiv%3E%3C%2Fdiv%3E%3C%2Fdiv%3E%3C%2Fdiv%3E%3C%2Fdiv%3E%22%2CE%2B%2B%7Dz%7C%7Cconsole.log(%22%25cNo%20issues%20detected%22%2C%22background%3A%20%2312343b%3B%20color%3A%20%2366ff00%22)%3Bvar%20Ge%3D%22%22%3Br%26%26(Ge%3D%22_withShotChanges%22)%3Bvar%20je%3DR(%22Fixes_%22%2BLANG%2B%22_%22%2Bb%2BGe)%2Cze%3Dfunction(e)%7Bvar%20t%3Dnew%20RegExp(String.fromCharCode(160)%2C%22gi%22)%2Cn%3D%22%22%3Bfor(let%20a%20of%20e)%7Bvar%20o%3Da.text.replace(t%2C%22%20%22).trim().replace(%2F%5B%20%5D%5B%20%5D%2Fgi%2C%22%20%22)%3Bo.length%3C2%26%26(o%3D%22%5Cn%22)%2Cn%2B%3Da.id%2B%22%5Cn%22%2Ba.start%2B%22%20--%5Cx3e%20%22%2Ba.end%2B%22%5Cn%22%2Bo%2B%22%5Cn%5Cn%22%7Dreturn%20n%7D(j)%3Bze%3Dze.replace(%2F%20%3Cb%3E%3C%5C%2Fb%3E%2Fg%2C%22%3Cb%3E%3C%2Fb%3E%22)%3Bvar%20qe%3D'%3Ca%20id%3D%22FixedTaskSRT%22%20download%3D%22'%2Bje%2B'%22%20href%3D%22data%3Atext%2Fplain%3Bcharset%3Dutf-8%2C'%2BencodeURIComponent(ze)%2B'%22%3E%3Cbutton%3E%E2%9C%8E%3C%2Fbutton%3E%3C%2Fa%3E'%3Bs.results%3D%7BtotalEventsAffected%3AE%2CmajorIssuesFound%3Ay%2CminorIssuesFound%3Ax%2CshotChangeViolations_found%3Aw%2CautoFixesDone%3AT%7D%2ClocalStorage.removeItem(%22shotChanges%3A%22%2Bs.clq)%3Bvar%20Qe%2CWe%2CHe%2C%24e%3D%22%60%22%2BJSON.stringify(s%2Cnull%2C2)%2B%22%60%22%3Bvoid%200%3D%3D%3Dp%26%26(p%3Dfunction()%7Bfunction%20e(e)%7Bfor(let%20t%3De.length-1%3Bt%3E0%3Bt--)%7Blet%20n%3DMath.floor(Math.random()*(t%2B1))%3B%5Be%5Bt%5D%2Ce%5Bn%5D%5D%3D%5Be%5Bn%5D%2Ce%5Bt%5D%5D%7D%7Dvar%20t%3D%5B%22Beaver%22%2C%22Koala%22%2C%22Chipmunk%22%2C%22Goat%22%2C%22Duckling%22%2C%22Cheetah%22%2C%22Platypus%22%2C%22Eagle%22%2C%22Mongoose%22%2C%22Butterfly%22%5D%3Be(t)%3Bvar%20n%3D%5B%22An%20Intrepid%22%2C%22A%20Meek%22%2C%22A%20Feisty%22%2C%22A%20Lazy%22%2C%22A%20Sly%22%2C%22An%20Unperturbed%22%2C%22An%20Amused%22%2C%22A%20Rabid%22%2C%22A%20Very%22%2C%22A%20Really%22%5D%3Be(n)%3Bvar%20o%3D%5B%22%20Little%20%22%2C%22%20Humongous%20%22%2C%22%20Tiny%20%22%2C%22%20Vain%20%22%2C%22%20Finicky%20%22%2C%22%20Cunning%20%22%2C%22%20Exotic%20%22%2C%22%20Weary%20%22%2C%22%20Opinionated%20%22%2C%22%20Conniving%20%22%5D%3Breturn%20e(o)%2Cn%5B7%5D%2Bo%5B7%5D%2Bt%5B7%5D%7D())%2Cu%3Du.replace(%22DLFIXSRTTOKEN%22%2Cqe).replace(%2FWATERMARKPLACEHOLDER%2Fg%2Cd).replace(%22TITLEINFOTOKEN%22%2CN).replace(%22TITLEINFOTOKEN%22%2CN).replace(%22LINGUISTNAME%22%2Cp).replace(%22METADATATOKEN%22%2C%24e)%2Cconsole.log(s.results)%2CQe%3DR(%22Auto_QC_Log_%22%2BLANG%2B%22_%22%2Bb%2BGe%2C%22.html%22)%2CWe%3Du%2C(He%3Ddocument.createElement(%22a%22)).setAttribute(%22href%22%2C%22data%3Atext%2Fplain%3Bcharset%3Dutf-8%2C%22%2BencodeURIComponent(We))%2CHe.setAttribute(%22download%22%2CQe)%2CHe.style.display%3D%22none%22%2Cdocument.body.appendChild(He)%2CHe.click()%2Cdocument.body.removeChild(He)%7D%7D%2C%22object%22%3D%3Dtypeof%20exports%26%26%22undefined%22!%3Dtypeof%20module%3Fmodule.exports%3Do()%3A%22function%22%3D%3Dtypeof%20define%26%26define.amd%3Fdefine(o)%3An.runAutoQC%3Do()%2Cfunction(e%2Ct)%7B%22object%22%3D%3Dtypeof%20exports%26%26%22undefined%22!%3Dtypeof%20module%3Fmodule.exports%3Dt()%3A%22function%22%3D%3Dtypeof%20define%26%26define.amd%3Fdefine(t)%3Ae.parseSRT%3Dt()%7D(this%2Cfunction()%7B%22use%20strict%22%3Bfunction%20e(e)%7Bvar%20t%3De.split(%22%3A%22)%3Btry%7Bvar%20n%3Dt%5B2%5D.split(%22%2C%22)%3Breturn%201%3D%3D%3Dn.length%26%26(n%3Dt%5B2%5D.split(%22.%22))%2C3600*parseFloat(t%5B0%5D%2C10)%2B60*parseFloat(t%5B1%5D%2C10)%2BparseFloat(n%5B0%5D%2C10)%2BparseFloat(n%5B1%5D%2C10)%2F1e3%7Dcatch(e)%7Breturn%200%7D%7Dfunction%20t(e%2Ct)%7Bfor(var%20n%3Dt%3B!e%5Bn%5D%3B)n%2B%2B%3Breturn%20n%7Dreturn%20function()%7Bfor(var%20n%3D%5B%5D%2Co%3D(arguments.length%3E0%26%26void%200!%3D%3Darguments%5B0%5D%3Farguments%5B0%5D%3A%22%22).split(%2F(%3F%3A%5Cr%5Cn%7C%5Cr%7C%5Cn)%2Fgm)%2Ca%3Dfunction(e)%7Bfor(var%20t%3De.length-1%3Bt%3E%3D0%26%26!e%5Bt%5D%3B)t--%3Breturn%20t%7D(o)%2B1%2Cr%3D0%2Ci%3Dvoid%200%2Cs%3Dvoid%200%2Cl%3Dvoid%200%2Cc%3D0%3Bc%3Ca%3Bc%2B%2B)%7Bfor(l%3D%7B%7D%2Cs%3D%5B%5D%2Cc%3Dt(o%2Cc)%2Cl.id%3DparseInt(o%5Bc%2B%2B%5D%2C10)%2Ci%3Do%5Bc%2B%2B%5D.split(%2F%5B%5Ct%20%5D*--%3E%5B%5Ct%20%5D*%2F)%2Cl.start%3De(i%5B0%5D)%2C-1!%3D%3D(r%3Di%5B1%5D.indexOf(%22%20%22))%26%26(i%5B1%5D%3Di%5B1%5D.substr(0%2Cr))%2Cl.end%3De(i%5B1%5D)%3Bc%3Ca%26%26o%5Bc%5D%3B)s.push(o%5Bc%2B%2B%5D)%3Bl.text%3Ds.join(%22%5C%5CN%22).replace(%2F%7B.an8%7D%2F%2C%22POSToppyTAG%22).replace(%2F%5C%7B(%5C%5C%5B%5Cw%5D%2B%5C(%3F(%5B%5Cw%5Cd%5D%2B%2C%3F)%2B%5C)%3F)%2B%5C%7D%2Fgi%2C%22%22)%2Cl.text%3Dl.text.replace(%2F%3C%2Fg%2C%22%26lt%3B%22).replace(%2F%3E%2Fg%2C%22%26gt%3B%22)%2Cl.text%3Dl.text.replace(%2F%26lt%3B(%5C%2F%3F(font%7Cb%7Cu%7Ci%7Cs))((%5Cs%2B(%5Cw%7C%5Cw%5B%5Cw%5C-%5D*%5Cw)(%5Cs*%3D%5Cs*(%3F%3A%22.*%3F%22%7C'.*%3F'%7C%5B%5E'%22%3E%5Cs%5D%2B))%3F)%2B%5Cs*%7C%5Cs*)(%5C%2F%3F)%26gt%3B%2Fgi%2C%22%3C%241%243%247%3E%22)%2Cl.text%3Dl.text.replace(%2F%5C%5CN%2Fgi%2C%22%5Cn%22)%2Cl.text%3Dl.text.replace(%22POSToppyTAG%22%2C%22%7B%5C%5Can8%7D%22)%2Cn.push(l)%7Dreturn%20n%7D%7D)%2C%22object%22!%3Dtypeof%20c%26%26document.location.href.includes(%22originator.backlot.netflix.com%22)%26%26(localStorage.getItem(%22shotChanges%3A%22%2Bc)%3F(console.log(%22DEBUG%3A%20Shot%20changes%20for%20%22%2Bc%2B%22%20already%20present%20in%20localStorage%22)%2Cs.SC%3DlocalStorage.getItem(%22shotChanges%3A%22%2Bc))%3At%3FlocalStorage.setItem(%22shotChanges%3A%22%2Bl.clq%2Cl.SC)%3A(a%3D%22https%3A%2F%2Foriginator.backlot.netflix.com%2Fapi%2Frequest%2Fshotchanges%2Fclq%3Aorigination%3A%22%2Bc%2Cr%3Dfunction(e%2Ct)%7Bnull!%3D%3De%3Falert(%22Something%20went%20wrong%20with%20error%20status%3A%20%22%2Be%2B%22%5CnIf%20it's%20500-something%2C%20please%20reload%20the%20page%20and%20try%20again.%22)%3A(localStorage.setItem(%22shotChanges%3A%22%2Bc%2Ct.frameNumbers)%2Cs.SC%3Dt.frameNumbers%2Cconsole.log(%22DEBUG%3A%20Shot%20changes%20for%20%22%2Bc%2B%22%20saved%20in%20localStorage%22))%7D%2C(i%3Dnew%20XMLHttpRequest).open(%22GET%22%2Ca%2C!0)%2Ci.responseType%3D%22json%22%2Ci.onload%3Dfunction()%7Bvar%20e%3Di.status%3Br(200%3D%3D%3De%3Fnull%3Ae%2Ci.response)%7D%2Ci.send()))%2Cfunction%20e(t)%7BlocalStorage.getItem(%22shotChanges%3A%22%2Bc)%7C%7C%22object%22%3D%3Dtypeof%20c%3FsetTimeout(function()%7BrunAutoQC(c)%7D%2C2400)%3AsetTimeout(function()%7Be(runAutoQC)%7D%2C350)%7D(runAutoQC)%7D()%7Dfunction%20imarunettuDoubleExportSRT()%7B!function()%7Bvar%20e%3Ddocument.location.href.toString().split(%22%3D%22)%5B1%5D.split(%22%3A%22)%5B2%5D%2Ct%3Dnew%20RegExp(%22%5E%5B0-9a-f%5D%7B8%7D-%5B0-9a-f%5D%7B4%7D-%5B1-5%5D%5B0-9a-f%5D%7B3%7D-%5B89ab%5D%5B0-9a-f%5D%7B3%7D-%5B0-9a-f%5D%7B12%7D%24%22%2C%22i%22)%3Bif(!e%7C%7C!t.test(e))throw%20alert(%22You%20must%20be%20in%20a%20started%2C%20saved%20Originator%20task!%22)%2Cnew%20Error%3Bif(!t.test(e))throw%20alert(%22The%20CLQ%20is%20invalid%3A%20%22%2Be%2B%22%5CnPlease%20report%20me%20to%20the%20developer.%22)%2Cnew%20Error%3Bvar%20n%3DlocalStorage%5B%22clq%3Aorigination%3A%22%2Be%5D%3Bif(!n)throw%20alert(%22Timed%20text%20events%20not%20found%20in%20localStorage%5Cnfor%20CLQ%3A%20%22%2Be%2B'%5CnIf%20the%20CLQ%20is%20correct%20and%5Cn%22Save%20to%20local%20storage%22%20is%20enabled%20in%20Settings%2C%5Cnsave%20the%20task%20and%20try%20again.')%2Cnew%20Error%3Bvar%20o%3DJSON.parse(n)%2Ca%3Do.events%2Cr%3Do.meta.fps%2Ci%3Dr.split(%22_%22)%5B1%5D%2F100%2Cs%3Dprompt(%22DOUBLE%20EXPORT%20SRT%20reports%E2%80%A6%5Cn%5CnPress%20Enter%20to%20accept%20framerate%20of%20%22%2Bi%2B%22%20or%20enter%20new%20as%202400%20or%202997%3A%22)%3Bif(%22%22!%3D%3Ds)%7Bvar%20l%3Ds.substring(0%2C2)%2Cc%3Ds.substring(2%2Cs.length)%3Br%3D%22FPS_%22%2Bl%2Bc%2Ci%3D1*(l%2B%22.%22%2Bc)%7Dvar%20d%3Do.meta.movieId%2Cp%3Do.meta.packageId%3Bif(%22%22%3D%3Dprompt(%22DOUBLE%20EXPORT%20SRT%20reports%E2%80%A6%5Cn%5CnPress%20Enter%20to%20try%20the%20template.%20Enter%20anything%20to%20go%20for%20CC.%22))var%20u%3D%22https%3A%2F%2Foriginator.backlot.netflix.com%2Fapi%2Frequest%2FtimedText%2F%22%2Be%2B%22%2F%22%2Bp%2B%22%2F%22%2Bd%2B%22%2Fen%2FTEMPLATE%2FPRIMARY%2F%22%2Br%2B%22%3Fsource%3DORIGINATOR%22%3Belse%20u%3D%22https%3A%2F%2Foriginator.backlot.netflix.com%2Fapi%2Frequest%2FtimedText%2F%22%2Be%2B%22%2F%22%2Bp%2B%22%2F%22%2Bd%2B%22%2Fen%2FCC%2FPRIMARY%2F%22%2Br%2B%22%3Fsource%3DARCHIVE%22%3Bvar%20f%3Dh(r%2B%22_TRANSLATION%22)%2Cm%3Dh(r%2B%22_SOURCE%22)%2Cg%3D(h(r%2B%22_BILINGUAL_TABLE%22).replace(%22.srt%22%2C%22.html%22)%2C1e3%2Fi)%3Bfunction%20h(t%3D%22%22)%7Bvar%20n%3D(document.getElementsByClassName(%22cpe-page-menu-label%22)%5B0%5D.innerText.replace(%2F%5B%20%5D%2Fg%2C%22_%22).replace(%2F%5B%5Ea-z0-9_%5D%2Fgi%2C%22%22)%2Bt%2B%22.srt%22).trim()%3Breturn%20n%7C%7C(n%3De%2B%22_%22%2Bt%2B%22.srt%22)%2Cn%7Dfunction%20b(e)%7Bvar%20t%3DMath.round(e*g)%3Breturn%20function(e)%7Blet%20t%3De.hours.toString()%3B1%3D%3D%3Dt.length%26%26(t%3D%220%22%2Bt)%3Blet%20n%3De.minutes.toString()%3B1%3D%3D%3Dn.length%26%26(n%3D%220%22%2Bn)%3Blet%20o%3De.seconds.toString()%3B1%3D%3D%3Do.length%26%26(o%3D%220%22%2Bo)%3Blet%20a%3De.milliseconds.toString()%3Breturn%201%3D%3D%3Da.length%26%26(a%3D%2200%22%2Ba)%2C2%3D%3D%3Da.length%26%26(a%3D%220%22%2Ba)%2Ct%2B%22%3A%22%2Bn%2B%22%3A%22%2Bo%2B%22%2C%22%2Ba%7D(function(e)%7Blet%20t%3De%2Cn%3DMath.floor(t%2F36e5)%3Bt%25%3D36e5%3Blet%20o%3DMath.floor(t%2F6e4)%3Bt%25%3D6e4%3Blet%20a%3DMath.floor(t%2F1e3)%3Breturn%7Bhours%3An%2Cminutes%3Ao%2Cseconds%3Aa%2Cmilliseconds%3At%25%3D1e3%7D%7D(t))%7Dfunction%20v(e)%7Bvar%20t%3D%5B%5D%3Bfor(var%20n%20in%20e)%7Btry%7Bvar%20o%3De%5Bn%5D.type%3B%22fn%22%3D%3D%3Do%26%26(e%5Bn%5D.txt%2B%3D%22%3Cb%3E%3C%2Fb%3E%22%2Co%3Dvoid%200)%7Dcatch(e)%7B%7Dt.push(%5Be%5Bn%5D.start%2Ce%5Bn%5D.end%2Ce%5Bn%5D.txt%2Ce%5Bn%5D.styles%2Ce%5Bn%5D.rgn%5D)%7Dt.sort(function(e%2Ct)%7Breturn%20e%5B0%5D-t%5B0%5D%7D)%3Bvar%20a%3D0%2Cr%3D%22%22%3Bfor(event%20of%20t)%7Ba%2B%2B%3Bvar%20i%3Db(event%5B0%5D)%2Cs%3Db(event%5B1%5D)%2Cl%3Devent%5B2%5D%3Btry%7Bvoid%200!%3D%3Devent%5B3%5D%5B0%5D.type%26%26%22italic%22%3D%3Devent%5B3%5D%5B0%5D.type%26%26(l%3Dy(l%2Cevent%5B3%5D))%7Dcatch(e)%7B%7Dtry%7Bvoid%200!%3D%3Devent%5B4%5D%26%26%22top%22%3D%3Devent%5B4%5D%26%26(l%3D%22%7B%5C%5Can8%7D%22%2Bl)%7Dcatch(e)%7B%7Dtry%7B%22fn%22%3D%3Devent.type%26%26(l%2B%3D%22%3Cb%3E%3C%2Fb%3E%22)%7Dcatch(e)%7B%7Dconsole.log(l)%2Cr%2B%3Da%2B%22%5Cn%22%2Bi%2B%22%20--%5Cx3e%20%22%2Bs%2B%22%5Cn%22%2Bl%2B%22%5Cn%22%2B%22%5Cn%22%7Dreturn%20r%7Dfunction%20y(e%2Ct)%7Bfor(var%20n%20of(position_offset%3D0%2Ct))%7Bvar%20o%3Dn.from%2Bposition_offset%3Bposition_offset%2B%3D3%2Ce%3D%5Be.slice(0%2Co)%2C%22%3Ci%3E%22%2Ce.slice(o)%5D.join(%22%22)%3Bvar%20a%3Dn.to%2Bposition_offset%3Bposition_offset%2B%3D4%2Ce%3D%5Be.slice(0%2Ca)%2C%22%3C%2Fi%3E%22%2Ce.slice(a)%5D.join(%22%22)%7Dreturn%20e%7Dfunction%20x(e%2Ct%2Cn%3D%22plain%22)%7Bvar%20o%3Ddocument.createElement(%22a%22)%3Bo.setAttribute(%22href%22%2C%22data%3Atext%2F%22%2Bn%2B%22%3Bcharset%3Dutf-8%2C%25EF%25BB%25BF%22%2BencodeURIComponent(t))%2Co.setAttribute(%22download%22%2Ce)%2Co.style.display%3D%22none%22%2Cdocument.body.appendChild(o)%2Co.click()%2Cdocument.body.removeChild(o)%7D!async%20function()%7Bvar%20e%3Dawait%20async%20function()%7Breturn%20await(await%20fetch(u)).json()%7D()%3Bx(m%2Cv(e))%7D()%2Cx(f%2Cv(a))%7D()%7Dfunction%20imarunettuBilingualExportHTML()%7B!function()%7Bvar%20e%3Ddocument.location.href.toString().split(%22%3D%22)%5B1%5D.split(%22%3A%22)%5B2%5D%2Ct%3Dnew%20RegExp(%22%5E%5B0-9a-f%5D%7B8%7D-%5B0-9a-f%5D%7B4%7D-%5B1-5%5D%5B0-9a-f%5D%7B3%7D-%5B89ab%5D%5B0-9a-f%5D%7B3%7D-%5B0-9a-f%5D%7B12%7D%24%22%2C%22i%22)%3Bif(!e%7C%7C!t.test(e))throw%20alert(%22You%20must%20be%20in%20a%20started%2C%20saved%20Originator%20task!%22)%2Cnew%20Error%3Bif(!t.test(e))throw%20alert(%22The%20CLQ%20is%20invalid%3A%20%22%2Be%2B%22%5CnPlease%20report%20me%20to%20the%20developer.%22)%2Cnew%20Error%3Bvar%20n%3D'%3Chead%3E%5Cn%20%3Cscript%3E%5Cn%20console.log(%22Loading%20started...%22)%3B%5Cn%3C%5C%2Fscript%3E%5Cn%3Cscript%3E%5Cnvar%20prevScrollpos%3Dwindow.pageYOffset%3B%5Cnwindow.onscroll%3Dfunction()%20%7B%5Cn%20var%20currentScrollPos%3Dwindow.pageYOffset%3B%5Cn%20if%20(prevScrollpos%20%3E%20currentScrollPos)%20%7B%5Cn%20document.getElementById(%22navbar%22).style.top%3D%220%22%3B%5Cn%20%7D%5Cn%20else%20%7B%5Cn%20document.getElementById(%22navbar%22).style.top%3D%22-50px%22%3B%5Cn%20%7D%5Cn%20prevScrollpos%3DcurrentScrollPos%3B%5Cn%7D%5Cn%5Cn%5Cnfunction%20loadScript(src)%7B%5Cnvar%20jScript%20%3D%20document.createElement(%5C'script%5C')%5CnjScript.type%20%3D%20%22text%2Fjavascript%22%3B%5CnjScript.src%20%3D%20src.trim()%3B%5Cndocument.body.appendChild(jScript)%5Cn%7D%5Cn%5Cndocument.addEventListener(%5C'DOMContentLoaded%5C'%2C%20function%20load()%20%7B%5Cn%20if%20(!window.jQuery)%20return%20setTimeout(load%2C%2050)%3B%5Cn%20console.log(%22jQuery%20and%20JsDiff%20are%20loaded!%20Executing%20main.%22)%3B%5Cn%20main()%3B%5Cn%7D%2C%20false)%3B%5Cn%5Cnfunction%20main()%7B%5Cndocument.addEventListener(%5C'paste%5C'%2C%20function(e)%20%7B%5Cn%20var%20pasteStatus%20%3D%20document.getElementById(%22pasteReady%22)%3B%5Cn%20pasteStatus.innerText%20%3D%20%22got%20paste!%22%3B%5Cn%20pasteStatus.style.opacity%20%3D%200.01%3B%5Cn%20fade(%22in%22%2C500%2CpasteStatus)%3B%5Cn%20var%20earlier_html%20%3D%20e.clipboardData.getData(%5C'text%2Fhtml%5C')%3B%5Cn%20%2F%2Fconsole.log(earlier_html)%3B%5Cn%20proceedWithCompare(earlier_html)%3B%5Cn%7D%2C%20%7Bonce%3A%20true%7D%20)%3B%20console.log(%22Listening%20for%20paste!%22)%3B%5Cn%5Cnvar%20oldRows%20%3D%20document.getElementsByTagName(%22tr%22)%5Cn%5Cnfunction%20fade(type%2C%20ms%2C%20el%2C%20remove%20%3D%20false)%20%7B%5Cn%20var%20isIn%20%3D%20type%20%3D%3D%3D%20%5C'in%5C'%2C%5Cn%20opacity%20%3D%20isIn%20%3F%200%20%3A%201%2C%5Cn%20interval%20%3D%2020%2C%5Cn%20duration%20%3D%20ms%2C%5Cn%20gap%20%3D%20interval%20%2F%20duration%5Cn%5Cn%20if%20(isIn)%20%7B%5Cn%20el.style.display%20%3D%20%5C'inline%5C'%5Cn%20el.style.opacity%20%3D%20opacity%5Cn%20%7D%5Cn%5Cn%20function%20func()%20%7B%5Cn%5Cn%20opacity%20%3D%20isIn%20%3F%20opacity%20%2B%20gap%20%3A%20opacity%20-%20gap%5Cn%20el.style.opacity%20%3D%20opacity%5Cn%5Cn%20if%20(opacity%20%3C%3D%200)%20%7B%20remove%20%3F%20el.remove()%20%3A%20el.style.display%20%3D%20%5C'none%5C'%20%7D%5Cn%20if%20(opacity%20%3C%3D%200%20%7C%7C%20opacity%20%3E%3D%201)%20window.clearInterval(fading)%5Cn%20%7D%5Cn%5Cn%20var%20fading%20%3D%20window.setInterval(func%2C%20interval)%5Cn%7D%5Cn%5Cn%5Cnvar%20b%20%3D%20document.querySelector(%22%23the-button%22)%5Cnb.innerText%20%3D%20%22DIFF%20ENGINE%20ON%22%3B%5Cnb.style.color%20%3D%20%22gold%22%3B%5Cnb.style.fontWeight%20%3D%20%22bold%22%3B%5Cnb.style.backgroundColor%20%3D%20%22brightgreen%22%3B%5Cnfade(%22in%22%2C700%2Cb%2Cfalse)%3B%5Cnvar%20p%20%3D%20document.createElement(%5C'span%5C')%3B%5Cnp.innerText%20%3D%20%22paste%20it!%22%3B%5Cnp.style%20%3D%20%22position%3A%20relative%3B%20top%3A%201px%3B%20left%3A%2013px%3B%20font-weight%3A%20bold%3B%20color%3A%20ivory%3B%20opacity%3A%200.5%3B%22%5Cnp.id%20%3D%20%22pasteReady%22%3B%5Cnb.insertAdjacentElement(%22afterEnd%22%2Cp)%3B%5Cn%5Cn%5Cnfunction%20proceedWithCompare(document_html)%7B%5Cn%5Cn%20function%20createTextSheetFromRows(rows%2CchildNumber)%7B%5Cn%20var%20text%20%3D%20%22%22%5Cn%20for(row%20of%20rows)%7B%5Cn%20text%20%2B%3D%20row.children%5BchildNumber%5D.innerText%2B%22%5C%5Cn%5C%5Cr%5C%5Cr%5C%5Cr%5C%5Cn%5C%5Cr%5C%5Cn%22%5Cn%20%7D%5Cn%20return%20text%5Cn%20%7D%5Cn%5Cnvar%20document_new%20%3D%20new%20DOMParser().parseFromString(document_html%2C%20%22text%2Fhtml%22)%3B%5Cn%5CnnewRows%20%3D%20document_new.body.getElementsByTagName(%22tr%22)%5Cn%5Cn%20var%20pasteStatus%20%3D%20document.getElementById(%22pasteReady%22)%3B%5Cn%5Cnif(newRows.length%20%3D%3D%200)%5Cn%7B%5Cn%20pasteStatus.innerText%20%3D%20%22paste%20error!%22%3B%5Cn%20pasteStatus.style.opacity%20%3D%200.01%3B%5Cn%20pasteStatus.style.color%20%3D%20%22red%22%3B%5Cn%20fade(%22in%22%2C500%2CpasteStatus%2Cfalse)%3B%20%5Cn%7D%20else%20%7B%5CnpasteStatus.innerText%20%3D%20%22use%20Alt%2BZ%22%3B%5Cn%20pasteStatus.style.opacity%20%3D%200.01%3B%5Cn%20pasteStatus.style.color%20%3D%20%22green%22%3B%5Cn%20b.innerText%20%3D%20%22DIFF%20SUCCESS%22%3B%5Cn%20b.style.opacity%20%3D%200.3%3B%5Cn%20fade(%22in%22%2C500%2CpasteStatus%2Cfalse)%3B%20%5Cn%7D%5Cn%5Cn%5Cnfunction%20diffAndPopulateCell(oldRows%2CnewRows%2Cdmethod%2CcellNumber)%5Cn%7B%5Cn%20%5CnoldRowsText%20%3D%20createTextSheetFromRows(oldRows%2C%20cellNumber)%20%5Cn%5CnnewRowsText%20%3D%20createTextSheetFromRows(newRows%2C%20cellNumber)%20%5Cn%5Cnswitch(dmethod)%20%7B%5Cn%20case%20%221%22%20%3A%20diff%20%3D%20JsDiff.diffWords(oldRowsText%2C%20newRowsText)%3B%20break%3B%5Cn%20case%20%222%22%20%3A%20diff%20%3D%20JsDiff.diffLines(oldRowsText%2C%20newRowsText)%3B%20break%3B%5Cn%20case%20%223%22%20%3A%20diff%20%3D%20JsDiff.diffChars(oldRowsText%2C%20newRowsText)%3B%20break%3B%5Cn%20case%20%224%22%20%3A%20diff%20%3D%20JsDiff.diffWordsWithSpace(oldRowsText%2C%20newRowsText)%3B%20break%3B%5Cn%20case%20%225%22%20%3A%20diff%20%3D%20JsDiff.diffTrimmedLines(oldRowsText%2C%20newRowsText)%3B%20break%3B%5Cn%20case%20%226%22%20%3A%20diff%20%3D%20JsDiff.diffSentences(oldRowsText%2C%20newRowsText)%3B%20break%3B%5Cn%20default%3A%20diff%20%3D%20JsDiff.diffWordsWithSpace(oldRowsText%2C%20newRowsText)%3B%7D%5Cn%5CntextHolder%20%3D%20document.createElement(%22pre%22)%5Cnfragment%20%3D%20document.createDocumentFragment()%3B%5Cn%5Cndiff.forEach((part)%20%3D%3E%20%7B%20const%20color%20%3D%20part.added%20%3F%20%22%2326ff00%22%20%3A%20part.removed%20%3F%20%5C'red%5C'%20%3A%20%5C'%23808080%5C'%3B%5Cn%20var%20class_name%20%3D%20part.added%20%3F%20%22goody%22%20%3A%20part.removed%20%3F%20%5C'bady%5C'%20%3A%20%5C'neutry%5C'%3B%5Cn%20var%20font_weight%20%3D%20part.added%20%3F%20%22bold%22%20%3A%20part.removed%20%3F%20%22lighter%22%20%3A%20%22normal%22%3B%5Cn%20span%20%3D%20document.createElement(%5C'span%5C')%3B%20%5Cn%20span.style.color%20%3D%20color%3B%5Cn%20span.className%20%3D%20class_name%3B%5Cn%20span.style.fontWeight%20%3D%20font_weight%3B%5Cn%20part.removed%20%26%26%20(span.style.textDecoration%20%3D%20%22line-through%22)%3B%5Cn%20part.removed%20%26%26%20(span.style.opacity%3D0.9)%3B%5Cn%20span.appendChild(document.createTextNode(part.value))%3B%5Cn%20fragment.appendChild(span)%3B%20%5Cn%7D)%3B%5Cn%5CntextHolder.appendChild(fragment)%5Cneval(%22c%22%20%2B%20cellNumber%20%2B%20%22.appendChild(textHolder)%22)%5Cn%7D%5Cn%5Cn%5Cn%5Cnvar%20table%20%3D%20document.querySelector(%22table%22)%5Cn%5Cnvar%20newTable%20%3D%20document.createElement(%22table%22)%5Cnvar%20row%20%3D%20newTable.insertRow(0)%5Cnvar%20c0%20%3D%20row.insertCell(0)%5Cnvar%20c1%20%3D%20row.insertCell(1)%5Cnvar%20c2%20%3D%20row.insertCell(2)%5CnnewTable.style.width%20%3D%20%2280%25%22%3B%20%5CnnewTable.style.margin%20%3D%20%22auto%22%3B%5CnnewTable.style.contenteditable%20%3Dtrue%3B%5Cn%5Cnvar%20dMeth%20%3D%20prompt(%22Select%20comparison%20mode%3A%201.%20Words%2C%202.%20Lines%2C%203.%20Characters%5C%5Cn4.%20Words-and-Whitespace%2C%205.%20Trimmed-Lines%2C%206.%20Sentences%22%2C%221%22)%3B%5Cn%5Cn%5CndiffAndPopulateCell(oldRows%2CnewRows%2C3%2C0)%5Cnvar%20cues%20%3D%20%5B%5D%3B%5Cncues%20%3D%20c0.innerHTML.split(%22%5C%5Cn%5C%5Cr%5C%5Cr%5C%5Cr%5C%5Cn%5C%5Cr%5C%5Cn%22)%5Cn%5CndiffAndPopulateCell(oldRows%2CnewRows%2CdMeth%2C1)%5Cnvar%20originals%20%3D%20%5B%5D%3B%5Cnoriginals%20%3D%20c1.innerHTML.split(%22%5C%5Cn%5C%5Cr%5C%5Cr%5C%5Cr%5C%5Cn%5C%5Cr%5C%5Cn%22)%5Cn%5CndiffAndPopulateCell(oldRows%2CnewRows%2CdMeth%2C2)%5Cnvar%20translations%20%3D%20%5B%5D%3B%5Cntranslations%20%3D%20c2.innerHTML.split(%22%5C%5Cn%5C%5Cr%5C%5Cr%5C%5Cr%5C%5Cn%5C%5Cr%5C%5Cn%22)%5Cn%5Cnif(originals.length%20%3E%20translations.length)%20%7Bvar%20lim%3Doriginals.length%7D%20else%20%7Bvar%20lim%3Dtranslations.length%7D%3B%20var%20newHtml%3D%5C'%3Ctable%3E%3Ctbody%3E%5C'%3B%20for(a%3D1%3B%20a%3Clim%3B%20a%2B%2B)%7B%20newHtml%20%2B%3D%20%5C'%3Ctr%3E%3Ctd%3E%3Cpre%3E%5C'%20%2B%20cues%5Ba%5D%20%2B%20%5C'%3C%2Fpre%3E%3C%2Ftd%3E%3Ctd%3E%3Cpre%3E%5C'%20%2B%20originals%5Ba%5D%20%2B%20%5C'%3C%2Fpre%3E%3C%2Ftd%3E%3Ctd%3E%3Cpre%3E%5C'%20%2B%20translations%5Ba%5D%20%2B%5C'%3C%2Fpre%3E%3C%2Ftd%3E%3C%2Ftr%3E%5C'%3B%20%7D%20newHtml%20%2B%3D%20%22%3C%2Ftbody%3E%3C%2Ftable%3E%22%5Cn%5Cndocument.querySelector(%22table%22).outerHTML%20%3D%20newHtml%5Cnvar%20visibility%20%3D%20%22both%22%3B%5Cn%5Cndocument.onkeydown%20%3D%20function(event)%7B%5Cn%20if%20(event.altKey%20%26%26%20event.keyCode%20%3D%3D%2090)%20%7B%5Cn%20%2F%2FAlt%2BZ%2C%20simultaneously.%5Cn%5Cn%20switch%20(visibility)%20%7B%5Cn%20case%20%22both%22%3A%20for(ea%20of%20document.getElementsByClassName(%22bady%22))%20%7B%20fade(%5C'out%5C'%2C100%2Cea%2Cfalse)%20%7D%3B%20visibility%20%3D%20%22only_goodies%22%3B%5Cn%20break%3B%5Cn%20case%20%22only_goodies%22%3A%20for(ea%20of%20document.getElementsByClassName(%22bady%22))%20%7B%20fade(%5C'in%5C'%2C100%2Cea%2Cfalse)%20%7D%5Cn%20for(ea%20of%20document.getElementsByClassName(%22goody%22))%20%7B%20fade(%5C'out%5C'%2C100%2Cea%2Cfalse)%20%7D%5Cn%20visibility%20%3D%20%22only_mistakes%22%5Cn%20break%3B%5Cn%20case%20%22only_mistakes%22%3A%20for(ea%20of%20document.getElementsByClassName(%22goody%22))%20%7B%20fade(%5C'in%5C'%2C100%2Cea%2Cfalse)%20%7D%5Cn%20visibility%20%3D%20%22both%22%5Cn%20break%3B%5Cn%20default%3A%20for(ea%20of%20document.getElementsByClassName(%22bady%22))%20%7B%20fade(%5C'in%5C'%2C100%2Cea%2Cfalse)%20%7D%5Cn%20for(ea%20of%20document.getElementsByClassName(%22goody%22))%20%7B%20fade(%5C'in%5C'%2C100%2Cea%2Cfalse)%20%7D%5Cn%20visibility%20%3D%20%22both%22%7D%7D%7D%7D%7D%3C%5C%2Fscript%3E%5Cn%20%3Cstyle%3E%23navbar%20%7B%5Cn%20background-color%3A%20%23333%3B%5Cn%20top%3A%200%3B%5Cn%20position%3A%20fixed%3B%5Cn%20width%3A%2080%25%3B%5Cn%20left%3A%2010%25%3B%5Cn%20transition%3A%20top%200.5s%3B%5Cn%20margin-left%3A%20auto%3B%5Cn%20margin-right%3A%20auto%3B%5Cn%20opacity%3A%200.7%3B%5Cn%20%7D%5Cn%5Cn%20%23navbar%20a%20%7B%5Cn%20float%3A%20left%3B%5Cn%20display%3A%20block%3B%5Cn%20color%3A%20white%3B%5Cn%20text-align%3A%20center%3B%5Cn%20padding%3A%205px%3B%5Cn%20text-decoration%3A%20none%3B%5Cn%20%7D%5Cn%5Cn%20%23navbar%20a%3Ahover%20%7B%5Cn%20background-color%3A%20%23ddd%3B%5Cn%20color%3A%20black%3B%5Cn%20%7D%5Cn%5Cn%20body%20%7B%5Cn%20background%3A%20%23212121%3B%5Cn%20color%3A%20grey%3B%5Cn%20%7D%5Cn%5Cn%20table%20%7B%5Cn%20width%3A%2080%25%3B%5Cn%20table-layout%3A%20fixed%3B%5Cn%20text-align%3A%20center%3B%5Cn%20margin-left%3A%20auto%3B%5Cn%20margin-right%3A%20auto%3B%5Cn%20margin-top%3A%2060px%3B%5Cn%20border-collapse%3A%20collapse%3B%5Cn%5Cn%20%7D%5Cn%5Cn%20thead%2C%5Cn%20tbody%2C%5Cn%20td%2C%5Cn%20tr%5Cn%20%7B%5Cn%20display%3A%20block%3B%5Cn%20font-family%3A%20monospace%3B%20%5Cn%5Cn%20%7D%5Cn%5Cn%20tr%20%7B%5Cn%5Cn%20background-image%3A%20linear-gradient(to%20right%2C%20darkgrey%2030%25%2C%20rgba(255%2C255%2C255%2C0)%200%25)%3B%5Cn%20background-position%3A%20bottom%3B%5Cn%20background-size%3A%203px%201px%3B%5Cn%20background-repeat%3A%20repeat-x%3B%5Cn%20%7D%5Cn%5Cn%20tr%3Aafter%20%7B%5Cn%20content%3A%20%5C'%20%5C'%3B%5Cn%20display%3A%20block%3B%5Cn%20visibility%3A%20hidden%3B%5Cn%20clear%3A%20both%3B%5Cn%20border-bottom%3A%201px%20solid%20%23ccc%3B%5Cn%5Cn%20%7D%5Cn%5Cn%20%23titleinfo%20%7B%5Cn%20color%3A%20%23fffff0%3B%5Cn%20font-weight%3A%20bolder%3B%5Cn%20font-style%3A%20normal%3B%5Cn%20font-family%3A%20Roboto%3B%5Cn%20font-size%3A%20150%25%3B%5Cn%20margin-left%3A%2055px%3B%5Cn%20margin-top%3A%208px%3B%5Cn%20flex-shrink%3A%201%3B%5Cn%20width%3A%20800px%3B%5Cn%20white-space%3A%20nowrap%3B%5Cn%20overflow%3A%20hidden%3B%5Cn%20text-overflow%3A%20ellipsis%3B%5Cn%20display%3A%20inline-block%3B%5Cn%20%7D%5Cn%5Cn%5Cn%20thead%20th%20%7B%5Cn%20height%3A%2030px%3B%5Cn%20%2F*text-align%3A%20left%3B*%2F%5Cn%20%7D%5Cn%5Cn%5Cn%20thead%20%7B%5Cn%20%2F*%20fallback%20*%2F%5Cn%20%7D%5Cn%5Cn%20tbody%20td%2C%5Cn%20thead%20th%20%7B%5Cn%20width%3A%2033%25%3B%5Cn%20float%3A%20left%3B%5Cn%20%7D%5Cn%5Cn%20tr%3Ahover%20%7B%5Cn%20color%3A%20darkgrey%3B%5Cn%20%7D%5Cn%5Cn%5Cn%20%3C%2Fstyle%3E%5Cn%20%3Chead%3E%3Cbody%3E%5Cn%20%3Cdiv%20id%3D%22navbar%22%3E%5Cn%20%3Ca%20href%3D%22TITLELINK%22%3E%3Cimg%20id%3D%22logonetflix%22%20width%3D%22auto%22%20height%3D%2232%22%20src%3D%22https%3A%2F%2Fupload.wikimedia.org%2Fwikipedia%2Fcommons%2F0%2F08%2FNetflix_2015_logo.svg%22%20title%3D%22Backup%20made%20on%20TITLEDATE%22%3E%3C%2Fa%3E%5Cn%20%3Cspan%20id%3D%22titleinfo%22%20title%3D%22TITLEINFO%22%3ETITLEINFO%20(TITLEDATE)%3C%2Fspan%3E%20%3Cbutton%20type%3D%22button%22%20id%3D%22the-button%22%20class%3D%22btn%20btn-raised%22%20style%3D%22background-color%3A%20darkgreen%3B%20color%3A%20white%3B%20opacity%3A%200.3%3B%20position%3A%20relative%3B%20top%3A%20-18px%3B%20left%3A%20105px%3B%22%20onclick%3D%22loadScript(%5C'https%3A%2F%2Fkatzurki.github.io%2Fnettufurikusu%2Fdiff.js%5C')%22%3EDIFF%20ENGINE%20OFF%3C%2Fbutton%3E%3C%2Fdiv%3E%5Cn%20%3Ctable%3E%5Cn%20%3Cthead%3E%5Cn%20%3Ctr%3E%5Cn%20%3Cth%3E%3Cb%3E%3Cu%3EIn-cue%2FOut-cue%3C%2Fb%3E%3C%2Fu%3E%3C%2Fth%3E%5Cn%20%3Cth%3E%3Cb%3E%3Cu%3ESource%3C%2Fb%3E%3C%2Fu%3E%3C%2Fth%3E%5Cn%20%3Cth%3E%3Cb%3E%3Cu%3ETranslation%3C%2Fb%3E%3C%2Fu%3E%3C%2Fth%3E%5Cn%20%3C%2Ftr%3E%5Cn%20%3C%2Fthead%3E%5Cn%20%3Ctbody%3E%5Cn%20'%2Co%3DlocalStorage%5B%22clq%3Aorigination%3A%22%2Be%5D%3Bif(!o)throw%20alert(%22Timed%20text%20events%20not%20found%20in%20localStorage%5Cnfor%20CLQ%3A%20%22%2Be%2B'%5CnIf%20the%20CLQ%20is%20correct%20and%5Cn%22Save%20to%20local%20storage%22%20is%20enabled%20in%20Settings%2C%5Cnsave%20the%20task%20and%20try%20again.')%2Cnew%20Error%3Bvar%20a%3DJSON.parse(o)%2Cr%3Da.events%2Cs%3Da.meta.fps%2Cl%3Ds.split(%22_%22)%5B1%5D%2F100%2Cc%3Dprompt(%22Press%20Enter%20to%20accept%20framerate%20of%20%22%2Bl%2B%22%20or%20enter%20new%20as%202400%20or%202997%3A%22)%3Bif(%22%22!%3D%3Dc)%7Bvar%20d%3Dc.substring(0%2C2)%2Cp%3Dc.substring(2%2Cc.length)%3Bs%3D%22FPS_%22%2Bd%2Bp%2Cl%3D1*(d%2B%22.%22%2Bp)%7Dvar%20u%3Da.meta.movieId%2Cf%3Da.meta.packageId%3Bif(%22%22%3D%3Dprompt(%22Press%20Enter%20to%20try%20the%20template.%20Enter%20anything%20to%20go%20for%20CC.%22))var%20m%3D%22https%3A%2F%2Foriginator.backlot.netflix.com%2Fapi%2Frequest%2FtimedText%2F%22%2Be%2B%22%2F%22%2Bf%2B%22%2F%22%2Bu%2B%22%2Fen%2FTEMPLATE%2FPRIMARY%2F%22%2Bs%2B%22%3Fsource%3DORIGINATOR%22%3Belse%20m%3D%22https%3A%2F%2Foriginator.backlot.netflix.com%2Fapi%2Frequest%2FtimedText%2F%22%2Be%2B%22%2F%22%2Bf%2B%22%2F%22%2Bu%2B%22%2Fen%2FCC%2FPRIMARY%2F%22%2Bs%2B%22%3Fsource%3DARCHIVE%22%3Bb(s%2B%22_TRANSLATION%22)%2Cb(s%2B%22_SOURCE%22)%3Bvar%20g%3Db(s%2B%22_BILINGUAL_TABLE%22).replace(%22.srt%22%2C%22.html%22)%2Ch%3D1e3%2Fl%3Bfunction%20b(t%3D%22%22)%7Bvar%20n%3D(document.getElementsByClassName(%22cpe-page-menu-label%22)%5B0%5D.innerText.replace(%2F%5B%20%5D%2Fg%2C%22_%22).replace(%2F%5B%5Ea-z0-9_%5D%2Fgi%2C%22%22)%2Bt%2B%22.srt%22).trim()%3Breturn%20n%7C%7C(n%3De%2B%22_%22%2Bt%2B%22.srt%22)%2Cn%7Dfunction%20v(e)%7Bvar%20t%3DMath.round(e*h)%3Breturn%20function(e)%7Blet%20t%3De.hours.toString()%3B1%3D%3D%3Dt.length%26%26(t%3D%220%22%2Bt)%3Blet%20n%3De.minutes.toString()%3B1%3D%3D%3Dn.length%26%26(n%3D%220%22%2Bn)%3Blet%20o%3De.seconds.toString()%3B1%3D%3D%3Do.length%26%26(o%3D%220%22%2Bo)%3Blet%20a%3De.milliseconds.toString()%3Breturn%201%3D%3D%3Da.length%26%26(a%3D%2200%22%2Ba)%2C2%3D%3D%3Da.length%26%26(a%3D%220%22%2Ba)%2Ct%2B%22%3A%22%2Bn%2B%22%3A%22%2Bo%2B%22%2C%22%2Ba%7D(function(e)%7Blet%20t%3De%2Cn%3DMath.floor(t%2F36e5)%3Bt%25%3D36e5%3Blet%20o%3DMath.floor(t%2F6e4)%3Bt%25%3D6e4%3Blet%20a%3DMath.floor(t%2F1e3)%3Breturn%7Bhours%3An%2Cminutes%3Ao%2Cseconds%3Aa%2Cmilliseconds%3At%25%3D1e3%7D%7D(t))%7Dfunction%20y(e%2Ct)%7Bfor(var%20n%20of(position_offset%3D0%2Ct))%7Bvar%20o%3Dn.from%2Bposition_offset%3Bposition_offset%2B%3D3%2Ce%3D%5Be.slice(0%2Co)%2C%22%3Ci%3E%22%2Ce.slice(o)%5D.join(%22%22)%3Bvar%20a%3Dn.to%2Bposition_offset%3Bposition_offset%2B%3D4%2Ce%3D%5Be.slice(0%2Ca)%2C%22%3C%2Fi%3E%22%2Ce.slice(a)%5D.join(%22%22)%7Dreturn%20e%7D!async%20function()%7Bvar%20e%3Dawait%20async%20function()%7Breturn%20await(await%20fetch(m)).json()%7D()%3B!function(e%2Ct%2Cn%3D%22plain%22)%7Bvar%20o%3Ddocument.createElement(%22a%22)%3Bo.setAttribute(%22href%22%2C%22data%3Atext%2F%22%2Bn%2B%22%3Bcharset%3Dutf-8%2C%25EF%25BB%25BF%22%2BencodeURIComponent(t))%2Co.setAttribute(%22download%22%2Ce)%2Co.style.display%3D%22none%22%2Cdocument.body.appendChild(o)%2Co.click()%2Cdocument.body.removeChild(o)%7D(g%2Cfunction(e%2Ct)%7Bvar%20o%3D%5B%5D%2Ca%3D%22SRC%22%3Bfor(var%20r%20in%20e)%7Be%5Br%5D.column%3Da%3Btry%7Bvar%20s%3De%5Br%5D.type%3B%22fn%22%3D%3D%3Ds%26%26(e%5Br%5D.txt%2B%3D%22%3Cb%3E%3C%2Fb%3E%22%2Cs%3Dvoid%200)%7Dcatch(e)%7B%7Do.push(%5Be%5Br%5D.start%2Ce%5Br%5D.end%2Ce%5Br%5D.txt%2Ce%5Br%5D.styles%2Ce%5Br%5D.rgn%2Ce%5Br%5D.column%5D)%7Dvar%20a%3D%22TRG%22%3Bfor(var%20r%20in%20t)t%5Br%5D.column%3Da%2Co.push(%5Bt%5Br%5D.start%2Ct%5Br%5D.end%2Ct%5Br%5D.txt%2Ct%5Br%5D.styles%2Ct%5Br%5D.rgn%2Ct%5Br%5D.column%5D)%3Bo.sort(function(e%2Ct)%7Breturn%20e%5B0%5D-t%5B0%5D%7D)%2Co%3Dfunction(e)%7Bvar%20t%3D%5B%5D%2Cn%3D!1%3Bfor(i%3D0%3Bi%3Ce.length-1%3Bi%2B%2B)n%3Fn%3D!1%3A(thisEvent%3De%5Bi%5D%2CnextEvent%3De%5Bi%2B1%5D%2CthisEvent%5B5%5D%3D%3DnextEvent%5B5%5D%26%26(n%3D!0%2CthisEvent%5B2%5D%3DthisEvent%5B2%5D%2B%22%5Cn%22%2BnextEvent%5B2%5D%2CthisEvent%5B1%5D%3DnextEvent%5B1%5D)%2Ct.push(thisEvent))%3Breturn%20t%7D(o)%3Bvar%20l%3Dn%2Cc%3D%22%22%3Bfor(event%20of%20o)%7Bvar%20d%3Dv(event%5B0%5D)%2Cp%3Dv(event%5B1%5D)%2Cu%3Dd%2B%22%5Cn%22%2Bp%3Btry%7Bvoid%200!%3D%3Devent%5B3%5D%5B0%5D.type%26%26%22italic%22%3D%3Devent%5B3%5D%5B0%5D.type%26%26(content%3Dy(content%2Cevent%5B3%5D))%7Dcatch(e)%7B%7D%22SRC%22%3D%3Devent%5B5%5D%3Fc%2B%3Devent%5B2%5D%3A(tr%3D%22%3Ctr%3E%3Ctd%3E%3Cpre%3E%22%2Bu%2B%22%3C%2Fpre%3E%3C%2Ftd%3E%3Ctd%3E%3Cpre%3E%22%2Bc%2B%22%3C%2Fpre%3E%3C%2Ftd%3E%3Ctd%3E%3Cpre%3E%22%2Bevent%5B2%5D%2B%22%3C%2Fpre%3E%3C%2Ftd%3E%3C%2Ftr%3E%5Cn%22%2Cl%2B%3Dtr%2Ctr%3D%22%22%2Cc%3D%22%22)%7Dvar%20f%3Ddocument.getElementsByClassName(%22cpe-page-menu-label%22)%5B0%5D.innerText.replace(%2F%20%22%2F%2C%22%20%E2%80%9C%22).replace(%2F%22%2F%2C%22%E2%80%9D%22)%2Cm%3Ddocument.location.href%2Cg%3D(new%20Date).toISOString().slice(0%2C10)%3Breturn%20l%3Dl.replace(%2FTITLEINFO%2Fg%2Cf).replace(%2FTITLELINK%2F%2Cm).replace(%2FTITLEDATE%2Fg%2Cg)%7D(e%2Cr)%2C%22html%22)%7D()%7D()%7Dfunction%20imarunettuImportBetterSrt()%7Balert(%22DISABLED%20FOR%20NOW.%5CnPossible%20fixes%3A%20Send%20everybody%20to%20Github%3F%5CnStore%20and%20open%20in%20any%20report%3F%5CnCompletely%20replace%20current%20window%3F%20hmm.%22)%7Dfunction%20imarunettuAuxFade(e%2Ct%2Cn%2Co%3D!1)%7Bvar%20a%3D%22in%22%3D%3D%3De%2Cr%3Da%3F0%3A1%2Ci%3D50%2Ft%3Ba%26%26(n.style.display%3D%22inline%22%2Cn.style.opacity%3Dr)%3Bvar%20s%3Dwindow.setInterval(function()%7Br%3Da%3Fr%2Bi%3Ar-i%2Cn.style.opacity%3Dr%2Cr%3C%3D0%26%26(o%3Fn.remove()%3An.style.display%3D%22none%22)%2C(r%3C%3D0%7C%7Cr%3E%3D1)%26%26window.clearInterval(s)%7D%2C50)%7Dfunction%20imarunettuCleanup()%7Bdocument.querySelector(%22div.popup%22)%3Bvar%20e%3Ddocument.getElementsByClassName(%22item-button%22)%2Ct%3De%5Be.length-1%5D%3Bfor(byeButton%20of%20document.getElementsByClassName(%22mnfkbtn%22))imarunettuAuxFade(%22out%22%2C100%2CbyeButton%2C!0)%3Bt.removeEventListener(%22click%22%2CimarunettuClickDropdown%2C%7Bpassive%3A!1%2Ccapture%3A!0%7D)%7Dfunction%20imarunettuAddButtonsToMenu(btnid%2Cdisabled%3D%22%22)%7Bvar%20gonnaBeLast%3D!1%3Bif(void%200%3D%3D%3Dbtnid)for(btnid%20in%20gonnaBeLast%3D!0%2CimarunettuButtons)imarunettuAddButtonsToMenu(btnid)%3Bif(!gonnaBeLast%26%26!document.getElementById(btnid))%7Bvar%20btntext%3DimarunettuButtons%5Bbtnid%5D%2Cmenu%3Ddocument.querySelector(%22div.popup%22)%2Cbutton%3Ddocument.createElement(%22button%22)%3Bbutton.className%3D%22icon-button%20mnfkbtn%22%2Bdisabled%2Cbutton.id%3Dbtnid%2Cbutton.setAttribute(%22title%22%2Cbtntext)%2Cbutton.innerHTML%3D'%3Ci%20class%3D%22bhicons%22%3E%3C%2Fi%3E'%3Bvar%20span%3Ddocument.createElement(%22span%22)%3Bspan.className%3D%22label%22%2C%22imarunettuRunAutoQC%22%3D%3Dbtnid%26%26(btntext%3Dbtntext%2B%22%20for%20%22%2Bwindow.imarunettuLang)%2Cspan.innerText%3Dbtntext%2Cbutton.onclick%3Dfunction(event)%7Bif(%22imarunettuCleanup%22%3D%3Dbtnid)event.stopImmediatePropagation()%2CimarunettuCleanup()%3Belse%7Bvar%20funktion%3Dbtnid%2B%22()%3B%22%3Beval(btnid%2B%22()%3B%22)%7D%7D%2Cbutton.append(span)%2Cmenu.append(button)%7D%7Dfunction%20imarunettuGetLang()%7Bif(!window.imarunettuLang)%7Bvar%20e%3Ddocument.getElementsByClassName(%22cpe-page-menu-label%22)%5B0%5D.innerText%2Ct%3D(e%3De.split(%22%2C%22))%5Be.length-2%5D.trim().toUpperCase()%3Bwindow.imarunettuLang%3Dt%7Dreturn%20window.imarunettuLang%7DimarunettuPopulateDropdown()%7D()%3B%7D)()">imaruÂ·nettu</a></center><br>from here to the Bookmark Bar in Chrome.
<strong>Click</strong> the bookmarklet <strong>once</strong> in an open Originator task, then check out the More Actions menu. It should be populated with new entries for extra features. Using them should be self-explanatory with pop-ups where it needs information or issues a warning; of course, feel free to send me questions, concerns, and bug reports. Also beer.</p>

<p>All changes â€œmadeâ€ to the Originator are local and will not persist; they will be gone as soon as you refresh or quit the page. All tools provided here can work offline. My code contains no trackers and keeps no usage logs. The latest production version unminified source code is found below and is functionally identical to the minified-code link above, but the latest up-to-date code is always found in the <a href="https://chrome.google.com/webstore/detail/originator-autoqc-etc/fmdlmdfceiaaljfpdkbpfhoppcklkopo">Originator AutoQC</a> Chrome extension.</p>

<p>I do not recommend using Import SRT unless you know the limitations and dangers of importing SRT as raw Originator data. Please contact me (<a href="mailto:katzurki@gnail.com">Dan</a>) if you have questions.</p>

<p>This is an <strong>early beta release</strong>, which means there may be annoying bugs.</p>

<h1 id="disclaimer">Disclaimer</h1>
<p>This GPLv3-released tool contains no trackers, keeps no usage statistics, and does not need an Internet connection to work.
There is no warranty and no guarantee of result. Technical support is provided on a limited basis. Donations are welcome but not required or requested.
No liability will be accepted for potential consequences of using the tool. It is tacitly understood that any data, files, and other information obtained in the process is by its nature confidential and may not be shared. The sky is blue, the grass is green, 11 is more than 7, and also animals never had a war; who's the real animal? Let common sense and the general spirit of GPLv3 prevail for the good of all.</p>

<h1 id="source-code">Source Code</h1>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">menu</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">div.popup</span><span class="dl">"</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">itemButtons</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="dl">"</span><span class="s2">item-button</span><span class="dl">"</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">dropdown</span> <span class="o">=</span> <span class="nx">itemButtons</span><span class="p">[</span><span class="nx">itemButtons</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span>
   <span class="mi">1</span><span class="p">]</span> <span class="c1">//this should always yield the More Actions dropdown trigger</span>
<span class="c1">//the property is the function name; the value is the button text</span>
<span class="c1">//Object.entries()[Object.keys().length-1] is the last button</span>
<span class="kd">var</span> <span class="nx">imarunettuButtons</span> <span class="o">=</span> <span class="p">{</span>
   <span class="dl">"</span><span class="s2">imarunettuCleanup</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Restore Default View</span><span class="dl">"</span><span class="p">,</span>
   <span class="dl">"</span><span class="s2">imarunettuExportMP4</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Export Video as .MP4</span><span class="dl">"</span><span class="p">,</span>
   <span class="dl">"</span><span class="s2">imarunettuDoubleExportSRT</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Export Source/Target .SRT</span><span class="dl">"</span><span class="p">,</span>
   <span class="dl">"</span><span class="s2">imarunettuBilingualExportHTML</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Export Bilingual .HTML</span><span class="dl">"</span><span class="p">,</span>
   <span class="dl">"</span><span class="s2">imarunettuImportBetterSrt</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Advanced Import SRT</span><span class="dl">"</span><span class="p">,</span>
   <span class="dl">"</span><span class="s2">imarunettuRunAutoQC</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Run AutoQC</span><span class="dl">"</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">clq</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2">:</span><span class="dl">"</span><span class="p">)[</span><span class="mi">3</span><span class="p">]</span>
<span class="c1">//imarunettu may only work in Originator, so clq is always there</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">localStorage</span><span class="p">[</span><span class="dl">"</span><span class="s2">lang:</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">clq</span><span class="p">])</span>
<span class="p">{</span>
   <span class="kd">var</span> <span class="nx">LANG</span> <span class="o">=</span> <span class="nx">imarunettuGetLang</span><span class="p">()</span>
<span class="p">}</span>
<span class="c1">//there are 3 ways to get language: from meta (best), from title, from previously saved to window.imarunettuLang</span>
<span class="c1">//incidentally, since a window.attr does not survive reload, its presence this early indicates the bookmarklet</span>
<span class="c1">//has been run once already. So let's not risk it. </span>
<span class="kd">var</span> <span class="nx">imarunettuClickDropdown</span> <span class="o">=</span> <span class="dl">''</span>
<span class="c1">//placing it here in scope to pass a reference to the eventListener when removing it</span>
<span class="nx">imarunettuPopulateDropdown</span><span class="p">()</span>

<span class="kd">function</span> <span class="nx">imarunettuPopulateDropdown</span><span class="p">()</span>
<span class="p">{</span>
   <span class="kd">var</span> <span class="nx">itemButtons</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="dl">"</span><span class="s2">item-button</span><span class="dl">"</span><span class="p">)</span>
   <span class="kd">var</span> <span class="nx">dropdown</span> <span class="o">=</span> <span class="nx">itemButtons</span><span class="p">[</span><span class="nx">itemButtons</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span>
      <span class="mi">1</span><span class="p">]</span> <span class="c1">//this should always yield the More Actions dropdown trigger</span>
   <span class="nx">imarunettuClickDropdown</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span>
   <span class="p">{</span>
      <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">imarunettuAddButtonsToMenu</span><span class="p">,</span>
         <span class="mi">30</span><span class="p">)</span> <span class="c1">//it takes about 5ms for div.popup to initialize</span>
   <span class="p">}</span>
   <span class="nx">dropdown</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="nx">imarunettuClickDropdown</span><span class="p">,</span>
   <span class="p">{</span>
      <span class="na">passive</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="na">capture</span><span class="p">:</span> <span class="kc">true</span>
   <span class="p">})</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">deferAddButtonUntil</span><span class="p">(</span><span class="nx">condition</span><span class="p">,</span> <span class="nx">argument</span><span class="p">)</span>
<span class="p">{</span> <span class="c1">//fortunately I hope never to need this anymore ever again</span>
   <span class="k">if</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="nx">condition</span><span class="p">))</span>
   <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Condition: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">condition</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> evalued TRUE after </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">firedon</span> <span class="o">+</span>
         <span class="dl">"</span><span class="s2">ms</span><span class="dl">"</span><span class="p">);</span>
      <span class="nx">firedon</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">imarunettuAddButtonToMenu</span><span class="p">(</span><span class="nx">argument</span><span class="p">)</span>
   <span class="p">}</span>
   <span class="k">else</span>
   <span class="p">{</span>
      <span class="nx">firedon</span><span class="o">++</span><span class="p">;</span>
      <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span>
      <span class="p">{</span>
         <span class="nx">deferAddButtonUntil</span><span class="p">(</span><span class="nx">condition</span><span class="p">,</span> <span class="nx">argument</span><span class="p">)</span>
      <span class="p">},</span> <span class="mi">1</span><span class="p">);</span>
   <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">imarunettuExportMP4</span><span class="p">()</span>
<span class="p">{</span>
   <span class="p">(</span><span class="kd">function</span> <span class="p">()</span>
   <span class="p">{</span>
      <span class="kd">function</span> <span class="nx">download</span><span class="p">(</span><span class="nx">videolink</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">);</span>
         <span class="nx">element</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">href</span><span class="dl">'</span><span class="p">,</span> <span class="nx">videolink</span><span class="p">);</span>
         <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">none</span><span class="dl">'</span><span class="p">;</span>
         <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
         <span class="nx">element</span><span class="p">.</span><span class="nx">click</span><span class="p">();</span>
         <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">videolink</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="dl">"</span><span class="s2">video-holder</span><span class="dl">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
         <span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">src</span><span class="dl">"</span><span class="p">)</span>
      <span class="nx">download</span><span class="p">(</span><span class="nx">videolink</span><span class="p">)</span>
   <span class="p">})()</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">imarunettuRunAutoQC</span><span class="p">(</span><span class="nx">language</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">imarunettuLang</span><span class="p">)</span>
<span class="p">{</span>
   <span class="c1">//here the scopes get REALLY interesting</span>
   <span class="p">(</span><span class="kd">function</span> <span class="p">()</span>
   <span class="p">{</span>
      <span class="nx">language</span> <span class="p">?</span> <span class="p">(</span><span class="nx">LANG</span> <span class="o">=</span> <span class="nx">language</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="nx">LANG</span> <span class="o">=</span> <span class="nx">imarunettuGetLang</span><span class="p">());</span>
      <span class="kd">var</span> <span class="nx">outOfTheBox</span>
      <span class="kd">var</span> <span class="nx">qcMeta</span> <span class="o">=</span> <span class="p">{}</span>
      <span class="nx">qcMeta</span><span class="p">.</span><span class="nx">lang</span> <span class="o">=</span> <span class="nx">LANG</span>
      <span class="k">if</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="dl">"</span><span class="s2">originator.backlot.netflix.com</span><span class="dl">"</span><span class="p">))</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">our_clq</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2">:</span><span class="dl">"</span><span class="p">)[</span><span class="mi">3</span><span class="p">]</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">our_clq</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="nx">qcMeta</span><span class="p">.</span><span class="nx">clq</span> <span class="o">=</span> <span class="nx">our_clq</span>
         <span class="p">}</span>
         <span class="nx">outOfTheBox</span> <span class="o">=</span> <span class="kc">false</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">DEBUG: state: inTheBox</span><span class="se">\n</span><span class="s2">our_clq: from location </span><span class="dl">"</span> <span class="o">+</span>
            <span class="nx">our_clq</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">Window</span><span class="p">.</span><span class="nx">autoQC_safe_meta</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">qcSavedMeta</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">Window</span><span class="p">.</span><span class="nx">autoQC_safe_meta</span><span class="p">)</span>
         <span class="kd">var</span> <span class="nx">our_clq</span> <span class="o">=</span> <span class="nx">qcSavedMeta</span><span class="p">.</span><span class="nx">clq</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
            <span class="dl">"</span><span class="s2">DEBUG: state: outOfTheBox</span><span class="se">\n</span><span class="s2">our_clq: from qcSavedMeta </span><span class="dl">"</span> <span class="o">+</span>
            <span class="nx">our_clq</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">innerText</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">includes</span><span class="p">(</span><span class="dl">"</span><span class="s2"> --&gt; </span><span class="dl">"</span><span class="p">))</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">our_clq</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">innerText</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="p">)</span>
         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">DEBUG: state: in SRT file</span><span class="se">\n</span><span class="s2">our_clq: split object </span><span class="dl">"</span> <span class="o">+</span> <span class="p">(</span>
            <span class="k">typeof</span> <span class="nx">our_clq</span><span class="p">))</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">setShotChanges</span><span class="p">()</span>
      <span class="p">{</span>
         <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">our_clq</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">object</span><span class="dl">"</span> <span class="o">&amp;&amp;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span>
               <span class="dl">"</span><span class="s2">originator.backlot.netflix.com</span><span class="dl">"</span><span class="p">))</span>
         <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">getJSON</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
               <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span> <span class="nx">url</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
               <span class="nx">xhr</span><span class="p">.</span><span class="nx">responseType</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">json</span><span class="dl">'</span><span class="p">;</span>
               <span class="nx">xhr</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">status</span> <span class="o">=</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span><span class="p">;</span>
                  <span class="k">if</span><span class="p">(</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">200</span><span class="p">)</span>
                  <span class="p">{</span>
                     <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">response</span><span class="p">);</span>
                  <span class="p">}</span>
                  <span class="k">else</span>
                  <span class="p">{</span>
                     <span class="nx">callback</span><span class="p">(</span><span class="nx">status</span><span class="p">,</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">response</span><span class="p">);</span>
                  <span class="p">}</span>
               <span class="p">};</span>
               <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">"</span><span class="s2">shotChanges:</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">our_clq</span><span class="p">))</span>
            <span class="p">{</span>
               <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">outOfTheBox</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">getJSON</span><span class="p">(</span>
                     <span class="dl">"</span><span class="s2">https://originator.backlot.netflix.com/api/request/shotchanges/clq:origination:</span><span class="dl">"</span> <span class="o">+</span>
                     <span class="nx">our_clq</span><span class="p">,</span>
                     <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
                     <span class="p">{</span>
                        <span class="k">if</span><span class="p">(</span><span class="nx">err</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span>
                        <span class="p">{</span>
                           <span class="nx">alert</span><span class="p">(</span><span class="dl">'</span><span class="s1">Something went wrong with error status: </span><span class="dl">'</span> <span class="o">+</span>
                              <span class="nx">err</span> <span class="o">+</span>
                              <span class="dl">'</span><span class="se">\n</span><span class="s1">If it</span><span class="se">\'</span><span class="s1">s 500-something, please reload the page and try again.</span><span class="dl">'</span>
                              <span class="p">);</span>
                        <span class="p">}</span>
                        <span class="k">else</span>
                        <span class="p">{</span>
                           <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">"</span><span class="s2">shotChanges:</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">our_clq</span><span class="p">,</span>
                              <span class="nx">data</span><span class="p">[</span><span class="dl">"</span><span class="s2">frameNumbers</span><span class="dl">"</span><span class="p">])</span>
                           <span class="nx">qcMeta</span><span class="p">.</span><span class="nx">SC</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="dl">"</span><span class="s2">frameNumbers</span><span class="dl">"</span><span class="p">]</span>
                           <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">DEBUG: Shot changes for </span><span class="dl">"</span> <span class="o">+</span>
                              <span class="nx">our_clq</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> saved in localStorage</span><span class="dl">"</span><span class="p">)</span>
                        <span class="p">}</span>
                     <span class="p">})</span>
               <span class="p">}</span>
               <span class="k">else</span>
               <span class="p">{</span>
                  <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">"</span><span class="s2">shotChanges:</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">qcSavedMeta</span><span class="p">.</span><span class="nx">clq</span><span class="p">,</span>
                     <span class="nx">qcSavedMeta</span><span class="p">.</span><span class="nx">SC</span><span class="p">)</span>
               <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
               <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">DEBUG: Shot changes for </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">our_clq</span> <span class="o">+</span>
                  <span class="dl">"</span><span class="s2"> already present in localStorage</span><span class="dl">"</span><span class="p">)</span>
               <span class="nx">qcMeta</span><span class="p">.</span><span class="nx">SC</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">"</span><span class="s2">shotChanges:</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">our_clq</span><span class="p">)</span>
            <span class="p">}</span>
         <span class="p">}</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">defer</span><span class="p">(</span><span class="nx">method</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">"</span><span class="s2">shotChanges:</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">our_clq</span><span class="p">)</span> <span class="o">||</span>
            <span class="k">typeof</span> <span class="nx">our_clq</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">object</span><span class="dl">"</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span>
            <span class="p">{</span>
               <span class="nx">runAutoQC</span><span class="p">(</span><span class="nx">our_clq</span><span class="p">);</span>
            <span class="p">},</span> <span class="mi">2400</span><span class="p">);</span>
         <span class="p">}</span>
         <span class="k">else</span>
         <span class="p">{</span>
            <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span>
            <span class="p">{</span>
               <span class="nx">defer</span><span class="p">(</span><span class="nx">runAutoQC</span><span class="p">)</span>
            <span class="p">},</span> <span class="mi">350</span><span class="p">);</span>
         <span class="p">}</span>
      <span class="p">}</span>
      <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nb">global</span><span class="p">,</span> <span class="nx">factory</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="k">typeof</span> <span class="nx">exports</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">module</span> <span class="o">!==</span> <span class="dl">'</span><span class="s1">undefined</span><span class="dl">'</span> <span class="p">?</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">factory</span><span class="p">()</span> <span class="p">:</span> <span class="k">typeof</span> <span class="nx">define</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">function</span><span class="dl">'</span> <span class="o">&amp;&amp;</span>
            <span class="nx">define</span><span class="p">.</span><span class="nx">amd</span> <span class="p">?</span> <span class="nx">define</span><span class="p">(</span><span class="nx">factory</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">runAutoQC</span> <span class="o">=</span> <span class="nx">factory</span><span class="p">());</span>
      <span class="p">}(</span><span class="k">this</span><span class="p">,</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span>
      <span class="p">{</span>
         <span class="dl">'</span><span class="s1">use strict</span><span class="dl">'</span><span class="p">;</span>

         <span class="kd">function</span> <span class="nx">uid</span><span class="p">()</span>
         <span class="p">{</span>
            <span class="k">return</span> <span class="p">([</span><span class="mi">1</span><span class="nx">e7</span><span class="p">]</span> <span class="o">+</span> <span class="o">-</span><span class="mi">1</span><span class="nx">e3</span> <span class="o">+</span> <span class="o">-</span><span class="mi">4</span><span class="nx">e3</span> <span class="o">+</span> <span class="o">-</span><span class="mi">8</span><span class="nx">e3</span> <span class="o">+</span> <span class="o">-</span><span class="mi">1</span><span class="nx">e11</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span>
               <span class="sr">/</span><span class="se">[</span><span class="sr">018</span><span class="se">]</span><span class="sr">/g</span><span class="p">,</span> <span class="nx">c</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="nx">c</span> <span class="o">^</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">getRandomValues</span><span class="p">(</span>
                  <span class="k">new</span> <span class="nb">Uint8Array</span><span class="p">(</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mi">15</span> <span class="o">&gt;&gt;</span> <span class="nx">c</span> <span class="o">/</span> <span class="mi">4</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span>
                  <span class="mi">16</span><span class="p">))</span>
         <span class="p">}</span>

         <span class="kd">function</span> <span class="nx">runAutoQC</span><span class="p">()</span>
         <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">clq_pattern</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span>
               <span class="dl">'</span><span class="s1">^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$</span><span class="dl">'</span><span class="p">,</span>
               <span class="dl">'</span><span class="s1">i</span><span class="dl">'</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">our_clq</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">object</span><span class="dl">"</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="nx">our_clq</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!==</span>
                  <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">clq_pattern</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">?</span>
                  <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">:</span> <span class="dl">''</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">LANG</span> <span class="o">=</span> <span class="nx">LANG</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">DEBUG: Starting AutoQC with LANG: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">LANG</span><span class="p">)</span>
            <span class="kd">var</span> <span class="nx">line_limit</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="kd">var</span> <span class="nx">max_cps</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="kd">var</span> <span class="nx">normal_cps</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">switch</span> <span class="p">(</span><span class="nx">LANG</span><span class="p">)</span>
            <span class="p">{</span>
            <span class="k">case</span> <span class="dl">"</span><span class="s2">AR</span><span class="dl">"</span><span class="p">:</span>
               <span class="nx">line_limit</span> <span class="o">=</span> <span class="mi">42</span>
               <span class="nx">normal_cps</span> <span class="o">=</span> <span class="mi">20</span>
               <span class="nx">max_cps</span> <span class="o">=</span> <span class="mi">26</span>
               <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="dl">"</span><span class="s2">CN</span><span class="dl">"</span><span class="p">:</span>
               <span class="nx">line_limit</span> <span class="o">=</span> <span class="mi">16</span>
               <span class="nx">normal_cps</span> <span class="o">=</span> <span class="mi">9</span>
               <span class="nx">max_cps</span> <span class="o">=</span> <span class="mf">11.7</span>
               <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="dl">"</span><span class="s2">RU</span><span class="dl">"</span><span class="p">:</span>
               <span class="nx">line_limit</span> <span class="o">=</span> <span class="mi">39</span>
               <span class="nx">normal_cps</span> <span class="o">=</span> <span class="mi">17</span>
               <span class="nx">max_cps</span> <span class="o">=</span> <span class="mf">22.1</span>
               <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="dl">"</span><span class="s2">DE</span><span class="dl">"</span><span class="p">:</span>
            <span class="k">case</span> <span class="dl">"</span><span class="s2">MS</span><span class="dl">"</span><span class="p">:</span>
            <span class="k">case</span> <span class="dl">"</span><span class="s2">GR</span><span class="dl">"</span><span class="p">:</span>
            <span class="k">case</span> <span class="dl">"</span><span class="s2">FR</span><span class="dl">"</span><span class="p">:</span>
            <span class="k">case</span> <span class="dl">"</span><span class="s2">PT</span><span class="dl">"</span><span class="p">:</span>
            <span class="k">case</span> <span class="dl">"</span><span class="s2">EN</span><span class="dl">"</span><span class="p">:</span>
            <span class="na">default</span><span class="p">:</span>
               <span class="nx">line_limit</span> <span class="o">=</span> <span class="mi">42</span>
               <span class="nx">normal_cps</span> <span class="o">=</span> <span class="mi">17</span>
               <span class="nx">max_cps</span> <span class="o">=</span> <span class="mf">22.1</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">our_clq</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">object</span><span class="dl">"</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">our_clq</span> <span class="o">||</span> <span class="o">!</span><span class="nx">clq_pattern</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">our_clq</span><span class="p">))</span>
               <span class="p">{</span>
                  <span class="nx">alert</span><span class="p">(</span>
                     <span class="dl">"</span><span class="s2">You must be in a started, saved Originator task!</span><span class="dl">"</span><span class="p">);</span>
                  <span class="k">return</span> <span class="kc">null</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">clq_pattern</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">our_clq</span><span class="p">))</span>
               <span class="p">{</span>
                  <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">The CLQ is invalid: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">our_clq</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span>
                     <span class="dl">"</span><span class="s2">Please report me to the developer.</span><span class="dl">"</span><span class="p">);</span>
                  <span class="k">return</span> <span class="kc">null</span>
               <span class="p">}</span>
            <span class="p">}</span>
            <span class="kd">var</span> <span class="nx">shotChanges</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">"</span><span class="s2">shotChanges:</span><span class="dl">"</span> <span class="o">+</span>
               <span class="nx">our_clq</span><span class="p">)</span>
            <span class="k">try</span>
            <span class="p">{</span>
               <span class="nx">shotChanges</span> <span class="o">=</span> <span class="nx">shotChanges</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2">,</span><span class="dl">"</span><span class="p">);</span>
               <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">DEBUG: Shot changes validated.</span><span class="dl">"</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">shotChanges</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
               <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
                  <span class="dl">"</span><span class="s2">DEBUG: No shot changes found, which is ok if our_clq is object: </span><span class="dl">"</span> <span class="o">+</span>
                  <span class="p">(</span><span class="k">typeof</span> <span class="nx">our_clq</span><span class="p">))</span>
            <span class="p">}</span>
            <span class="kd">var</span> <span class="nx">hasSafeBox</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span>
               <span class="dl">"</span><span class="s2">marketing-border</span><span class="dl">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="p">?</span> <span class="kc">true</span> <span class="p">:</span> <span class="kc">false</span>
            <span class="k">try</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">userIp</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span>
                  <span class="dl">"</span><span class="s2">Watermark</span><span class="dl">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">innerHTML</span><span class="p">;</span>
               <span class="kd">var</span> <span class="nx">userName</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span>
                  <span class="dl">"</span><span class="s2">username</span><span class="dl">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">textContent</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">userIp</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">LOCAL ITERATION</span><span class="dl">"</span>
            <span class="p">}</span>
            <span class="kd">var</span> <span class="nx">reportHtml</span> <span class="o">=</span>
               <span class="s2">`&lt;head&gt;&lt;meta charset="utf-8"&gt;
                        &lt;script&gt;
                        Window.autoQC_safe_meta = METADATATOKEN
                        &lt;/script&gt;
            &lt;script&gt;var prevScrollpos = window.pageYOffset;
            window.onscroll = function() {
              var currentScrollPos = window.pageYOffset;
              if (prevScrollpos &gt; currentScrollPos) {
                document.getElementById("navbar").style.top = "0";
              } else {
                document.getElementById("navbar").style.top = "-50px";
              }
              prevScrollpos = currentScrollPos;
            }&lt;/script&gt;
                            &lt;script&gt;var z=function(q) {
                var s=document.getElementsByClassName(q);
                for(x of s) {
                    x.className===q ? (x.className=q+" of0"): (x.setAttribute("class", q))
                }
            }

            ;
            &lt;/script&gt;&lt;style&gt;body {
                background-color: #212121
            }

            #navbar {
              background-color: #333;
              position: fixed; 
              top: 0; 
              width: 100%;
              transition: top 0.5s;

            }

            #navbar a {
              float: left;
              display: block;
              color: white;
              text-align: center;
              padding: 5px;
              text-decoration: none;
            }

            #navbar a:hover {
              background-color: #ddd;
              color: black;
            }

            #background{
                position:fixed;
                z-index:-999;
                background:#212121;
                display:block
                height:100vh; 
                width:100vh;
                color:grey; 
            }

            .bg-text
            {
                font-family: Netflix-Sans;
                pointer-events: none;
                color:lightgrey;
                text-align: center;
                opacity: 0.06;
                font-size:80px;
                transform:rotate(320deg);
                -webkit-transform:rotate(320deg);
                position: relative;
                overflow: visible;
                user-select: none;
                -webkit-user-select: none;
                -khtml-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
            }

            .of0 {
                visibility: hidden;
                color: #000!important;
            }

            .username {
               float:left;
            }

            .ipAddress {
               float:right; 
            }

            .cSpace {
                color: #00fa00;
                visibility: visible;
            }

            .StyledTextEditor {
                font-family: Netflix-Sans;
                line-height: 1.3;
                margin: 2px;
                white-space: nowrap;
                overflow: hidden;
                font-variant-ligatures: none;
                position: relative;
                pointer-events: none
            }

            .StyledTextEditor .ltr {
                unicode-bidi: embed;
                direction: ltr
            }

            .TimedTextEvent {
                font-family: Netflix-Sans;
                font-size: 1.3rem;
                font-weight: 400;
                line-height: 2rem;
                margin-top: .5rem;
                display: -webkit-box;
                display: -moz-box;
                display: -webkit-flex;
                display: -ms-flexbox;
                display: box;
                display: flex;
                -webkit-box-orient: vertical;
                -moz-box-orient: vertical;
                -o-box-orient: vertical;
                -webkit-flex-direction: column;
                -ms-flex-direction: column;
                flex-direction: column;
                border: 1px solid transparent;
                -webkit-transition: height 250ms ease, border 150ms ease;
                -moz-transition: height 250ms ease, border 150ms ease;
                -o-transition: height 250ms ease, border 150ms ease;
                -ms-transition: height 250ms ease, border 150ms ease;
                transition: height 250ms ease, border 150ms ease
            }

            .TimedTextEvent .details {
                padding-top: .5rem;
                padding-left: 1rem;
                padding-right: 1rem;
                display: -webkit-box;
                display: -moz-box;
                display: -webkit-flex;
                display: -ms-flexbox;
                display: box;
                display: flex;
                -webkit-box-orient: horizontal;
                -moz-box-orient: horizontal;
                -o-box-orient: horizontal;
                -webkit-flex-direction: row;
                -ms-flex-direction: row;
                flex-direction: row
            }

            .TimedTextEvent .details .timing {
                -webkit-flex-shrink: 0;
                flex-shrink: 0;
                display: -webkit-box;
                display: -moz-box;
                display: -webkit-flex;
                display: -ms-flexbox;
                display: box;
                display: flex;
                -webkit-box-orient: vertical;
                -moz-box-orient: vertical;
                -o-box-orient: vertical;
                -webkit-flex-direction: column;
                -ms-flex-direction: column;
                flex-direction: column;
                width: 8rem
            }

            #titleinfo {
            color: #fffff0;
            font-weight: bolder;
            font-style: normal;
            font-family: Roboto, Netflix-Sans;
            font-size: 150%;
            margin-left: 30px;
            margin-right: 20px;
            position: relative; top: 7px; left: -5px;
            width: 580px;
            flex-shrink: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: inline-block;
            }



            .issue {
                font-size: 16;
                vertical-align: middle;
                font-family: Netflix-Sans;
                position: relative;
                top: -1px
            }

            .TimedTextEvent .details .timing .TimeCode {
                color: rgba(255, 255, 255, .54);
                padding: 0 .5rem;
                border-radius: 1rem;
                white-space: nowrap
            }

            .TimedTextEvent .details .content {
                -webkit-box-flex: 1;
                -moz-box-flex: 1;
                -o-box-flex: 1;
                -ms-box-flex: 1;
                box-flex: 1;
                -webkit-flex-grow: 1;
                flex-grow: 1;
                display: -webkit-box;
                display: -moz-box;
                display: -webkit-flex;
                display: -ms-flexbox;
                display: box;
                display: flex;
                -webkit-box-orient: vertical;
                -moz-box-orient: vertical;
                -o-box-orient: vertical;
                -webkit-flex-direction: column;
                -ms-flex-direction: column;
                flex-direction: column;
                padding-left: 2rem;
                padding-bottom: .5rem;
                width: 24rem
            }

            .TimedTextEvent .details .content .header {
                display: -webkit-box;
                display: -moz-box;
                display: -webkit-flex;
                display: -ms-flexbox;
                display: box;
                display: flex;
                -webkit-box-orient: horizontal;
                -moz-box-orient: horizontal;
                -o-box-orient: horizontal;
                -webkit-flex-direction: row;
                -ms-flex-direction: row;
                flex-direction: row
            }

            .TimedTextEvent .details .content .header .index {
                color: rgba(255, 255, 255, .66)
            }

            .TimedTextEvent .details .content .header .duration {
                color: rgba(255, 255, 255, .54);
                margin-left: auto;
                border-radius: 1rem
            }

            .TimedTextEvent .details .content .StyledTextEditor {
                color: rgba(255, 255, 255, .87);
                min-height: 3.2rem;
                margin-top: .3rem
            }

            img {
                display: table-cell;
                vertical-align: middle
            }

            #logonetflix {
                margin-left: 12px;
            }

            .TimedTextEvent .footer {
                height: .5rem;
                border-bottom: 2px solid rgba(0, 0, 0, .77);
                margin-left: 1rem;
                margin-right: 1rem
            }

            .outline {
                color: #000;
                position: relative;
                left: 350%;
            }

            button {
                background-color: black;
                color: #39ff1a;
                opacity: 0.5;
            }

            i {
                font-style: italic!important;
                font-family: serif!important
            }

            #feedback {
                height: 0;
                width: 65px;
                position: fixed;
                right: 0;
                top: 50%;
                z-index: 1000;
                transform: rotate(-90deg);
                -webkit-transform: rotate(-90deg);
                -moz-transform: rotate(-90deg);
                -o-transform: rotate(-90deg)
            }

            #feedback a {
                display: block;
                background: #06c;
                height: 15px;
                width: 165px;
                padding: 8px 16px;
                color: #fff;
                font-family: Arial, sans-serif;
                font-size: 17px;
                font-weight: 700;
                text-decoration: none;
                border-bottom: solid 1px #333;
                border-left: solid 1px #333;
                border-right: solid 1px #fff
            }

            #feedback a:hover {
                background: #ccc
            }

            &lt;/style&gt;&lt;body style="width:70%;height:100%"&gt;
            &lt;div id="navbar"&gt;
              &lt;a href="https://partnerhelp.netflixstudios.com/hc/en-us/articles/215758617-Timed-Text-Style-Guide-General-Requirements"&gt;&lt;img id="logonetflix" width="auto" height="32" src="https://upload.wikimedia.org/wikipedia/commons/0/08/Netflix_2015_logo.svg" title="Netflix TTSG Quality Compliance Initiative"&gt;&lt;/a&gt;
              &lt;span id="titleinfo" title="TITLEINFOTOKEN"&gt;TITLEINFOTOKEN&lt;/span&gt;
            &lt;/div&gt;
            &lt;div id="background"&gt;
            &lt;p class="bg-text" style="top: 0px; left: 100px;"&gt;WATERMARKPLACEHOLDER&lt;br&gt;NETFLIX CONFIDENTIAL&lt;/p&gt;
            &lt;p class="bg-text" style="top: -100px; left: 540px;"&gt;NETFLIX CONFIDENTIAL&lt;br&gt;WATERMARKPLACEHOLDER&lt;/p&gt;
                &lt;/div&gt;

                &lt;div id="stick" style="position:relative;left:750px;"&gt;&lt;button type="button" class="f" onclick="alert(Window.autoQC_safe_meta)"&gt;ğŸ›ˆ&lt;/button&gt;&lt;button type="button" class="f" onclick="z(\'cSpace\')" title="Highlight whitespace"&gt;ğŸŸ©&lt;/button&gt;&lt;button title="Display minor issues" type="button" class="f" onclick="z(\'minor_issue\') "&gt;âš ï¸&lt;/button&gt;&lt;button title="Display major issues" type="button" class="f" onclick="z(\'major_issue\')"&gt;ğŸš«&lt;/button&gt;&lt;button title="Shot-change suggestions" type="button" onclick="z(\'shot_change_issue\') "&gt;ğŸ&lt;/button&gt;DLFIXSRTTOKEN&lt;span style="position: relative; top: 3px; left: 165px; font-family: monospace; color: #fdfdf2; opacity: 0.33;"&gt;Linguist: LINGUISTNAME&lt;/div&gt;`</span>
            <span class="k">if</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span>
                  <span class="dl">"</span><span class="s2">originator.backlot.netflix.com</span><span class="dl">"</span><span class="p">))</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">lsJson</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">[</span><span class="dl">"</span><span class="s2">clq:origination:</span><span class="dl">"</span> <span class="o">+</span>
                  <span class="nx">our_clq</span><span class="p">]</span>
               <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">lsJson</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Timed text events not found in localStorage</span><span class="se">\n</span><span class="s2">for CLQ: </span><span class="dl">"</span> <span class="o">+</span>
                     <span class="nx">our_clq</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span>
                     <span class="dl">"</span><span class="s2">If the CLQ is correct and</span><span class="dl">"</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span>
                     <span class="dl">"</span><span class="se">\"</span><span class="s2">Save to local storage</span><span class="se">\"</span><span class="s2"> is enabled in Settings,</span><span class="dl">"</span> <span class="o">+</span>
                     <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">save the task and try again.</span><span class="dl">"</span><span class="p">);</span>
                  <span class="k">return</span> <span class="kc">null</span>
               <span class="p">}</span>
               <span class="kd">var</span> <span class="nx">json_obj</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">lsJson</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">src</span> <span class="o">=</span> <span class="nx">json_obj</span><span class="p">[</span><span class="dl">"</span><span class="s2">events</span><span class="dl">"</span><span class="p">]</span>
               <span class="kd">var</span> <span class="nx">fps_</span> <span class="o">=</span> <span class="nx">json_obj</span><span class="p">[</span><span class="dl">"</span><span class="s2">meta</span><span class="dl">"</span><span class="p">][</span><span class="dl">"</span><span class="s2">fps</span><span class="dl">"</span><span class="p">];</span>
               <span class="kd">var</span> <span class="nx">fps</span> <span class="o">=</span> <span class="nx">fps_</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2">_</span><span class="dl">"</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">100</span>
               <span class="nx">qcMeta</span><span class="p">.</span><span class="nx">fps</span> <span class="o">=</span> <span class="nx">fps</span>
               <span class="nx">qcMeta</span><span class="p">.</span><span class="nx">fps_</span> <span class="o">=</span> <span class="nx">fps_</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">outOfTheBox</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">fps</span> <span class="o">=</span> <span class="nx">qcSavedMeta</span><span class="p">.</span><span class="nx">fps</span>
               <span class="kd">var</span> <span class="nx">fps_</span> <span class="o">=</span> <span class="nx">qcSavedMeta</span><span class="p">.</span><span class="nx">fps_</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">our_clq</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">object</span><span class="dl">"</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">srt_fps</span> <span class="o">=</span> <span class="nx">prompt</span><span class="p">(</span>
                  <span class="dl">"</span><span class="s2">What FPS does this SRT file likely have?</span><span class="se">\n</span><span class="s2">2397, 2398, 2400, 2500, 2997 are the most likely</span><span class="dl">"</span>
                  <span class="p">)</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">srt_fps</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">fps</span> <span class="o">=</span> <span class="mf">24.00</span><span class="p">;</span>
                  <span class="kd">var</span> <span class="nx">fps_</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">FPS_2400</span><span class="dl">"</span>
               <span class="p">}</span>
               <span class="k">else</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">fps_</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">FPS_</span><span class="dl">"</span> <span class="o">+</span> <span class="p">(</span><span class="nx">srt_fps</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">[^\d]</span><span class="sr">/g</span><span class="p">,</span> <span class="dl">""</span><span class="p">)</span>
                     <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">(</span><span class="sr">^....</span><span class="se">)(</span><span class="sr">.+$</span><span class="se">)</span><span class="sr">/</span><span class="p">,</span> <span class="dl">"</span><span class="s2">$1</span><span class="dl">"</span><span class="p">))</span>
                  <span class="kd">var</span> <span class="nx">fps</span> <span class="o">=</span> <span class="nx">fps_</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2">_</span><span class="dl">"</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">100</span>
               <span class="p">}</span>
               <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Continuing with </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">fps_</span> <span class="o">+</span>
                  <span class="dl">"</span><span class="s2"> and real fps set to </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">fps</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="kd">var</span> <span class="nx">majTotal</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="kd">var</span> <span class="nx">minTotal</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="kd">var</span> <span class="nx">scTotal</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="kd">var</span> <span class="nx">evTotal</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="kd">var</span> <span class="nx">afTotal</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">our_clq</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">object</span><span class="dl">"</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">proposed_fps</span> <span class="o">=</span> <span class="nx">prompt</span><span class="p">(</span><span class="dl">"</span><span class="s2">Framerate set to: </span><span class="dl">"</span> <span class="o">+</span>
                  <span class="nx">fps</span> <span class="o">+</span>
                  <span class="dl">"</span><span class="s2"> fps.</span><span class="se">\n</span><span class="s2">Enter custom FPS or press Enter to keep current</span><span class="dl">"</span>
                  <span class="p">);</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">proposed_fps</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">int_fps</span> <span class="o">=</span> <span class="nx">proposed_fps</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
                  <span class="kd">var</span> <span class="nx">decimal_fps</span> <span class="o">=</span> <span class="nx">proposed_fps</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span>
                     <span class="nx">proposed_fps</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
                  <span class="nx">fps_</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">FPS</span><span class="dl">"</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">_</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">int_fps</span> <span class="o">+</span> <span class="nx">decimal_fps</span>
                  <span class="nx">fps</span> <span class="o">=</span> <span class="p">(</span><span class="nx">int_fps</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">.</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">decimal_fps</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1</span><span class="p">;</span>
                  <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Continuing with </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">fps_</span> <span class="o">+</span>
                     <span class="dl">"</span><span class="s2"> and real fps set to </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">fps</span><span class="p">);</span>
               <span class="p">}</span>
            <span class="p">}</span>
            <span class="kd">var</span> <span class="nx">frms</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">/</span> <span class="nx">fps</span>
            <span class="k">if</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span>
                  <span class="dl">"</span><span class="s2">originator.backlot.netflix.com</span><span class="dl">"</span><span class="p">))</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">titleInfo</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span>
                  <span class="dl">"</span><span class="s2">cpe-page-menu-label</span><span class="dl">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">innerText</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span>
                  <span class="sr">/ "/g</span><span class="p">,</span> <span class="dl">'</span><span class="s1"> â€œ</span><span class="dl">'</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/"/g</span><span class="p">,</span> <span class="dl">"</span><span class="s2">â€</span><span class="dl">"</span><span class="p">)</span>
               <span class="nx">qcMeta</span><span class="p">.</span><span class="nx">titleinfo</span> <span class="o">=</span> <span class="nx">titleInfo</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">our_clq</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">object</span><span class="dl">"</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">titleInfo</span> <span class="o">=</span> <span class="nx">qcSavedMeta</span><span class="p">.</span><span class="nx">titleinfo</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">titleInfo</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span>
                  <span class="sr">/</span><span class="se">(</span><span class="sr">.+</span><span class="se">?)([^/]</span><span class="sr">+$</span><span class="se">)</span><span class="sr">/g</span><span class="p">,</span> <span class="dl">"</span><span class="s2">$2</span><span class="dl">"</span><span class="p">)</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">srtName</span><span class="p">(</span><span class="nx">suffix</span> <span class="o">=</span> <span class="dl">""</span><span class="p">,</span> <span class="nx">extension</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">.srt</span><span class="dl">"</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nx">titleInfo</span>
               <span class="kd">var</span> <span class="nx">srtName</span> <span class="o">=</span> <span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">[</span><span class="sr"> </span><span class="se">]</span><span class="sr">/g</span><span class="p">,</span> <span class="dl">'</span><span class="s1">_</span><span class="dl">'</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span>
                        <span class="sr">/</span><span class="se">[^</span><span class="sr">a-z0-9_</span><span class="se">]</span><span class="sr">/gi</span><span class="p">,</span> <span class="dl">''</span><span class="p">)</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">_</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">suffix</span> <span class="o">+</span>
                     <span class="nx">extension</span>
                     <span class="p">)</span> <span class="c1">//This gets rid of all punctuation, spaces and non-English letters</span>
                  <span class="p">.</span><span class="nx">trim</span><span class="p">()</span> <span class="c1">//resulting in a name like 14545_El_Burrito_A_Breaking_Fat_Movie_FPS_2500.srt</span>
               <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">srtName</span><span class="p">)</span> <span class="nx">srtName</span> <span class="o">=</span> <span class="nx">our_clq</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">_</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">suffix</span> <span class="o">+</span>
                  <span class="nx">extension</span>
               <span class="k">return</span> <span class="nx">srtName</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">frames2tcf</span><span class="p">(</span><span class="nx">framenumber</span><span class="p">,</span> <span class="nx">framerate</span> <span class="o">=</span> <span class="nx">fps</span><span class="p">)</span>
            <span class="p">{</span> <span class="c1">//frames to 00:01:02:24 format</span>
               <span class="kd">var</span> <span class="nx">seconds_float</span> <span class="o">=</span> <span class="nx">framenumber</span> <span class="o">/</span> <span class="nx">framerate</span>
               <span class="kd">var</span> <span class="nx">seconds_int</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">seconds_float</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">seconds_frac</span> <span class="o">=</span> <span class="nx">seconds_float</span> <span class="o">-</span> <span class="nx">seconds_int</span>
               <span class="kd">var</span> <span class="nx">frames</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">seconds_frac</span> <span class="o">*</span> <span class="nx">framerate</span><span class="p">)</span> <span class="o">+</span>
                  <span class="dl">''</span>
               <span class="kd">var</span> <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
               <span class="nx">date</span><span class="p">.</span><span class="nx">setSeconds</span><span class="p">(</span><span class="nx">seconds_int</span><span class="p">);</span>
               <span class="k">try</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">timeString</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">toISOString</span><span class="p">().</span><span class="nx">substr</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
                  <span class="k">if</span><span class="p">(</span><span class="nx">frames</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">frames</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">frames</span>
                  <span class="kd">var</span> <span class="nx">timecodef</span> <span class="o">=</span> <span class="nx">timeString</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">:</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">frames</span>
               <span class="p">}</span>
               <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">timecodef</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ERROR</span><span class="dl">'</span>
               <span class="p">}</span>
               <span class="k">return</span> <span class="nx">timecodef</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">frames2timecode</span><span class="p">(</span><span class="nx">frames</span><span class="p">)</span>
            <span class="p">{</span> <span class="c1">//frames to 00:01:02,000 format</span>
               <span class="kd">var</span> <span class="nx">milliseconds</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">frames</span> <span class="o">*</span> <span class="nx">frms</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">srt_timecode</span> <span class="o">=</span> <span class="nx">TimeConversion</span><span class="p">(</span><span class="nx">milliseconds</span><span class="p">)</span>
               <span class="k">return</span> <span class="nx">srt_timecode</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">array2srt</span><span class="p">(</span><span class="nx">events_object</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">ordered_events</span> <span class="o">=</span> <span class="p">[]</span>
               <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">id</span> <span class="k">in</span> <span class="nx">events_object</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="k">try</span>
                  <span class="p">{</span>
                     <span class="kd">var</span> <span class="nx">type_fn</span> <span class="o">=</span> <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">]</span>
                     <span class="k">if</span><span class="p">(</span><span class="nx">type_fn</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">fn</span><span class="dl">"</span><span class="p">)</span>
                     <span class="p">{</span>
                        <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">txt</span><span class="dl">"</span><span class="p">]</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">&lt;b&gt;&lt;/b&gt;</span><span class="dl">"</span><span class="p">;</span>
                     <span class="p">}</span>
                  <span class="p">}</span>
                  <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span>
                  <span class="p">{}</span>
                  <span class="nx">ordered_events</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span>
                     <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
                     <span class="p">[</span><span class="dl">"</span><span class="s2">start</span><span class="dl">"</span><span class="p">],</span>
                     <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
                     <span class="p">[</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">],</span>
                     <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
                     <span class="p">[</span><span class="dl">"</span><span class="s2">txt</span><span class="dl">"</span><span class="p">],</span>
                     <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
                     <span class="p">[</span><span class="dl">"</span><span class="s2">styles</span><span class="dl">"</span><span class="p">],</span>
                     <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
                     <span class="p">[</span><span class="dl">"</span><span class="s2">rgn</span><span class="dl">"</span><span class="p">]</span>
                  <span class="p">])</span>
               <span class="p">}</span>
               <span class="nx">ordered_events</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="k">return</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
               <span class="p">});</span> <span class="c1">//Array sorted by in_cues, sequentially</span>
               <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span>
               <span class="kd">var</span> <span class="nx">srt_txt</span> <span class="o">=</span> <span class="dl">''</span>
               <span class="k">for</span><span class="p">(</span><span class="nx">event</span> <span class="k">of</span> <span class="nx">ordered_events</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">index</span><span class="o">++</span>
                  <span class="kd">var</span> <span class="nx">start</span> <span class="o">=</span> <span class="nx">frames2timecode</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                  <span class="kd">var</span> <span class="nx">end</span> <span class="o">=</span> <span class="nx">frames2timecode</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                  <span class="kd">var</span> <span class="nx">content</span> <span class="o">=</span> <span class="nx">event</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                  <span class="k">try</span>
                  <span class="p">{</span>
                     <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">event</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                        <span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">]</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span><span class="p">)</span>
                     <span class="p">{</span>
                        <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                           <span class="p">[</span><span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">italic</span><span class="dl">"</span><span class="p">)</span>
                        <span class="p">{</span>
                           <span class="nx">content</span> <span class="o">=</span> <span class="nx">italicize</span><span class="p">(</span><span class="nx">content</span><span class="p">,</span> <span class="nx">event</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
                        <span class="p">}</span>
                     <span class="p">}</span>
                  <span class="p">}</span>
                  <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span>
                  <span class="p">{}</span>
                  <span class="k">try</span>
                  <span class="p">{</span>
                     <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">event</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span><span class="p">)</span>
                     <span class="p">{</span>
                        <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">top</span><span class="dl">"</span><span class="p">)</span>
                        <span class="p">{</span>
                           <span class="nx">content</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">{</span><span class="se">\\</span><span class="s2">an8}</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">content</span>
                        <span class="p">}</span>
                     <span class="p">}</span>
                  <span class="p">}</span>
                  <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span>
                  <span class="p">{}</span>
                  <span class="k">try</span>
                  <span class="p">{</span>
                     <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">fn</span><span class="dl">"</span><span class="p">)</span>
                     <span class="p">{</span>
                        <span class="nx">content</span> <span class="o">+=</span> <span class="dl">'</span><span class="s1">&lt;b&gt;&lt;/b&gt;</span><span class="dl">'</span>
                     <span class="p">}</span>
                  <span class="p">}</span>
                  <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span>
                  <span class="p">{}</span>
                  <span class="c1">//                      console.log(content)</span>
                  <span class="kd">var</span> <span class="nx">current_event</span> <span class="o">=</span> <span class="nx">index</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">start</span> <span class="o">+</span>
                     <span class="dl">"</span><span class="s2"> --&gt; </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">end</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">content</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span>
                  <span class="nx">srt_txt</span> <span class="o">+=</span> <span class="nx">current_event</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span>
               <span class="p">}</span>
               <span class="k">return</span> <span class="nx">srt_txt</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">parsed2srt</span><span class="p">(</span><span class="nx">parsedSRT</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">nbspRegex</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="mi">160</span><span class="p">),</span>
                  <span class="dl">"</span><span class="s2">gi</span><span class="dl">"</span><span class="p">);</span>
               <span class="kd">var</span> <span class="nx">srt_txt</span> <span class="o">=</span> <span class="dl">''</span>
               <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">event</span> <span class="k">of</span> <span class="nx">parsedSRT</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">cleanTxt</span> <span class="o">=</span> <span class="nx">event</span><span class="p">[</span><span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span><span class="nx">nbspRegex</span><span class="p">,</span>
                     <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">).</span><span class="nx">trim</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">[</span><span class="sr"> </span><span class="se">][</span><span class="sr"> </span><span class="se">]</span><span class="sr">/gi</span><span class="p">,</span> <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">)</span>
                  <span class="k">if</span><span class="p">(</span><span class="nx">cleanTxt</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span>
                  <span class="p">{</span>
                     <span class="nx">cleanTxt</span> <span class="o">=</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span>
                  <span class="p">}</span>
                  <span class="kd">let</span> <span class="nx">text_event</span> <span class="o">=</span> <span class="nx">event</span><span class="p">[</span><span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">]</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">event</span><span class="p">[</span>
                        <span class="dl">"</span><span class="s2">start</span><span class="dl">"</span><span class="p">]</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> --&gt; </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">event</span><span class="p">[</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">]</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span>
                     <span class="nx">cleanTxt</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n\n</span><span class="dl">"</span>
                  <span class="nx">srt_txt</span> <span class="o">+=</span> <span class="nx">text_event</span>
               <span class="p">}</span>
               <span class="k">return</span> <span class="nx">srt_txt</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">italicize</span><span class="p">(</span><span class="nx">content</span><span class="p">,</span> <span class="nx">italics_array</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">position_offset</span> <span class="o">=</span> <span class="mi">0</span>
               <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">italic</span> <span class="k">of</span> <span class="nx">italics_array</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">position_from</span> <span class="o">=</span> <span class="nx">italic</span><span class="p">[</span><span class="dl">"</span><span class="s2">from</span><span class="dl">"</span><span class="p">]</span> <span class="o">+</span>
                     <span class="nx">position_offset</span><span class="p">;</span>
                  <span class="nx">position_offset</span> <span class="o">+=</span> <span class="mi">3</span>
                  <span class="nx">content</span> <span class="o">=</span> <span class="p">[</span><span class="nx">content</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">position_from</span><span class="p">),</span> <span class="dl">"</span><span class="s2">&lt;i&gt;</span><span class="dl">"</span><span class="p">,</span>
                     <span class="nx">content</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">position_from</span><span class="p">)</span>
                  <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">)</span>
                  <span class="kd">var</span> <span class="nx">position_to</span> <span class="o">=</span> <span class="nx">italic</span><span class="p">[</span><span class="dl">"</span><span class="s2">to</span><span class="dl">"</span><span class="p">]</span> <span class="o">+</span> <span class="nx">position_offset</span><span class="p">;</span>
                  <span class="nx">position_offset</span> <span class="o">+=</span> <span class="mi">4</span>
                  <span class="nx">content</span> <span class="o">=</span> <span class="p">[</span><span class="nx">content</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">position_to</span><span class="p">),</span> <span class="dl">"</span><span class="s2">&lt;/i&gt;</span><span class="dl">"</span><span class="p">,</span>
                     <span class="nx">content</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">position_to</span><span class="p">)</span>
                  <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">)</span>
               <span class="p">}</span>
               <span class="k">return</span> <span class="nx">content</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">download</span><span class="p">(</span><span class="nx">filename</span><span class="p">,</span> <span class="nx">text</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">);</span>
               <span class="nx">element</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">href</span><span class="dl">'</span><span class="p">,</span>
                  <span class="dl">'</span><span class="s1">data:text/plain;charset=utf-8,</span><span class="dl">'</span> <span class="o">+</span>
                  <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">text</span><span class="p">));</span>
               <span class="nx">element</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">download</span><span class="dl">'</span><span class="p">,</span> <span class="nx">filename</span><span class="p">);</span>
               <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">none</span><span class="dl">'</span><span class="p">;</span>
               <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
               <span class="nx">element</span><span class="p">.</span><span class="nx">click</span><span class="p">();</span>
               <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">TimeConversion</span><span class="p">(</span><span class="nx">duration</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="kd">let</span> <span class="nx">time</span> <span class="o">=</span> <span class="nx">parseDuration</span><span class="p">(</span><span class="nx">duration</span><span class="p">)</span>
               <span class="k">return</span> <span class="nx">formatTimeHMSS</span><span class="p">(</span><span class="nx">time</span><span class="p">)</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">parseDuration</span><span class="p">(</span><span class="nx">duration</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="kd">let</span> <span class="nx">remain</span> <span class="o">=</span> <span class="nx">duration</span>
               <span class="kd">let</span> <span class="nx">hours</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">remain</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">))</span>
               <span class="nx">remain</span> <span class="o">=</span> <span class="nx">remain</span> <span class="o">%</span> <span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
               <span class="kd">let</span> <span class="nx">minutes</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">remain</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span><span class="p">))</span>
               <span class="nx">remain</span> <span class="o">=</span> <span class="nx">remain</span> <span class="o">%</span> <span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
               <span class="kd">let</span> <span class="nx">seconds</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">remain</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1000</span><span class="p">))</span>
               <span class="nx">remain</span> <span class="o">=</span> <span class="nx">remain</span> <span class="o">%</span> <span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
               <span class="kd">let</span> <span class="nx">milliseconds</span> <span class="o">=</span> <span class="nx">remain</span>
               <span class="k">return</span> <span class="p">{</span>
                  <span class="nx">hours</span><span class="p">,</span>
                  <span class="nx">minutes</span><span class="p">,</span>
                  <span class="nx">seconds</span><span class="p">,</span>
                  <span class="nx">milliseconds</span>
               <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">formatTimeHMSS</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="kd">let</span> <span class="nx">hours</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">hours</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">hours</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">hours</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">hours</span>
               <span class="kd">let</span> <span class="nx">minutes</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">minutes</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">minutes</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">minutes</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">minutes</span>
               <span class="kd">let</span> <span class="nx">seconds</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">seconds</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">seconds</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">seconds</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">seconds</span>
               <span class="kd">let</span> <span class="nx">milliseconds</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">milliseconds</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">milliseconds</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">milliseconds</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">00</span><span class="dl">'</span> <span class="o">+</span>
                  <span class="nx">milliseconds</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">milliseconds</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)</span> <span class="nx">milliseconds</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span> <span class="o">+</span>
                  <span class="nx">milliseconds</span>
               <span class="k">return</span> <span class="nx">hours</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">:</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">minutes</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">:</span><span class="dl">"</span> <span class="o">+</span>
                  <span class="c1">//Example: 00:01:02,999 -- note that the SRT spec calls for a comma, not a period!</span>
                  <span class="nx">seconds</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">,</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">milliseconds</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">isBetween</span><span class="p">(</span><span class="nx">distance</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">left_lim</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
               <span class="kd">var</span> <span class="nx">right_lim</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">a</span> <span class="o">&gt;</span> <span class="nx">b</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">left_lim</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
                  <span class="nx">right_lim</span> <span class="o">=</span> <span class="nx">a</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">distance</span> <span class="o">&gt;=</span> <span class="nx">left_lim</span> <span class="o">&amp;&amp;</span> <span class="nx">distance</span> <span class="o">&lt;=</span> <span class="nx">right_lim</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="k">return</span> <span class="kc">true</span>
               <span class="p">}</span>
               <span class="k">return</span> <span class="kc">false</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">validateScE</span><span class="p">(</span><span class="nx">distance</span><span class="p">,</span> <span class="nx">framesE</span><span class="p">,</span> <span class="nx">sc</span><span class="p">,</span> <span class="nx">distance2</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">violation</span> <span class="o">=</span> <span class="kc">false</span>
               <span class="kd">var</span> <span class="nx">V</span> <span class="o">=</span> <span class="p">{}</span>
               <span class="kd">var</span> <span class="nx">css_cs1</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">&lt;span class="shot_change_issue"&gt;</span><span class="dl">'</span><span class="p">;</span>
               <span class="kd">var</span> <span class="nx">css_cs2</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">&lt;/span&gt;</span><span class="dl">'</span><span class="p">;</span>
               <span class="kd">var</span> <span class="nx">oldTcf</span> <span class="o">=</span> <span class="nx">frames2tcf</span><span class="p">(</span><span class="nx">framesE</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">scTcf</span> <span class="o">=</span> <span class="nx">frames2tcf</span><span class="p">(</span><span class="nx">sc</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">distanceNext</span> <span class="o">=</span> <span class="nx">distance2</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">isBetween</span><span class="p">(</span><span class="nx">distance</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">moveTo</span> <span class="o">=</span> <span class="mi">12</span> <span class="o">-</span> <span class="nx">distance</span>
                  <span class="kd">var</span> <span class="nx">newFramesE</span> <span class="o">=</span> <span class="nx">framesE</span> <span class="o">+</span> <span class="nx">moveTo</span>
                  <span class="kd">var</span> <span class="nx">newTcf</span> <span class="o">=</span> <span class="nx">frames2tcf</span><span class="p">(</span><span class="nx">newFramesE</span><span class="p">)</span>
                  <span class="kd">var</span> <span class="nx">intTo</span> <span class="o">=</span> <span class="p">(</span><span class="nx">moveTo</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">+</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="p">:</span> <span class="nx">moveTo</span><span class="p">;</span>
                  <span class="nx">moveTo</span> <span class="o">=</span> <span class="nx">moveToSigned</span><span class="p">(</span><span class="nx">moveTo</span><span class="p">)</span>
                  <span class="nx">violation</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ğŸ Move out-cue right </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1"> to +12 frames after shot change&lt;br&gt;&lt;font style="color: #7DFDFE; font-family: monospace"&gt;[OUT-CUE: </span><span class="dl">'</span> <span class="o">+</span>
                     <span class="nx">oldTcf</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">intTo</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> = </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">newTcf</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1">]&lt;/font&gt;</span><span class="dl">'</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">isBetween</span><span class="p">(</span><span class="nx">distance</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">moveTo</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span> <span class="o">-</span> <span class="nx">distance</span>
                  <span class="kd">var</span> <span class="nx">newFramesE</span> <span class="o">=</span> <span class="nx">framesE</span> <span class="o">+</span> <span class="nx">moveTo</span>
                  <span class="kd">var</span> <span class="nx">newTcf</span> <span class="o">=</span> <span class="nx">frames2tcf</span><span class="p">(</span><span class="nx">newFramesE</span><span class="p">)</span>
                  <span class="kd">var</span> <span class="nx">intTo</span> <span class="o">=</span> <span class="p">(</span><span class="nx">moveTo</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">+</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="p">:</span> <span class="nx">moveTo</span><span class="p">;</span>
                  <span class="nx">moveTo</span> <span class="o">=</span> <span class="nx">moveToSigned</span><span class="p">(</span><span class="nx">moveTo</span><span class="p">)</span>
                  <span class="nx">violation</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ğŸ Move out-cue left </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1"> to -2 frames before shot change&lt;br&gt;&lt;font style="color: #7DFDFE; font-family: monospace"&gt;[OUT-CUE: </span><span class="dl">'</span> <span class="o">+</span>
                     <span class="nx">oldTcf</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">intTo</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> = </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">newTcf</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1">]&lt;/font&gt;</span><span class="dl">'</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">isBetween</span><span class="p">(</span><span class="nx">distance</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">))</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">moveTo</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span> <span class="o">-</span> <span class="nx">distance</span>
                  <span class="kd">var</span> <span class="nx">newFramesE</span> <span class="o">=</span> <span class="nx">framesE</span> <span class="o">+</span> <span class="nx">moveTo</span>
                  <span class="kd">var</span> <span class="nx">newTcf</span> <span class="o">=</span> <span class="nx">frames2tcf</span><span class="p">(</span><span class="nx">newFramesE</span><span class="p">)</span>
                  <span class="kd">var</span> <span class="nx">intTo</span> <span class="o">=</span> <span class="p">(</span><span class="nx">moveTo</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">+</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="p">:</span> <span class="nx">moveTo</span><span class="p">;</span>
                  <span class="nx">moveTo</span> <span class="o">=</span> <span class="nx">moveToSigned</span><span class="p">(</span><span class="nx">moveTo</span><span class="p">)</span>
                  <span class="nx">violation</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ğŸ Move out-cue right </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1"> to -2 before shot change&lt;br&gt;&lt;font style="color: #7DFDFE; font-family: monospace"&gt;[OUT-CUE: </span><span class="dl">'</span> <span class="o">+</span>
                     <span class="nx">oldTcf</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">intTo</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> = </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">newTcf</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1">]&lt;/font&gt;</span><span class="dl">'</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">distanceNext</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="nx">distanceNext</span> <span class="o">&lt;</span> <span class="mi">12</span> <span class="o">&amp;&amp;</span>
                  <span class="nx">distanceNext</span> <span class="o">&lt;=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">distance</span><span class="p">)</span>
                  <span class="p">)</span> <span class="c1">//fixes nasty, nasty situation!</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">moveTo</span> <span class="o">=</span> <span class="nx">distanceNext</span> <span class="o">-</span> <span class="mi">2</span>
                  <span class="kd">var</span> <span class="nx">newFramesE</span> <span class="o">=</span> <span class="nx">framesE</span> <span class="o">+</span> <span class="nx">moveTo</span>
                  <span class="kd">var</span> <span class="nx">newTcf</span> <span class="o">=</span> <span class="nx">frames2tcf</span><span class="p">(</span><span class="nx">newFramesE</span><span class="p">)</span>
                  <span class="kd">var</span> <span class="nx">intTo</span> <span class="o">=</span> <span class="p">(</span><span class="nx">moveTo</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">+</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="p">:</span> <span class="nx">moveTo</span><span class="p">;</span>
                  <span class="nx">moveTo</span> <span class="o">=</span> <span class="nx">moveToSigned</span><span class="p">(</span><span class="nx">moveTo</span><span class="p">)</span>
                  <span class="nx">violation</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ğŸ Move out-cue right </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1"> to reduce frame gap from </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">distanceNext</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1"> to 2.&lt;br&gt;&lt;font style="color: #7DFDFE; font-family: monospace"&gt;[OUT-CUE: </span><span class="dl">'</span> <span class="o">+</span>
                     <span class="nx">oldTcf</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">intTo</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> = </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">newTcf</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1">]&lt;/font&gt;</span><span class="dl">'</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">cpsFixable</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">moveTo</span> <span class="o">=</span> <span class="nx">framesToFixCPS</span>
                  <span class="kd">var</span> <span class="nx">newFramesE</span> <span class="o">=</span> <span class="nx">framesE</span> <span class="o">+</span> <span class="nx">framesToFixCPS</span>
                  <span class="kd">var</span> <span class="nx">newTcf</span> <span class="o">=</span> <span class="nx">frames2tcf</span><span class="p">(</span><span class="nx">newFramesE</span><span class="p">)</span>
                  <span class="kd">var</span> <span class="nx">intTo</span> <span class="o">=</span> <span class="p">(</span><span class="nx">moveTo</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">+</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="p">:</span> <span class="nx">moveTo</span><span class="p">;</span>
                  <span class="nx">moveTo</span> <span class="o">=</span> <span class="nx">moveToSigned</span><span class="p">(</span><span class="nx">moveTo</span><span class="p">)</span>
                  <span class="nx">violation</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ğŸ“– Move out-cue right </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1"> to reduce CPS to 17.&lt;br&gt;&lt;font style="color: #7DDDFF; font-family: monospace"&gt;[OUT-CUE: </span><span class="dl">'</span> <span class="o">+</span>
                     <span class="nx">oldTcf</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">intTo</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> = </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">newTcf</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1">]&lt;/font&gt;</span><span class="dl">'</span>
                  <span class="nx">cpsFixable</span> <span class="o">=</span> <span class="kc">false</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">cpsAttemptable</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">moveTo</span> <span class="o">=</span> <span class="nx">framesToFixCPS</span>
                  <span class="kd">var</span> <span class="nx">newFramesE</span> <span class="o">=</span> <span class="nx">framesE</span> <span class="o">+</span> <span class="nx">framesToFixCPS</span>
                  <span class="kd">var</span> <span class="nx">newTcf</span> <span class="o">=</span> <span class="nx">frames2tcf</span><span class="p">(</span><span class="nx">newFramesE</span><span class="p">)</span>
                  <span class="kd">var</span> <span class="nx">intTo</span> <span class="o">=</span> <span class="p">(</span><span class="nx">moveTo</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">+</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="p">:</span> <span class="nx">moveTo</span><span class="p">;</span>
                  <span class="nx">moveTo</span> <span class="o">=</span> <span class="nx">moveToSigned</span><span class="p">(</span><span class="nx">moveTo</span><span class="p">)</span>
                  <span class="nx">cpsAttemptable</span> <span class="o">=</span> <span class="kc">false</span>
                  <span class="nx">violation</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ğŸ“– Move out-cue right </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1"> to reduce CPS to </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">bestWorstCPS</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1">.&lt;br&gt;&lt;font style="color: #7DDDFF; font-family: monospace"&gt;[OUT-CUE: </span><span class="dl">'</span> <span class="o">+</span>
                     <span class="nx">oldTcf</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">intTo</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> = </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">newTcf</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1">]&lt;/font&gt;</span><span class="dl">'</span>
                  <span class="nx">cpsAttemptable</span> <span class="o">=</span> <span class="kc">false</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">distanceNext</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">moveTo</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">distanceNext</span><span class="p">))</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                  <span class="kd">var</span> <span class="nx">newFramesE</span> <span class="o">=</span> <span class="nx">framesE</span> <span class="o">+</span> <span class="nx">moveTo</span>
                  <span class="kd">var</span> <span class="nx">newTcf</span> <span class="o">=</span> <span class="nx">frames2tcf</span><span class="p">(</span><span class="nx">newFramesE</span><span class="p">)</span>
                  <span class="kd">var</span> <span class="nx">intTo</span> <span class="o">=</span> <span class="p">(</span><span class="nx">moveTo</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">+</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="p">:</span> <span class="nx">moveTo</span><span class="p">;</span>
                  <span class="nx">moveTo</span> <span class="o">=</span> <span class="nx">moveToSigned</span><span class="p">(</span><span class="nx">moveTo</span><span class="p">)</span>
                  <span class="nx">violation</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ğŸ Move out-cue </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1"> to -2 before next subtitle event&lt;br&gt;&lt;font style="color: #7DFDFE; font-family: monospace"&gt;[OUT-CUE: </span><span class="dl">'</span> <span class="o">+</span>
                     <span class="nx">oldTcf</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">intTo</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> = </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">newTcf</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1">]&lt;/font&gt;</span><span class="dl">'</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">violation</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">scTotal</span><span class="o">++</span>
                  <span class="nx">afTotal</span><span class="o">++</span>
                  <span class="nx">V</span> <span class="o">=</span> <span class="p">{</span>
                     <span class="na">violation</span><span class="p">:</span> <span class="nx">css_cs1</span> <span class="o">+</span> <span class="nx">violation</span> <span class="o">+</span> <span class="nx">css_cs2</span><span class="p">,</span>
                     <span class="na">start</span><span class="p">:</span> <span class="kc">undefined</span><span class="p">,</span>
                     <span class="na">end</span><span class="p">:</span> <span class="nx">frames2timecode</span><span class="p">(</span><span class="nx">newFramesE</span><span class="p">)</span>
                  <span class="p">}</span>
                  <span class="k">return</span> <span class="nx">V</span><span class="p">;</span>
               <span class="p">}</span>
               <span class="k">return</span> <span class="kc">false</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">moveToSigned</span><span class="p">(</span><span class="nx">moveTo</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">frames</span> <span class="o">=</span> <span class="dl">"</span><span class="s2"> frames</span><span class="dl">"</span>
               <span class="k">if</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">moveTo</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">frames</span> <span class="o">=</span> <span class="dl">"</span><span class="s2"> frame</span><span class="dl">"</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">moveTo</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="k">return</span> <span class="nx">moveTo</span> <span class="o">+</span> <span class="nx">frames</span>
               <span class="p">}</span>
               <span class="k">else</span>
               <span class="p">{</span>
                  <span class="k">return</span> <span class="dl">'</span><span class="s1">+</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="o">+</span> <span class="nx">frames</span>
               <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">validateScS</span><span class="p">(</span><span class="nx">distance</span><span class="p">,</span> <span class="nx">framesE</span><span class="p">,</span> <span class="nx">sc</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">violation</span> <span class="o">=</span> <span class="kc">false</span>
               <span class="kd">var</span> <span class="nx">V</span> <span class="o">=</span> <span class="p">{}</span>
               <span class="kd">var</span> <span class="nx">css_cs1</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">&lt;span class="shot_change_issue"&gt;</span><span class="dl">'</span><span class="p">;</span>
               <span class="kd">var</span> <span class="nx">css_cs2</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">&lt;/span&gt;</span><span class="dl">'</span><span class="p">;</span>
               <span class="kd">var</span> <span class="nx">oldTcf</span> <span class="o">=</span> <span class="nx">frames2tcf</span><span class="p">(</span><span class="nx">framesE</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">scTcf</span> <span class="o">=</span> <span class="nx">frames2tcf</span><span class="p">(</span><span class="nx">sc</span><span class="p">)</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">isBetween</span><span class="p">(</span><span class="nx">distance</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">moveTo</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">-</span> <span class="nx">distance</span>
                  <span class="kd">var</span> <span class="nx">newFramesE</span> <span class="o">=</span> <span class="nx">framesE</span> <span class="o">+</span> <span class="nx">moveTo</span>
                  <span class="kd">var</span> <span class="nx">newTcf</span> <span class="o">=</span> <span class="nx">frames2tcf</span><span class="p">(</span><span class="nx">newFramesE</span><span class="p">)</span>
                  <span class="kd">var</span> <span class="nx">intTo</span> <span class="o">=</span> <span class="p">(</span><span class="nx">moveTo</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">+</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="p">:</span> <span class="nx">moveTo</span><span class="p">;</span>
                  <span class="nx">moveTo</span> <span class="o">=</span> <span class="nx">moveToSigned</span><span class="p">(</span><span class="nx">moveTo</span><span class="p">)</span>
                  <span class="nx">violation</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ğŸ Move in-cue left </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1"> to snap it to shot change&lt;br&gt;&lt;font style="color: #7FFFD4; font-family: monospace"&gt;[IN-CUE: </span><span class="dl">'</span> <span class="o">+</span>
                     <span class="nx">oldTcf</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">intTo</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> = </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">newTcf</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1">]&lt;/font&gt;</span><span class="dl">'</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">isBetween</span><span class="p">(</span><span class="nx">distance</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">moveTo</span> <span class="o">=</span> <span class="mi">1</span>
                  <span class="kd">var</span> <span class="nx">newFramesE</span> <span class="o">=</span> <span class="nx">framesE</span> <span class="o">+</span> <span class="nx">moveTo</span>
                  <span class="kd">var</span> <span class="nx">newTcf</span> <span class="o">=</span> <span class="nx">frames2tcf</span><span class="p">(</span><span class="nx">newFramesE</span><span class="p">)</span>
                  <span class="kd">var</span> <span class="nx">intTo</span> <span class="o">=</span> <span class="p">(</span><span class="nx">moveTo</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">+</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="p">:</span> <span class="nx">moveTo</span><span class="p">;</span>
                  <span class="nx">moveTo</span> <span class="o">=</span> <span class="nx">moveToSigned</span><span class="p">(</span><span class="nx">moveTo</span><span class="p">)</span>
                  <span class="nx">violation</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ğŸ Move in-cue right </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1"> to put 12 frames after shot change&lt;br&gt;&lt;font style="color: #7FFFD4; font-family: monospace"&gt;[IN-CUE: </span><span class="dl">'</span> <span class="o">+</span>
                     <span class="nx">oldTcf</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">intTo</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> = </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">newTcf</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1">]&lt;/font&gt;</span><span class="dl">'</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">isBetween</span><span class="p">(</span><span class="nx">distance</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">moveTo</span> <span class="o">=</span> <span class="mi">2</span>
                  <span class="kd">var</span> <span class="nx">newFramesE</span> <span class="o">=</span> <span class="nx">framesE</span> <span class="o">+</span> <span class="nx">moveTo</span>
                  <span class="kd">var</span> <span class="nx">newTcf</span> <span class="o">=</span> <span class="nx">frames2tcf</span><span class="p">(</span><span class="nx">newFramesE</span><span class="p">)</span>
                  <span class="kd">var</span> <span class="nx">intTo</span> <span class="o">=</span> <span class="p">(</span><span class="nx">moveTo</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">+</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="p">:</span> <span class="nx">moveTo</span><span class="p">;</span>
                  <span class="nx">moveTo</span> <span class="o">=</span> <span class="nx">moveToSigned</span><span class="p">(</span><span class="nx">moveTo</span><span class="p">)</span>
                  <span class="nx">violation</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ğŸ Move in-cue right </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1"> to +12 frames after shot change&lt;br&gt;&lt;font style="color: #7FFFD4; font-family: monospace"&gt;[IN-CUE: </span><span class="dl">'</span> <span class="o">+</span>
                     <span class="nx">oldTcf</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">intTo</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> = </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">newTcf</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1">]&lt;/font&gt;</span><span class="dl">'</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">isBetween</span><span class="p">(</span><span class="nx">distance</span><span class="p">,</span> <span class="o">-</span><span class="mi">11</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">))</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">moveTo</span> <span class="o">=</span> <span class="o">-</span><span class="mi">12</span> <span class="o">-</span> <span class="nx">distance</span>
                  <span class="kd">var</span> <span class="nx">newFramesE</span> <span class="o">=</span> <span class="nx">framesE</span> <span class="o">+</span> <span class="nx">moveTo</span>
                  <span class="kd">var</span> <span class="nx">newTcf</span> <span class="o">=</span> <span class="nx">frames2tcf</span><span class="p">(</span><span class="nx">newFramesE</span><span class="p">)</span>
                  <span class="kd">var</span> <span class="nx">intTo</span> <span class="o">=</span> <span class="p">(</span><span class="nx">moveTo</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">+</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="p">:</span> <span class="nx">moveTo</span><span class="p">;</span>
                  <span class="nx">moveTo</span> <span class="o">=</span> <span class="nx">moveToSigned</span><span class="p">(</span><span class="nx">moveTo</span><span class="p">)</span>
                  <span class="nx">violation</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ğŸ Move in-cue left </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1"> to -12 frames before shot change&lt;br&gt;&lt;font style="color: #7FFFD4; font-family: monospace"&gt;[IN-CUE: </span><span class="dl">'</span> <span class="o">+</span>
                     <span class="nx">oldTcf</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">intTo</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> = </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">newTcf</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1">]&lt;/font&gt;</span><span class="dl">'</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">isBetween</span><span class="p">(</span><span class="nx">distance</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">moveTo</span> <span class="o">=</span> <span class="mi">0</span> <span class="o">-</span> <span class="nx">distance</span>
                  <span class="kd">var</span> <span class="nx">newFramesE</span> <span class="o">=</span> <span class="nx">framesE</span> <span class="o">+</span> <span class="nx">moveTo</span>
                  <span class="kd">var</span> <span class="nx">newTcf</span> <span class="o">=</span> <span class="nx">frames2tcf</span><span class="p">(</span><span class="nx">newFramesE</span><span class="p">)</span>
                  <span class="kd">var</span> <span class="nx">intTo</span> <span class="o">=</span> <span class="p">(</span><span class="nx">moveTo</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">+</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="p">:</span> <span class="nx">moveTo</span><span class="p">;</span>
                  <span class="nx">moveTo</span> <span class="o">=</span> <span class="nx">moveToSigned</span><span class="p">(</span><span class="nx">moveTo</span><span class="p">)</span>
                  <span class="nx">violation</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ğŸ Move in-cue right </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">moveTo</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1"> to snap it to shot change&lt;br&gt;&lt;font style="color: #7FFFD4; font-family: monospace"&gt;[IN-CUE: </span><span class="dl">'</span> <span class="o">+</span>
                     <span class="nx">oldTcf</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">intTo</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> = </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">newTcf</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1">]&lt;/font&gt;</span><span class="dl">'</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">violation</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">scTotal</span><span class="o">++</span>
                  <span class="nx">afTotal</span><span class="o">++</span>
                  <span class="nx">V</span> <span class="o">=</span> <span class="p">{</span>
                     <span class="na">violation</span><span class="p">:</span> <span class="nx">css_cs1</span> <span class="o">+</span> <span class="nx">violation</span> <span class="o">+</span> <span class="nx">css_cs2</span><span class="p">,</span>
                     <span class="na">start</span><span class="p">:</span> <span class="nx">frames2timecode</span><span class="p">(</span><span class="nx">newFramesE</span><span class="p">),</span>
                     <span class="na">end</span><span class="p">:</span> <span class="kc">undefined</span>
                  <span class="p">}</span>
                  <span class="k">return</span> <span class="nx">V</span>
               <span class="p">}</span>
               <span class="k">return</span> <span class="kc">false</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">getNextShotchange</span><span class="p">(</span><span class="nx">frame</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">shotChanges</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="k">return</span> <span class="kc">false</span>
               <span class="p">}</span>
               <span class="k">else</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">smallestDist</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">.</span><span class="nx">POSITIVE_INFINITY</span>
                  <span class="kd">var</span> <span class="nx">bestCandidate</span> <span class="o">=</span> <span class="mi">0</span>
                  <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">shotChange</span> <span class="k">of</span> <span class="nx">shotChanges</span><span class="p">)</span>
                  <span class="p">{</span>
                     <span class="kd">var</span> <span class="nx">distance</span> <span class="o">=</span> <span class="nx">shotChange</span> <span class="o">-</span> <span class="nx">frame</span>
                     <span class="k">if</span><span class="p">(</span><span class="nx">distance</span> <span class="o">&lt;</span> <span class="nx">smallestDist</span> <span class="o">&amp;&amp;</span> <span class="nx">shotChange</span> <span class="o">&gt;=</span>
                        <span class="nx">frame</span><span class="p">)</span>
                     <span class="p">{</span>
                        <span class="nx">smallestDist</span> <span class="o">=</span> <span class="nx">distance</span>
                        <span class="nx">bestCandidate</span> <span class="o">=</span> <span class="nx">shotChange</span> <span class="o">*</span> <span class="mi">1</span>
                     <span class="p">}</span>
                  <span class="p">}</span>
                  <span class="k">return</span> <span class="nx">bestCandidate</span>
               <span class="p">}</span>
            <span class="p">}</span>
            <span class="c1">//returns distance in frames from a given frame to the nearest shot change</span>
            <span class="kd">function</span> <span class="nx">getNearestShotchange</span><span class="p">(</span><span class="nx">frame</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">shotChanges</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="k">return</span> <span class="kc">false</span>
               <span class="p">}</span>
               <span class="k">else</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">smallestDist</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">.</span><span class="nx">POSITIVE_INFINITY</span>
                  <span class="kd">var</span> <span class="nx">bestCandidate</span> <span class="o">=</span> <span class="mi">0</span>
                  <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">shotChange</span> <span class="k">of</span> <span class="nx">shotChanges</span><span class="p">)</span>
                  <span class="p">{</span>
                     <span class="kd">var</span> <span class="nx">distance</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">frame</span> <span class="o">-</span> <span class="nx">shotChange</span><span class="p">)</span>
                     <span class="k">if</span><span class="p">(</span><span class="nx">distance</span> <span class="o">&lt;</span> <span class="nx">smallestDist</span><span class="p">)</span>
                     <span class="p">{</span>
                        <span class="nx">smallestDist</span> <span class="o">=</span> <span class="nx">distance</span>
                        <span class="nx">bestCandidate</span> <span class="o">=</span> <span class="nx">shotChange</span> <span class="o">*</span> <span class="mi">1</span>
                     <span class="p">}</span>
                  <span class="p">}</span>
                  <span class="k">return</span> <span class="nx">bestCandidate</span>
               <span class="p">}</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">leftFillNum</span><span class="p">(</span><span class="nx">num</span><span class="p">,</span> <span class="nx">targetLength</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="k">return</span> <span class="nx">num</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">padStart</span><span class="p">(</span><span class="nx">targetLength</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">src</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">outOfTheBox</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
                  <span class="dl">"</span><span class="s2">DEBUG: In Originator, working with json_src</span><span class="dl">"</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">SRT</span> <span class="o">=</span> <span class="nx">array2srt</span><span class="p">(</span><span class="nx">src</span><span class="p">)</span>
               <span class="nx">SRT</span> <span class="o">=</span> <span class="nx">parseSRT</span><span class="p">(</span><span class="nx">SRT</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">our_clq</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">object</span><span class="dl">"</span> <span class="o">&amp;&amp;</span> <span class="nx">outOfTheBox</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
                  <span class="dl">"</span><span class="s2">DEBUG: In AutoQC, working with encoded fixed</span><span class="dl">"</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">SRT</span> <span class="o">=</span> <span class="nb">decodeURIComponent</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span>
                  <span class="dl">"</span><span class="s2">FixedTaskSRT</span><span class="dl">"</span><span class="p">).</span><span class="nx">href</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span>
                  <span class="dl">"</span><span class="s2">data:text/plain;charset=utf-8,</span><span class="dl">"</span><span class="p">,</span> <span class="dl">""</span><span class="p">)</span>
               <span class="nx">SRT</span> <span class="o">=</span> <span class="nx">parseSRT</span><span class="p">(</span><span class="nx">SRT</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">our_clq</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">object</span><span class="dl">"</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
                  <span class="dl">"</span><span class="s2">DEBUG: In SRT file, working with document body</span><span class="dl">"</span>
                  <span class="p">)</span>
               <span class="kd">var</span> <span class="nx">SRT</span> <span class="o">=</span> <span class="nx">our_clq</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="p">).</span><span class="nx">trim</span><span class="p">()</span>
               <span class="nx">SRT</span> <span class="o">=</span> <span class="nx">parseSRT</span><span class="p">(</span><span class="nx">SRT</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="kd">var</span> <span class="nx">fSRT</span> <span class="o">=</span> <span class="nx">SRT</span>
            <span class="kd">var</span> <span class="nx">issues</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="kd">var</span> <span class="nx">events_detected</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">SRT</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">end_current</span> <span class="o">=</span> <span class="nx">SRT</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">]</span>
               <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="p">(</span><span class="nx">SRT</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">start_next</span> <span class="o">=</span> <span class="nx">SRT</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">][</span><span class="dl">"</span><span class="s2">start</span><span class="dl">"</span><span class="p">]</span>
               <span class="p">}</span>
               <span class="k">else</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">start_next</span> <span class="o">=</span> <span class="mi">23976023976</span>
               <span class="p">}</span>
               <span class="kd">var</span> <span class="nx">distance</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span>
                  <span class="p">(</span><span class="nx">start_next</span> <span class="o">-</span> <span class="nx">end_current</span><span class="p">)</span> <span class="o">*</span> <span class="nx">fps</span><span class="p">)</span>
               <span class="nx">SRT</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="dl">"</span><span class="s2">frames_to_next</span><span class="dl">"</span><span class="p">]</span> <span class="o">=</span> <span class="nx">distance</span>
            <span class="p">}</span>
            <span class="k">for</span><span class="p">(</span><span class="nx">event</span> <span class="k">of</span> <span class="nx">SRT</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">start_time</span> <span class="o">=</span> <span class="nx">event</span><span class="p">[</span><span class="dl">"</span><span class="s2">start</span><span class="dl">"</span><span class="p">]</span>
               <span class="kd">var</span> <span class="nx">end_time</span> <span class="o">=</span> <span class="nx">event</span><span class="p">[</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">]</span>
               <span class="kd">var</span> <span class="nx">delta</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">((</span><span class="nx">end_time</span> <span class="o">-</span> <span class="nx">start_time</span><span class="p">)</span> <span class="o">*</span>
                  <span class="mi">1000</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span>
               <span class="kd">var</span> <span class="nx">delta_fps</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">delta</span><span class="p">)</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">:</span><span class="dl">"</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span>
                  <span class="p">(</span><span class="nx">delta</span> <span class="o">-</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">delta</span><span class="p">))</span> <span class="o">*</span> <span class="nx">fps</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">start_frames</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">start_time</span> <span class="o">*</span> <span class="nx">fps</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">end_frames</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">end_time</span> <span class="o">*</span> <span class="nx">fps</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">start_tcf</span> <span class="o">=</span> <span class="nx">frames2tcf</span><span class="p">(</span><span class="nx">start_frames</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">end_tcf</span> <span class="o">=</span> <span class="nx">frames2tcf</span><span class="p">(</span><span class="nx">end_frames</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">event</span><span class="p">[</span><span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">]</span>
               <span class="kd">var</span> <span class="nx">srtId</span> <span class="o">=</span> <span class="nx">id</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
               <span class="kd">var</span> <span class="nx">distanceNextEvent</span> <span class="o">=</span> <span class="nx">event</span><span class="p">[</span><span class="dl">"</span><span class="s2">frames_to_next</span><span class="dl">"</span><span class="p">]</span>
               <span class="kd">var</span> <span class="nx">_id</span> <span class="o">=</span> <span class="nx">leftFillNum</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">eventIssue</span> <span class="o">=</span> <span class="p">[]</span>
               <span class="kd">var</span> <span class="nx">eventTxt</span> <span class="o">=</span> <span class="nx">event</span><span class="p">[</span><span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">]</span>
               <span class="kd">var</span> <span class="nx">bareTxt</span> <span class="o">=</span> <span class="nx">eventTxt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">\n</span><span class="sr">/g</span><span class="p">,</span> <span class="dl">"</span><span class="s2">â€£</span><span class="dl">"</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span>
                  <span class="sr">/&lt;</span><span class="se">(</span><span class="sr">|</span><span class="se">\/)(</span><span class="sr">i|b</span><span class="se">)</span><span class="sr">&gt;/g</span><span class="p">,</span> <span class="dl">""</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">\{</span><span class="sr">.an.</span><span class="se">\}</span><span class="sr">/g</span><span class="p">,</span> <span class="dl">""</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">totalLength</span> <span class="o">=</span> <span class="nx">bareTxt</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span>
               <span class="kd">var</span> <span class="nx">cps</span> <span class="o">=</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">((</span><span class="nx">totalLength</span> <span class="o">/</span> <span class="nx">delta</span><span class="p">)</span> <span class="o">*</span>
                  <span class="mi">1000</span><span class="p">))</span> <span class="o">/</span> <span class="mi">1000</span>
               <span class="kd">var</span> <span class="nx">duration_for_normal_cps</span> <span class="o">=</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">((</span>
                  <span class="nx">totalLength</span> <span class="o">/</span> <span class="nx">normal_cps</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span> <span class="o">/</span> <span class="mi">1000</span>
               <span class="kd">var</span> <span class="nx">framesToFixCPS</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(((((</span>
                     <span class="nx">duration_for_normal_cps</span> <span class="o">-</span> <span class="nx">delta</span><span class="p">)</span> <span class="o">*</span>
                  <span class="mi">1000</span><span class="p">)</span> <span class="o">*</span> <span class="nx">fps</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">round_int_cps</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">cps</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
               <span class="kd">var</span> <span class="nx">html_cps</span> <span class="o">=</span> <span class="dl">''</span>
               <span class="kd">var</span> <span class="nx">eventFixedTxt</span> <span class="o">=</span> <span class="nx">event</span><span class="p">[</span><span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">]</span>
               <span class="kd">var</span> <span class="nx">eventOriginalTxt</span> <span class="o">=</span> <span class="nx">event</span><span class="p">[</span><span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">]</span>
               <span class="kd">var</span> <span class="nx">eventIsFn</span> <span class="o">=</span> <span class="p">(</span><span class="nx">eventTxt</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="dl">"</span><span class="s2">&lt;b&gt;&lt;/b&gt;</span><span class="dl">"</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">eventIsFnInCaps</span> <span class="o">=</span> <span class="nx">eventIsFn</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">LANG</span> <span class="o">!==</span> <span class="dl">'</span><span class="s1">CN</span><span class="dl">'</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
                  <span class="p">(</span><span class="nx">eventTxt</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">().</span><span class="nx">trim</span><span class="p">()</span> <span class="o">===</span> <span class="nx">eventTxt</span>
                  <span class="p">.</span><span class="nx">trim</span><span class="p">())</span>
               <span class="kd">var</span> <span class="nx">scS</span> <span class="o">=</span> <span class="nx">getNearestShotchange</span><span class="p">(</span><span class="nx">start_frames</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">scE</span> <span class="o">=</span> <span class="nx">getNearestShotchange</span><span class="p">(</span><span class="nx">end_frames</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">scN</span> <span class="o">=</span> <span class="nx">getNextShotchange</span><span class="p">(</span><span class="nx">end_frames</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">scND</span> <span class="o">=</span> <span class="nx">scN</span> <span class="o">-</span> <span class="nx">end_frames</span>
               <span class="kd">var</span> <span class="nx">scSD</span> <span class="o">=</span> <span class="nx">start_frames</span> <span class="o">-</span> <span class="nx">scS</span>
               <span class="kd">var</span> <span class="nx">scED</span> <span class="o">=</span> <span class="nx">end_frames</span> <span class="o">-</span> <span class="nx">scE</span>
               <span class="kd">var</span> <span class="nx">cpsFixable</span> <span class="o">=</span> <span class="kc">false</span>
               <span class="kd">var</span> <span class="nx">cpsAttemptable</span> <span class="o">=</span> <span class="kc">false</span>
               <span class="kd">var</span> <span class="nx">bestWorstCPS</span> <span class="o">=</span> <span class="kc">false</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">cps</span> <span class="o">&gt;</span> <span class="nx">normal_cps</span> <span class="o">&amp;&amp;</span> <span class="nx">cps</span> <span class="o">&lt;</span> <span class="nx">max_cps</span> <span class="o">&amp;&amp;</span> <span class="nx">scND</span> <span class="o">-</span>
                  <span class="nx">framesToFixCPS</span> <span class="o">&gt;</span> <span class="mi">11</span> <span class="o">&amp;&amp;</span> <span class="nx">distanceNextEvent</span> <span class="o">-</span>
                  <span class="nx">framesToFixCPS</span> <span class="o">&gt;</span> <span class="mi">11</span> <span class="o">&amp;&amp;</span> <span class="nx">framesToFixCPS</span> <span class="o">&lt;</span> <span class="mi">12</span> <span class="o">&amp;&amp;</span> <span class="o">!</span>
                  <span class="nx">eventIsFnInCaps</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">cpsFixable</span> <span class="o">=</span> <span class="kc">true</span>
                  <span class="c1">//var log = "EVENT: "+id+"\nCPS: "+cps+"\tDuration: "+delta_fps+"\nTAR: //"+normal_cps+".00\tWant_dur: "+duration_for_normal_cps+</span>
                  <span class="c1">//"\nEnd_frame: "+end_frames+"\nNex_ev in: "+distanceNextEvent+"\nNex_sc in: "</span>
                  <span class="c1">//+scND+"\nADD_FRAM: "+framesToFixCPS+"\nTotal length: "</span>
                  <span class="c1">//+totalLength+"\nEND_TIMECODE_1: "+frames2tcf(end_frames+framesToFixCPS)+"\nEND_TIMECODE_2: "+</span>
                  <span class="c1">//frames2tcf(Math.round((start_time + duration_for_normal_cps)*fps))</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">cps</span> <span class="o">&gt;=</span> <span class="nx">max_cps</span> <span class="o">&amp;&amp;</span> <span class="nx">scND</span> <span class="o">-</span> <span class="mi">12</span> <span class="o">&gt;</span> <span class="mi">11</span> <span class="o">&amp;&amp;</span>
                  <span class="nx">distanceNextEvent</span> <span class="o">-</span> <span class="mi">12</span> <span class="o">&gt;</span> <span class="mi">11</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">eventIsFnInCaps</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">cpsAttemptable</span> <span class="o">=</span> <span class="kc">true</span>
                  <span class="nx">framesToFixCPS</span> <span class="o">=</span> <span class="mi">12</span>
                  <span class="kd">var</span> <span class="nx">plusDelta</span> <span class="o">=</span> <span class="mi">12</span> <span class="o">/</span> <span class="nx">fps</span>
                  <span class="nx">bestWorstCPS</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">((</span><span class="nx">totalLength</span> <span class="o">/</span> <span class="p">(</span><span class="nx">delta</span> <span class="o">+</span>
                     <span class="nx">plusDelta</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span> <span class="o">/</span> <span class="mi">1000</span>
               <span class="p">}</span>
               <span class="kd">var</span> <span class="nx">scStcf</span> <span class="o">=</span> <span class="nx">frames2tcf</span><span class="p">(</span><span class="nx">scS</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">scEtcf</span> <span class="o">=</span> <span class="nx">frames2tcf</span><span class="p">(</span><span class="nx">scE</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">violS</span> <span class="o">=</span> <span class="nx">validateScS</span><span class="p">(</span><span class="nx">scSD</span><span class="p">,</span> <span class="nx">start_frames</span><span class="p">,</span> <span class="nx">scS</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">violE</span> <span class="o">=</span> <span class="nx">validateScE</span><span class="p">(</span><span class="nx">scED</span><span class="p">,</span> <span class="nx">end_frames</span><span class="p">,</span> <span class="nx">scE</span><span class="p">,</span>
                  <span class="nx">distanceNextEvent</span><span class="p">,</span> <span class="nx">cps</span><span class="p">)</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">violS</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">eventIssue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">violS</span><span class="p">[</span><span class="dl">"</span><span class="s2">violation</span><span class="dl">"</span><span class="p">])</span>
                  <span class="nx">fSRT</span><span class="p">[</span><span class="nx">srtId</span><span class="p">][</span><span class="dl">"</span><span class="s2">start</span><span class="dl">"</span><span class="p">]</span> <span class="o">=</span> <span class="nx">violS</span><span class="p">[</span><span class="dl">"</span><span class="s2">start</span><span class="dl">"</span><span class="p">];</span>
               <span class="p">}</span>
               <span class="k">else</span>
               <span class="p">{</span>
                  <span class="nx">fSRT</span><span class="p">[</span><span class="nx">srtId</span><span class="p">][</span><span class="dl">"</span><span class="s2">start</span><span class="dl">"</span><span class="p">]</span> <span class="o">=</span> <span class="nx">frames2timecode</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span>
                     <span class="nx">fSRT</span><span class="p">[</span><span class="nx">srtId</span><span class="p">]</span>
                     <span class="p">[</span><span class="dl">"</span><span class="s2">start</span><span class="dl">"</span><span class="p">]</span> <span class="o">*</span> <span class="nx">fps</span><span class="p">))</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">violE</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">eventIssue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">violE</span><span class="p">[</span><span class="dl">"</span><span class="s2">violation</span><span class="dl">"</span><span class="p">])</span>
                  <span class="nx">fSRT</span><span class="p">[</span><span class="nx">srtId</span><span class="p">][</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">]</span> <span class="o">=</span> <span class="nx">violE</span><span class="p">[</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">];</span>
               <span class="p">}</span>
               <span class="k">else</span>
               <span class="p">{</span>
                  <span class="nx">fSRT</span><span class="p">[</span><span class="nx">srtId</span><span class="p">][</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">]</span> <span class="o">=</span> <span class="nx">frames2timecode</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span>
                     <span class="nx">fSRT</span><span class="p">[</span><span class="nx">srtId</span><span class="p">]</span>
                     <span class="p">[</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">]</span> <span class="o">*</span> <span class="nx">fps</span><span class="p">))</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">eventTxt</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="dl">"</span><span class="s2">&lt;b&gt;&lt;/b&gt;</span><span class="dl">"</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">eventIsFn</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                  <span class="nx">_id</span> <span class="o">+=</span>
                     <span class="dl">'</span><span class="s1">&lt;span class="outline" style="color: purple; position: relative; top: 0px; left: 137px;"&gt;ğŸ…µğŸ…½&lt;/span&gt;</span><span class="dl">'</span>
               <span class="p">}</span>
               <span class="nx">eventTxt</span> <span class="o">=</span> <span class="nx">eventTxt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">(</span><span class="sr">&lt;</span><span class="se">([^</span><span class="sr">&gt;</span><span class="se">]</span><span class="sr">+</span><span class="se">)</span><span class="sr">&gt;</span><span class="se">)</span><span class="sr">/ig</span><span class="p">,</span> <span class="dl">""</span><span class="p">);</span>
               <span class="nx">eventTxt</span> <span class="o">=</span> <span class="nx">eventTxt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/{.an.}/ig</span><span class="p">,</span> <span class="dl">""</span><span class="p">);</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">eventTxt</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">eventTxt</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span>
                     <span class="dl">"</span><span class="se">\n</span><span class="s2">-</span><span class="dl">"</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">eventTxt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">)</span>
                  <span class="p">.</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="nx">line_limit</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">eventIsFnInCaps</span> <span class="o">&amp;&amp;</span> <span class="o">!</span>
                  <span class="nx">hasSafeBox</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">eventIssue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
                     <span class="dl">"</span><span class="s2">&lt;span class=</span><span class="se">\"</span><span class="s2">major_issue</span><span class="se">\"</span><span class="s2">&gt;ğŸš« Can fit on one line (</span><span class="dl">"</span> <span class="o">+</span>
                     <span class="nx">line_limit</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> for </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">LANG</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">)</span><span class="dl">"</span><span class="p">)</span>
                  <span class="nx">majTotal</span><span class="o">++</span>
                  <span class="nx">eventFixedTxt</span> <span class="o">=</span> <span class="nx">eventFixedTxt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">\n</span><span class="sr">/g</span><span class="p">,</span> <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">)</span>
                  <span class="nx">eventFixedTxt</span> <span class="o">=</span> <span class="nx">eventFixedTxt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/Â /gi</span><span class="p">,</span> <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">)</span>
                     <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">[</span><span class="sr"> </span><span class="se">][</span><span class="sr"> </span><span class="se">]</span><span class="sr">/g</span><span class="p">,</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span><span class="p">);</span>
                  <span class="nx">afTotal</span><span class="o">++</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">eventTxt</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="dl">"</span><span class="s2">...</span><span class="dl">"</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">eventIssue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
                     <span class="dl">"</span><span class="s2">&lt;span class=</span><span class="se">\"</span><span class="s2">minor_issue</span><span class="se">\"</span><span class="s2">&gt;âš ï¸ Legacy ellipsis detected, replace with U+2026: â€¦</span><span class="dl">"</span>
                     <span class="p">);</span>
                  <span class="nx">minTotal</span><span class="o">++</span>
                  <span class="nx">eventFixedTxt</span> <span class="o">=</span> <span class="nx">eventFixedTxt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">\.\.\.</span><span class="sr">/g</span><span class="p">,</span>
                     <span class="dl">"</span><span class="s2">â€¦</span><span class="dl">"</span><span class="p">)</span>
                  <span class="nx">afTotal</span><span class="o">++</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">eventTxt</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="dl">"</span><span class="s2">'</span><span class="dl">"</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="nx">eventTxt</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span>
                     <span class="dl">'</span><span class="s1">"</span><span class="dl">'</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="k">switch</span> <span class="p">(</span><span class="nx">LANG</span><span class="p">)</span>
                  <span class="p">{</span>
                  <span class="k">case</span> <span class="dl">"</span><span class="s2">EN</span><span class="dl">"</span><span class="p">:</span>
                     <span class="nx">eventIssue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
                        <span class="dl">"</span><span class="s2">&lt;span class=</span><span class="se">\"</span><span class="s2">minor_issue</span><span class="se">\"</span><span class="s2">&gt;âš ï¸ Smart quotes recommended for EN: &lt;b&gt;â€œ   â€   â€™&lt;/b&gt;</span><span class="dl">"</span>
                        <span class="p">);</span>
                     <span class="nx">minTotal</span><span class="o">++</span>
                     <span class="nx">eventFixedTxt</span> <span class="o">=</span> <span class="nx">eventFixedTxt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span>
                        <span class="sr">/"</span><span class="se">(</span><span class="sr"> |</span><span class="se">\n</span><span class="sr">|$</span><span class="se">)</span><span class="sr">/g</span><span class="p">,</span> <span class="dl">"</span><span class="s2">â€$1</span><span class="dl">"</span><span class="p">)</span>
                     <span class="nx">eventFixedTxt</span> <span class="o">=</span> <span class="nx">eventFixedTxt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/"/g</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">â€œ</span><span class="dl">"</span><span class="p">)</span>
                     <span class="nx">eventFixedTxt</span> <span class="o">=</span> <span class="nx">eventFixedTxt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/'/g</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">â€™</span><span class="dl">"</span><span class="p">)</span>
                     <span class="nx">afTotal</span><span class="o">++</span>
                     <span class="k">break</span><span class="p">;</span>
                  <span class="k">case</span> <span class="dl">"</span><span class="s2">RU</span><span class="dl">"</span><span class="p">:</span>
                     <span class="nx">eventIssue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
                        <span class="dl">"</span><span class="s2">&lt;span class=</span><span class="se">\"</span><span class="s2">minor_issue</span><span class="se">\"</span><span class="s2">&gt;âš ï¸ Proper Russian uses chevrons: &lt;b&gt;Â« Â»&lt;/b&gt;</span><span class="dl">"</span>
                        <span class="p">);</span>
                     <span class="nx">minTotal</span><span class="o">++</span>
                     <span class="nx">eventFixedTxt</span> <span class="o">=</span> <span class="nx">eventFixedTxt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span>
                        <span class="sr">/"</span><span class="se">(</span><span class="sr"> |</span><span class="se">\n</span><span class="sr">|$</span><span class="se">)</span><span class="sr">/g</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Â»$1</span><span class="dl">"</span><span class="p">)</span>
                     <span class="nx">eventFixedTxt</span> <span class="o">=</span> <span class="nx">eventFixedTxt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/"/g</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">Â«</span><span class="dl">"</span><span class="p">)</span>
                     <span class="nx">afTotal</span><span class="o">++</span>
                     <span class="k">break</span><span class="p">;</span>
                  <span class="p">}</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">eventTxt</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="dl">"</span><span class="s2">!?</span><span class="dl">"</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">eventIssue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
                     <span class="dl">"</span><span class="s2">&lt;span class=</span><span class="se">\"</span><span class="s2">minor_issue</span><span class="se">\"</span><span class="s2">&gt;âš ï¸ Unconventional punctuation detected. Did you mean to use '?!'</span><span class="dl">"</span>
                     <span class="p">)</span>
                  <span class="nx">minTotal</span><span class="o">++</span>
                  <span class="nx">eventFixedTxt</span> <span class="o">=</span> <span class="nx">eventFixedTxt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">[</span><span class="sr">!</span><span class="se">][</span><span class="sr">?</span><span class="se">]</span><span class="sr">/g</span><span class="p">,</span>
                     <span class="dl">"</span><span class="s2">?!</span><span class="dl">"</span><span class="p">)</span>
                  <span class="nx">afTotal</span><span class="o">++</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">eventTxt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">\.\.\.</span><span class="sr">/g</span><span class="p">,</span> <span class="dl">"</span><span class="s2">â€¦</span><span class="dl">"</span><span class="p">).</span><span class="nx">search</span><span class="p">(</span>
                     <span class="sr">/</span><span class="se">(([</span><span class="sr">,.:</span><span class="se">])(</span><span class="sr">!</span><span class="se">?([^\d\s\.])))</span><span class="sr">/</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">eventIssue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
                     <span class="dl">"</span><span class="s2">&lt;span class=</span><span class="se">\"</span><span class="s2">minor_issue</span><span class="se">\"</span><span class="s2">&gt;âš ï¸ No space after a punctuation mark. Is this deliberate?</span><span class="dl">"</span>
                     <span class="p">)</span>
                  <span class="nx">minTotal</span><span class="o">++</span>
                  <span class="nx">eventFixedTxt</span> <span class="o">=</span> <span class="nx">eventFixedTxt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span>
                        <span class="sr">/</span><span class="se">(([</span><span class="sr">,.:</span><span class="se">])(</span><span class="sr">!</span><span class="se">?([^\d\s\.])))</span><span class="sr">/gi</span><span class="p">,</span> <span class="dl">"</span><span class="s2">$2 $4</span><span class="dl">"</span><span class="p">)</span>
                     <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">\.</span><span class="sr"> </span><span class="se">\.</span><span class="sr">/gi</span><span class="p">,</span> <span class="dl">"</span><span class="s2">..</span><span class="dl">"</span><span class="p">)</span>
                  <span class="nx">afTotal</span><span class="o">++</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">eventTxt</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="dl">"</span><span class="s2"> - </span><span class="dl">"</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">eventIssue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
                     <span class="dl">"</span><span class="s2">&lt;span class=</span><span class="se">\"</span><span class="s2">minor_issue</span><span class="se">\"</span><span class="s2">&gt;âš ï¸ Instead of hyphen, consider en or em dash: â€“ or â€”</span><span class="dl">"</span>
                     <span class="p">)</span>
                  <span class="nx">minTotal</span><span class="o">++</span>
               <span class="p">}</span>
               <span class="kd">var</span> <span class="nx">eventSpecial</span> <span class="o">=</span> <span class="kc">false</span>
               <span class="kd">var</span> <span class="nx">hasSpace</span> <span class="o">=</span> <span class="sr">/</span><span class="se">\s</span><span class="sr">$|^</span><span class="se">\s</span><span class="sr">/</span><span class="p">;</span>
               <span class="kd">var</span> <span class="nx">eventTxt_lines</span> <span class="o">=</span> <span class="nx">eventTxt</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="p">);</span>
               <span class="kd">var</span> <span class="nx">nPos</span> <span class="o">=</span> <span class="nx">eventTxt</span><span class="p">.</span><span class="nx">lastIndexOf</span><span class="p">(</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="p">);</span>
               <span class="kd">var</span> <span class="nx">hasSpaceIssue</span> <span class="o">=</span> <span class="nx">nPos</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">eventTxt</span><span class="p">[</span><span class="nx">nPos</span> <span class="o">+</span>
                  <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">overLineLimit</span> <span class="o">=</span> <span class="kc">false</span>
               <span class="kd">var</span> <span class="nx">hasDoubleSpace</span> <span class="o">=</span> <span class="nx">eventTxt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="p">,</span> <span class="dl">""</span><span class="p">)</span>
                  <span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/</span><span class="se">\s\s</span><span class="sr">/</span><span class="p">).</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span>
               <span class="kd">var</span> <span class="nx">hasThreeLines</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">eventTxt_lines</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!==</span>
                  <span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span>
               <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">line</span> <span class="k">of</span> <span class="nx">eventTxt_lines</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">hasSpaceIssue</span> <span class="o">=</span> <span class="p">(</span><span class="nx">hasSpace</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">line</span><span class="p">)</span> <span class="o">||</span>
                     <span class="nx">hasSpaceIssue</span><span class="p">)</span>
                  <span class="k">if</span><span class="p">(</span><span class="nx">line</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="nx">line_limit</span><span class="p">)</span>
                  <span class="p">{</span>
                     <span class="nx">eventSpecial</span> <span class="o">=</span> <span class="nx">line</span>
                     <span class="nx">overLineLimit</span> <span class="o">=</span> <span class="kc">true</span>
                  <span class="p">}</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">hasDoubleSpace</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">eventIssue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
                     <span class="dl">"</span><span class="s2">&lt;span class=</span><span class="se">\"</span><span class="s2">minor_issue&gt;</span><span class="se">\"</span><span class="s2">&lt;span class=</span><span class="se">\"</span><span class="s2">minor_issue</span><span class="se">\"</span><span class="s2">&gt;âš ï¸ Double spaces detected, replace with single space&lt;/span&gt;</span><span class="dl">"</span>
                     <span class="p">);</span>
                  <span class="nx">minTotal</span><span class="o">++</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">hasThreeLines</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">eventIssue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
                     <span class="dl">"</span><span class="s2">&lt;span class=</span><span class="se">\"</span><span class="s2">major_issue</span><span class="se">\"</span><span class="s2">&gt;ğŸš« Three lines detected in this event</span><span class="dl">"</span>
                     <span class="p">);</span>
                  <span class="nx">majTotal</span><span class="o">++</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">hasSpaceIssue</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="k">if</span><span class="p">(</span><span class="nx">eventTxt</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
                  <span class="p">{</span>
                     <span class="nx">eventIssue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
                        <span class="dl">"</span><span class="s2">&lt;span class=</span><span class="se">\"</span><span class="s2">minor_issue</span><span class="se">\"</span><span class="s2">&gt;âš ï¸ One of the lines begins or ends with whitespace</span><span class="dl">"</span>
                        <span class="p">);</span>
                     <span class="k">try</span>
                     <span class="p">{</span>
                        <span class="nx">eventFixedTxt</span> <span class="o">=</span> <span class="nx">eventFixedTxt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span>
                           <span class="sr">/</span><span class="se">(</span><span class="sr"> |</span><span class="se">)\n(</span><span class="sr"> |</span><span class="se">)</span><span class="sr">/</span><span class="p">,</span> <span class="dl">"</span><span class="s2">â€£</span><span class="dl">"</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span>
                           <span class="sr">/</span><span class="se">[</span><span class="sr"> </span><span class="se">]{2,}</span><span class="sr">/gi</span><span class="p">,</span> <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">).</span><span class="nx">trim</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="s2">â€£</span><span class="dl">"</span><span class="p">,</span>
                           <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="p">)</span>
                        <span class="nx">eventFixedTxt</span> <span class="o">=</span> <span class="nx">eventFixedTxt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span>
                           <span class="dl">'</span><span class="s1"> &lt;b&gt;&lt;/b&gt;</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">&lt;b&gt;&lt;/b&gt;</span><span class="dl">'</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span>
                           <span class="dl">'</span><span class="s1"> &lt;/i&gt;&lt;b&gt;&lt;/b&gt;</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">&lt;/i&gt;&lt;b&gt;&lt;/b&gt;</span><span class="dl">'</span><span class="p">)</span>
                        <span class="nx">eventFixedTxt</span> <span class="o">=</span> <span class="nx">eventFixedTxt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span>
                           <span class="sr">/</span><span class="se">(</span><span class="sr"> </span><span class="se">)(</span><span class="sr">&lt;</span><span class="se">(</span><span class="sr">|</span><span class="se">\/)</span><span class="sr">i&gt;</span><span class="se">)(\n)</span><span class="sr">/g</span><span class="p">,</span> <span class="dl">"</span><span class="s2">$2$4</span><span class="dl">"</span><span class="p">)</span>
                        <span class="nx">eventFixedTxt</span> <span class="o">=</span> <span class="nx">eventFixedTxt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span>
                           <span class="dl">'</span><span class="s1">&lt;i&gt;&lt;/i&gt;</span><span class="dl">'</span><span class="p">,</span> <span class="dl">''</span><span class="p">)</span>
                        <span class="nx">afTotal</span><span class="o">++</span>
                     <span class="p">}</span>
                     <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span>
                     <span class="p">{</span>
                        <span class="nx">eventFixedTxt</span> <span class="o">=</span> <span class="nx">eventFixedTxt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span>
                           <span class="sr">/</span><span class="se">(</span><span class="sr"> |</span><span class="se">)\n(</span><span class="sr"> |</span><span class="se">)</span><span class="sr">/</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Ã—</span><span class="dl">"</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/ </span><span class="se">\s</span><span class="sr">+/gi</span><span class="p">,</span>
                           <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">).</span><span class="nx">trim</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="s2">Ã—</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="p">)</span>
                        <span class="nx">afTotal</span><span class="o">++</span>
                     <span class="p">}</span>
                  <span class="p">}</span>
                  <span class="k">else</span>
                  <span class="p">{</span>
                     <span class="nx">eventIssue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
                        <span class="dl">"</span><span class="s2">&lt;span class=</span><span class="se">\"</span><span class="s2">major_issue</span><span class="se">\"</span><span class="s2">&gt;ğŸš« Empty event detected!</span><span class="dl">"</span>
                        <span class="p">);</span>
                     <span class="nx">majTotal</span><span class="o">++</span>
                     <span class="nx">eventSpecial</span> <span class="o">=</span>
                        <span class="dl">"</span><span class="s2">&lt;span style='color:red;'&gt;&amp;lt;text cannot be empty&amp;gt;&lt;/span&gt;</span><span class="dl">"</span>
                  <span class="p">}</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">overLineLimit</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">eventIssue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
                     <span class="dl">"</span><span class="s2">&lt;span class=</span><span class="se">\"</span><span class="s2">major_issue</span><span class="se">\"</span><span class="s2">&gt;ğŸš« Line over max limit of </span><span class="dl">"</span> <span class="o">+</span>
                     <span class="nx">line_limit</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> for </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">LANG</span><span class="p">)</span>
                  <span class="nx">majTotal</span><span class="o">++</span>
                  <span class="nx">eventSpecial</span> <span class="o">=</span> <span class="p">[</span>
                     <span class="nx">eventSpecial</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">line_limit</span><span class="p">),</span>
                     <span class="dl">"</span><span class="s2">&lt;span style='color: red; text-overflow: fade;'&gt;</span><span class="dl">"</span><span class="p">,</span>
                     <span class="nx">eventSpecial</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">line_limit</span><span class="p">)</span>
                  <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">)</span>
               <span class="p">}</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">delta</span> <span class="o">*</span> <span class="nx">delta</span> <span class="o">&gt;</span> <span class="mi">49</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">eventIssue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
                     <span class="dl">"</span><span class="s2">&lt;span class=</span><span class="se">\"</span><span class="s2">major_issue</span><span class="se">\"</span><span class="s2">&gt;ğŸš« Maximum duration exceeded for current FPS!</span><span class="dl">"</span>
                     <span class="p">)</span>
                  <span class="nx">majTotal</span><span class="o">++</span>
               <span class="p">}</span>
               <span class="c1">// var halfLength = totalLength - Contrary to official statement,</span>
               <span class="c1">// ( eventTxt.replace(/[ ]/g, '') Originator does not count</span>
               <span class="c1">// .replace(/[^a-z0-9]/gi Western punctuation and spaces</span>
               <span class="c1">// , '').length); as 0.5 characters for CPS.*/</span>
               <span class="c1">//</span>
               <span class="c1">// totalLength += (halfLength/(-2))</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">cps</span> <span class="o">&gt;</span> <span class="nx">normal_cps</span> <span class="o">&amp;&amp;</span> <span class="nx">cps</span> <span class="o">&lt;</span> <span class="nx">max_cps</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">html_cps</span> <span class="o">=</span>
                     <span class="dl">'</span><span class="s1">&lt;div&gt;&lt;span style="color: gold;"&gt;&amp;nbsp;&amp;nbsp;&amp;emsp;</span><span class="dl">'</span> <span class="o">+</span>
                     <span class="nx">round_int_cps</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> c/s&lt;/span&gt;&lt;/div&gt;</span><span class="dl">'</span>
               <span class="p">}</span>
               <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">cps</span> <span class="o">&gt;</span> <span class="p">(</span><span class="nx">max_cps</span><span class="p">))</span>
               <span class="p">{</span>
                  <span class="nx">eventIssue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span>
                     <span class="dl">"</span><span class="s2">&lt;span class=</span><span class="se">\"</span><span class="s2">major_issue</span><span class="se">\"</span><span class="s2">&gt;ğŸš« Reading speed above maximum! Either truncate text or extend timings!</span><span class="dl">"</span>
                     <span class="p">)</span>
                  <span class="nx">majTotal</span><span class="o">++</span>
                  <span class="nx">html_cps</span> <span class="o">=</span>
                     <span class="dl">'</span><span class="s1">&lt;div&gt;&lt;span style="color:red;"&gt;&amp;nbsp;&amp;nbsp;&amp;emsp;</span><span class="dl">'</span> <span class="o">+</span>
                     <span class="nx">round_int_cps</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> c/s&lt;/span&gt;&lt;/div&gt;</span><span class="dl">'</span>
               <span class="p">}</span>
               <span class="k">else</span>
               <span class="p">{</span>
                  <span class="nx">html_cps</span> <span class="o">=</span>
                     <span class="dl">'</span><span class="s1">&lt;div&gt;&lt;span style="color:silver;"&gt;&amp;nbsp;&amp;nbsp;&amp;emsp;</span><span class="dl">'</span> <span class="o">+</span>
                     <span class="nx">round_int_cps</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> c/s&lt;/span&gt;&lt;/div&gt;</span><span class="dl">'</span>
               <span class="p">}</span>
               <span class="kd">var</span> <span class="nx">dur_tcf</span> <span class="o">=</span> <span class="nx">frames2tcf</span><span class="p">(</span><span class="nx">delta</span> <span class="o">*</span> <span class="nx">fps</span><span class="p">).</span><span class="nx">substr</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
               <span class="kd">var</span> <span class="nx">eventLines</span> <span class="o">=</span> <span class="nx">eventTxt</span><span class="p">.</span><span class="nx">trim</span><span class="p">().</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="p">)</span>
               <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">eventIssue</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span> <span class="o">&amp;&amp;</span> <span class="nx">eventIssue</span>
                  <span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">events_detected</span><span class="o">++</span><span class="p">;</span>
                  <span class="kd">var</span> <span class="nx">log_event</span> <span class="o">=</span> <span class="p">(</span><span class="nx">start_tcf</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">eventTxt_lines</span><span class="p">[</span>
                     <span class="mi">0</span><span class="p">].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">line_limit</span><span class="p">).</span><span class="nx">padEnd</span><span class="p">(</span>
                     <span class="nx">line_limit</span> <span class="o">+</span> <span class="mi">4</span><span class="p">,</span> <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">)</span> <span class="o">+</span> <span class="nx">_id</span><span class="p">).</span><span class="nx">padEnd</span><span class="p">(</span>
                     <span class="nx">line_limit</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">)</span>
                  <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">eventTxt_lines</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span><span class="p">)</span>
                  <span class="p">{</span>
                     <span class="nx">log_event</span> <span class="o">+=</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">end_tcf</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span> <span class="o">+</span>
                        <span class="nx">eventTxt_lines</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">padEnd</span><span class="p">(</span><span class="nx">line_limit</span> <span class="o">+</span> <span class="mi">8</span><span class="p">,</span>
                           <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">)</span>
                  <span class="p">}</span>
                  <span class="k">else</span>
                  <span class="p">{</span>
                     <span class="nx">log_event</span> <span class="o">+=</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">end_tcf</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">.</span><span class="nx">padEnd</span><span class="p">(</span>
                        <span class="nx">line_limit</span> <span class="o">+</span> <span class="mi">6</span><span class="p">,</span> <span class="dl">"</span><span class="s2"> </span><span class="dl">"</span><span class="p">)</span>
                  <span class="p">}</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">%c</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">log_event</span><span class="p">,</span>
                     <span class="dl">'</span><span class="s1">background: #12343b; color: #66ff00</span><span class="dl">'</span><span class="p">)</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">((</span><span class="o">+</span><span class="nx">_id</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">start_tcf</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span>
                        <span class="nx">end_tcf</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">eventTxt</span><span class="p">).</span><span class="nx">padEnd</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
                     <span class="dl">'</span><span class="s1">background: #222; color: #bada55</span><span class="dl">'</span><span class="p">);</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">((</span><span class="dl">'</span><span class="s1">%c</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">eventIssue</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="p">)).</span><span class="nx">padEnd</span><span class="p">(</span>
                        <span class="mi">50</span><span class="p">),</span>
                     <span class="dl">'</span><span class="s1">background: #FFF; color: #FF0000; font-style: italic; border:solid 1px #000;</span><span class="dl">'</span>
                     <span class="p">)</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">â”‰</span><span class="dl">"</span><span class="p">.</span><span class="nx">repeat</span><span class="p">(</span><span class="mi">63</span><span class="p">))</span>
                  <span class="kd">var</span> <span class="nx">issue</span> <span class="o">=</span> <span class="p">{</span>
                     <span class="na">id</span><span class="p">:</span> <span class="nx">_id</span><span class="p">,</span>
                     <span class="na">issues</span><span class="p">:</span> <span class="nx">eventIssue</span><span class="p">,</span>
                     <span class="na">content</span><span class="p">:</span> <span class="nx">eventTxt</span><span class="p">,</span>
                     <span class="na">contentO</span><span class="p">:</span> <span class="nx">eventOriginalTxt</span><span class="p">,</span>
                     <span class="na">start_tcf</span><span class="p">:</span> <span class="nx">start_tcf</span><span class="p">,</span>
                     <span class="na">end_tcf</span><span class="p">:</span> <span class="nx">end_tcf</span><span class="p">,</span>
                     <span class="na">start_frames</span><span class="p">:</span> <span class="nx">start_frames</span><span class="p">,</span>
                     <span class="na">end_frames</span><span class="p">:</span> <span class="nx">end_frames</span><span class="p">,</span>
                     <span class="na">start_time</span><span class="p">:</span> <span class="nx">start_time</span><span class="p">,</span>
                     <span class="na">end_time</span><span class="p">:</span> <span class="nx">end_time</span><span class="p">,</span>
                     <span class="na">duration</span><span class="p">:</span> <span class="nx">delta</span><span class="p">,</span>
                     <span class="na">cps</span><span class="p">:</span> <span class="nx">cps</span><span class="p">,</span>
                     <span class="na">html_cps</span><span class="p">:</span> <span class="nx">html_cps</span><span class="p">,</span>
                     <span class="na">dur_tcf</span><span class="p">:</span> <span class="nx">dur_tcf</span><span class="p">,</span>
                     <span class="na">special</span><span class="p">:</span> <span class="nx">eventSpecial</span>
                  <span class="p">}</span>
                  <span class="nx">htmlize</span><span class="p">(</span><span class="nx">issue</span><span class="p">)</span>
                  <span class="k">if</span><span class="p">(</span><span class="nx">eventFixedTxt</span> <span class="o">!==</span> <span class="nx">eventOriginalTxt</span><span class="p">)</span>
                  <span class="p">{</span>
                     <span class="nx">fSRT</span><span class="p">[</span><span class="nx">srtId</span><span class="p">][</span><span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">]</span> <span class="o">=</span> <span class="nx">eventFixedTxt</span>
                  <span class="p">}</span>
               <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">events_detected</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">%c</span><span class="dl">'</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">No issues detected</span><span class="dl">"</span><span class="p">,</span>
                  <span class="dl">'</span><span class="s1">background: #12343b; color: #66ff00</span><span class="dl">'</span><span class="p">)</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">htmlize</span><span class="p">(</span><span class="nx">issue</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="k">try</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">original</span> <span class="o">=</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">contentO</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;b&gt;&lt;/b&gt;</span><span class="dl">'</span><span class="p">,</span>
                     <span class="dl">''</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/{.an.}/g</span><span class="p">,</span> <span class="dl">''</span><span class="p">)</span>
                  <span class="kd">var</span> <span class="nx">lines</span> <span class="o">=</span> <span class="nx">original</span>
               <span class="p">}</span>
               <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">lines</span> <span class="o">=</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">content</span><span class="p">;</span>
               <span class="p">}</span>
               <span class="nx">lines</span> <span class="o">=</span> <span class="nx">lines</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">\n</span><span class="sr">/g</span><span class="p">,</span> <span class="dl">'</span><span class="s1">â</span><span class="dl">'</span><span class="p">);</span>
               <span class="nx">lines</span> <span class="o">=</span> <span class="nx">lines</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">\s</span><span class="sr">/g</span><span class="p">,</span>
                  <span class="dl">"</span><span class="s2">&lt;span class='cSpace'&gt;âµ&lt;/span&gt;</span><span class="dl">"</span><span class="p">);</span>
               <span class="nx">lines</span> <span class="o">=</span> <span class="nx">lines</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/â/g</span><span class="p">,</span>
                  <span class="dl">"</span><span class="s2">&lt;span class='cSpace' style=</span><span class="se">\"</span><span class="s2">color: #00fa00;</span><span class="se">\"</span><span class="s2">&gt;â&lt;/span&gt;</span><span class="se">\n</span><span class="dl">"</span>
                  <span class="p">);</span>
               <span class="nx">lines</span> <span class="o">=</span> <span class="nx">lines</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="p">);</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">issue</span><span class="p">.</span><span class="nx">special</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">check_length</span> <span class="o">=</span> <span class="nx">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span>
                  <span class="nx">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">special</span>
                  <span class="k">if</span><span class="p">(</span><span class="nx">check_length</span> <span class="o">&gt;</span> <span class="nx">line_limit</span><span class="p">)</span>
                  <span class="p">{</span>
                     <span class="kd">var</span> <span class="nx">save_l0</span> <span class="o">=</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">special</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span>
                        <span class="nx">line_limit</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
                     <span class="nx">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">special</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span>
                           <span class="nx">line_limit</span> <span class="o">-</span> <span class="mi">1</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">\s</span><span class="sr">/g</span><span class="p">,</span>
                           <span class="dl">"</span><span class="s2">&lt;span class='cSpace'&gt;âµ&lt;/span&gt;</span><span class="dl">"</span><span class="p">)</span> <span class="o">+</span>
                        <span class="nx">save_l0</span>
                  <span class="p">}</span>
               <span class="p">}</span>
               <span class="kd">var</span> <span class="nx">timedTextEvent</span> <span class="o">=</span>
                  <span class="dl">'</span><span class="s1">&lt;div class="TimedTextEvent" style="width: 700px; max-width: 100%;"&gt;</span><span class="dl">'</span> <span class="o">+</span>
                  <span class="dl">'</span><span class="s1">&lt;div class="details"&gt;</span><span class="dl">'</span> <span class="o">+</span>
                  <span class="dl">'</span><span class="s1">&lt;div class="timing"&gt;&lt;span class="TimeCode"&gt;</span><span class="dl">'</span> <span class="o">+</span>
                  <span class="nx">issue</span><span class="p">.</span><span class="nx">start_tcf</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">&lt;/span&gt;</span><span class="dl">'</span> <span class="o">+</span>
                  <span class="dl">'</span><span class="s1">&lt;span class="TimeCode"&gt;</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">end_tcf</span> <span class="o">+</span>
                  <span class="dl">'</span><span class="s1">&lt;/span&gt;&lt;/div&gt;&lt;div class="content"&gt;&lt;div class="header"&gt;</span><span class="dl">'</span> <span class="o">+</span>
                  <span class="dl">'</span><span class="s1">&lt;span class="index"&gt;</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">&lt;/span&gt;</span><span class="dl">'</span> <span class="o">+</span>
                  <span class="nx">issue</span><span class="p">.</span><span class="nx">html_cps</span> <span class="o">+</span>
                  <span class="dl">'</span><span class="s1">&lt;span class="duration"&gt;&lt;span class="TimeCode"&gt;</span><span class="dl">'</span> <span class="o">+</span>
                  <span class="nx">issue</span><span class="p">.</span><span class="nx">dur_tcf</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">&lt;/span&gt;&lt;/span&gt;</span><span class="dl">'</span> <span class="o">+</span>
                  <span class="dl">'</span><span class="s1">&lt;/div&gt;&lt;div class="StyledTextEditor" dir="ltr" style="position:relative; top:-20px;"&gt;</span><span class="dl">'</span> <span class="o">+</span>
                  <span class="dl">'</span><span class="s1">&lt;pre&gt;&lt;span&gt;</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
               <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="dl">""</span>
               <span class="p">}</span>
               <span class="nx">timedTextEvent</span> <span class="o">+=</span> <span class="dl">'</span><span class="s1">&lt;/span&gt;&lt;div&gt;&lt;span&gt;</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span>
                  <span class="dl">'</span><span class="s1">&lt;/span&gt;&lt;/div&gt;</span><span class="dl">'</span>
               <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">lines</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">timedTextEvent</span> <span class="o">+=</span>
                     <span class="dl">'</span><span class="s1">&lt;div&gt;&lt;span style="color:red;"&gt;</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">lines</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span>
                     <span class="dl">'</span><span class="s1">&lt;/span&gt;&lt;/div&gt;&lt;/pre&gt;</span><span class="dl">'</span>
               <span class="p">}</span>
               <span class="k">else</span>
               <span class="p">{</span>
                  <span class="nx">timedTextEvent</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">&lt;/pre&gt;</span><span class="dl">"</span>
               <span class="p">}</span>
               <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">each_issue</span> <span class="k">of</span> <span class="nx">issue</span><span class="p">.</span><span class="nx">issues</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="kd">var</span> <span class="nx">issueWithImg</span> <span class="o">=</span>
                     <span class="dl">'</span><span class="s1">&lt;div style="vertical-align:middle;float:left;"&gt;</span><span class="dl">'</span> <span class="o">+</span>
                     <span class="dl">"</span><span class="s2">&lt;span class='issue'&gt;</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">each_issue</span> <span class="o">+</span>
                     <span class="dl">"</span><span class="s2">&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;</span><span class="dl">"</span>
                  <span class="nx">timedTextEvent</span> <span class="o">+=</span> <span class="nx">issueWithImg</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">&lt;br /&gt;</span><span class="dl">"</span>
               <span class="p">}</span>
               <span class="nx">reportHtml</span> <span class="o">+=</span> <span class="nx">timedTextEvent</span> <span class="o">+</span>
                  <span class="dl">"</span><span class="s2">&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</span><span class="dl">"</span>
               <span class="nx">evTotal</span><span class="o">++</span>
            <span class="p">}</span>
            <span class="kd">var</span> <span class="nx">withSC</span> <span class="o">=</span> <span class="dl">''</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">shotChanges</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="nx">withSC</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">_withShotChanges</span><span class="dl">"</span>
            <span class="p">}</span>
            <span class="kd">var</span> <span class="nx">fixesFilename</span> <span class="o">=</span> <span class="nx">srtName</span><span class="p">(</span><span class="dl">"</span><span class="s2">Fixes_</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">LANG</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">_</span><span class="dl">"</span> <span class="o">+</span>
               <span class="nx">fps_</span> <span class="o">+</span> <span class="nx">withSC</span><span class="p">)</span>
            <span class="kd">var</span> <span class="nx">fixedSrtFull</span> <span class="o">=</span> <span class="nx">parsed2srt</span><span class="p">(</span><span class="nx">fSRT</span><span class="p">)</span>
            <span class="nx">fixedSrtFull</span> <span class="o">=</span> <span class="nx">fixedSrtFull</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/ &lt;b&gt;&lt;</span><span class="se">\/</span><span class="sr">b&gt;/g</span><span class="p">,</span>
               <span class="dl">'</span><span class="s1">&lt;b&gt;&lt;/b&gt;</span><span class="dl">'</span><span class="p">)</span>
            <span class="kd">var</span> <span class="nx">suggestedFixesTxt</span> <span class="o">=</span>
               <span class="dl">'</span><span class="s1">&lt;a id="FixedTaskSRT" download="</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">fixesFilename</span> <span class="o">+</span>
               <span class="dl">'</span><span class="s1">" href="data:text/plain;charset=utf-8,</span><span class="dl">'</span> <span class="o">+</span>
               <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">fixedSrtFull</span><span class="p">)</span> <span class="o">+</span>
               <span class="dl">'</span><span class="s1">"&gt;&lt;button&gt;âœ&lt;/button&gt;&lt;/a&gt;</span><span class="dl">'</span>
            <span class="nx">qcMeta</span><span class="p">.</span><span class="nx">results</span> <span class="o">=</span> <span class="p">{</span>
               <span class="na">totalEventsAffected</span><span class="p">:</span> <span class="nx">evTotal</span><span class="p">,</span>
               <span class="na">majorIssuesFound</span><span class="p">:</span> <span class="nx">majTotal</span><span class="p">,</span>
               <span class="na">minorIssuesFound</span><span class="p">:</span> <span class="nx">minTotal</span><span class="p">,</span>
               <span class="na">shotChangeViolations_found</span><span class="p">:</span> <span class="nx">scTotal</span><span class="p">,</span>
               <span class="na">autoFixesDone</span><span class="p">:</span> <span class="nx">afTotal</span>
            <span class="p">}</span>

            <span class="kd">function</span> <span class="nx">getUnnamed</span><span class="p">()</span>
            <span class="p">{</span>
               <span class="kd">function</span> <span class="nx">n</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">e</span> <span class="o">=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">e</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">e</span><span class="o">--</span><span class="p">)</span>
                  <span class="p">{</span>
                     <span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="nx">e</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span>
                     <span class="p">[</span><span class="nx">n</span><span class="p">[</span><span class="nx">e</span><span class="p">],</span> <span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">n</span><span class="p">[</span><span class="nx">e</span><span class="p">]]</span>
                  <span class="p">}</span>
               <span class="p">}</span>
               <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">Beaver</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Koala</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Chipmunk</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Goat</span><span class="dl">"</span><span class="p">,</span>
                  <span class="dl">"</span><span class="s2">Duckling</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Cheetah</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Platypus</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Eagle</span><span class="dl">"</span><span class="p">,</span>
                  <span class="dl">"</span><span class="s2">Mongoose</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Butterfly</span><span class="dl">"</span>
               <span class="p">];</span>
               <span class="nx">n</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
               <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">An Intrepid</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">A Meek</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">A Feisty</span><span class="dl">"</span><span class="p">,</span>
                  <span class="dl">"</span><span class="s2">A Lazy</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">A Sly</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">An Unperturbed</span><span class="dl">"</span><span class="p">,</span>
                  <span class="dl">"</span><span class="s2">An Amused</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">A Rabid</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">A Very</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">A Really</span><span class="dl">"</span>
               <span class="p">];</span>
               <span class="nx">n</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
               <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2"> Little </span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2"> Humongous </span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2"> Tiny </span><span class="dl">"</span><span class="p">,</span>
                  <span class="dl">"</span><span class="s2"> Vain </span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2"> Finicky </span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2"> Cunning </span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2"> Exotic </span><span class="dl">"</span><span class="p">,</span>
                  <span class="dl">"</span><span class="s2"> Weary </span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2"> Opinionated </span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2"> Conniving </span><span class="dl">"</span>
               <span class="p">];</span>
               <span class="k">return</span> <span class="nx">n</span><span class="p">(</span><span class="nx">t</span><span class="p">),</span> <span class="nx">i</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">+</span> <span class="nx">t</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">+</span> <span class="nx">e</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
            <span class="p">}</span>
            <span class="nx">localStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="dl">"</span><span class="s2">shotChanges:</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">qcMeta</span><span class="p">.</span><span class="nx">clq</span><span class="p">)</span>
            <span class="kd">var</span> <span class="nx">qcMetaStr</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">`</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">qcMeta</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span>
               <span class="dl">"</span><span class="s2">`</span><span class="dl">"</span>
            <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">userName</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="nx">userName</span> <span class="o">=</span> <span class="nx">getUnnamed</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="nx">reportHtml</span> <span class="o">=</span> <span class="nx">reportHtml</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="s2">DLFIXSRTTOKEN</span><span class="dl">"</span><span class="p">,</span>
               <span class="nx">suggestedFixesTxt</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span>
               <span class="sr">/WATERMARKPLACEHOLDER/g</span><span class="p">,</span> <span class="nx">userIp</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span>
               <span class="dl">"</span><span class="s2">TITLEINFOTOKEN</span><span class="dl">"</span><span class="p">,</span> <span class="nx">titleInfo</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span>
               <span class="dl">"</span><span class="s2">TITLEINFOTOKEN</span><span class="dl">"</span><span class="p">,</span> <span class="nx">titleInfo</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span>
               <span class="dl">"</span><span class="s2">LINGUISTNAME</span><span class="dl">"</span><span class="p">,</span> <span class="nx">userName</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="s2">METADATATOKEN</span><span class="dl">"</span><span class="p">,</span>
               <span class="nx">qcMetaStr</span><span class="p">)</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">qcMeta</span><span class="p">.</span><span class="nx">results</span><span class="p">)</span>
            <span class="nx">download</span><span class="p">(</span><span class="nx">srtName</span><span class="p">(</span><span class="dl">"</span><span class="s2">Auto_QC_Log_</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">LANG</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">_</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">fps_</span> <span class="o">+</span>
               <span class="nx">withSC</span><span class="p">,</span> <span class="dl">"</span><span class="s2">.html</span><span class="dl">"</span><span class="p">),</span> <span class="nx">reportHtml</span><span class="p">)</span>
         <span class="p">}</span>
         <span class="k">return</span> <span class="nx">runAutoQC</span>
      <span class="p">})));</span>
      <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nb">global</span><span class="p">,</span> <span class="nx">factory</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="k">typeof</span> <span class="nx">exports</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">object</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">module</span> <span class="o">!==</span> <span class="dl">'</span><span class="s1">undefined</span><span class="dl">'</span> <span class="p">?</span>
            <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">factory</span><span class="p">()</span> <span class="p">:</span> <span class="k">typeof</span> <span class="nx">define</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">function</span><span class="dl">'</span> <span class="o">&amp;&amp;</span>
            <span class="nx">define</span><span class="p">.</span><span class="nx">amd</span> <span class="p">?</span> <span class="nx">define</span><span class="p">(</span><span class="nx">factory</span><span class="p">)</span> <span class="p">:</span> <span class="p">(</span><span class="nb">global</span><span class="p">.</span><span class="nx">parseSRT</span> <span class="o">=</span> <span class="nx">factory</span><span class="p">());</span>
      <span class="p">}(</span><span class="k">this</span><span class="p">,</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span>
      <span class="p">{</span>
         <span class="dl">'</span><span class="s1">use strict</span><span class="dl">'</span><span class="p">;</span>

         <span class="kd">function</span> <span class="nx">toSeconds</span><span class="p">(</span><span class="nx">time</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">time</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="s1">:</span><span class="dl">'</span><span class="p">);</span>
            <span class="k">try</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nx">t</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="s1">,</span><span class="dl">'</span><span class="p">);</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">s</span> <span class="o">=</span> <span class="nx">t</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="dl">'</span><span class="s1">.</span><span class="dl">'</span><span class="p">);</span>
               <span class="p">}</span>
               <span class="k">return</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">t</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3600</span> <span class="o">+</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">t</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                  <span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">+</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">s</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">s</span><span class="p">[</span>
                  <span class="mi">1</span><span class="p">],</span> <span class="mi">10</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>
         <span class="p">}</span>

         <span class="kd">function</span> <span class="nx">nextNonEmptyLine</span><span class="p">(</span><span class="nx">linesArray</span><span class="p">,</span> <span class="nx">position</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">idx</span> <span class="o">=</span> <span class="nx">position</span><span class="p">;</span>
            <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="nx">linesArray</span><span class="p">[</span><span class="nx">idx</span><span class="p">])</span>
            <span class="p">{</span>
               <span class="nx">idx</span><span class="o">++</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">idx</span><span class="p">;</span>
         <span class="p">}</span>

         <span class="kd">function</span> <span class="nx">lastNonEmptyLine</span><span class="p">(</span><span class="nx">linesArray</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">idx</span> <span class="o">=</span> <span class="nx">linesArray</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="k">while</span><span class="p">(</span><span class="nx">idx</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">linesArray</span><span class="p">[</span><span class="nx">idx</span><span class="p">])</span>
            <span class="p">{</span>
               <span class="nx">idx</span><span class="o">--</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">idx</span><span class="p">;</span>
         <span class="p">}</span>

         <span class="kd">function</span> <span class="nx">parseSRT</span><span class="p">()</span>
         <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!==</span>
               <span class="kc">undefined</span> <span class="p">?</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">:</span> <span class="dl">''</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">subs</span> <span class="o">=</span> <span class="p">[];</span>
            <span class="kd">var</span> <span class="nx">lines</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/</span><span class="se">(?:\r\n</span><span class="sr">|</span><span class="se">\r</span><span class="sr">|</span><span class="se">\n)</span><span class="sr">/gm</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">endIdx</span> <span class="o">=</span> <span class="nx">lastNonEmptyLine</span><span class="p">(</span><span class="nx">lines</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">idx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">time</span> <span class="o">=</span> <span class="k">void</span> <span class="mi">0</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">text</span> <span class="o">=</span> <span class="k">void</span> <span class="mi">0</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">sub</span> <span class="o">=</span> <span class="k">void</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">endIdx</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="nx">sub</span> <span class="o">=</span> <span class="p">{};</span>
               <span class="nx">text</span> <span class="o">=</span> <span class="p">[];</span>
               <span class="nx">i</span> <span class="o">=</span> <span class="nx">nextNonEmptyLine</span><span class="p">(</span><span class="nx">lines</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
               <span class="nx">sub</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">],</span> <span class="mi">10</span><span class="p">);</span>
               <span class="nx">time</span> <span class="o">=</span> <span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="sr">/</span><span class="se">[\t</span><span class="sr"> </span><span class="se">]</span><span class="sr">*--&gt;</span><span class="se">[\t</span><span class="sr"> </span><span class="se">]</span><span class="sr">*/</span><span class="p">);</span>
               <span class="nx">sub</span><span class="p">.</span><span class="nx">start</span> <span class="o">=</span> <span class="nx">toSeconds</span><span class="p">(</span><span class="nx">time</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
               <span class="nx">idx</span> <span class="o">=</span> <span class="nx">time</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">indexOf</span><span class="p">(</span><span class="dl">'</span><span class="s1"> </span><span class="dl">'</span><span class="p">);</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">idx</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">time</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">time</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">idx</span><span class="p">);</span>
               <span class="p">}</span>
               <span class="nx">sub</span><span class="p">.</span><span class="nx">end</span> <span class="o">=</span> <span class="nx">toSeconds</span><span class="p">(</span><span class="nx">time</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
               <span class="k">while</span><span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">endIdx</span> <span class="o">&amp;&amp;</span> <span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span>
               <span class="p">{</span>
                  <span class="nx">text</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">]);</span>
               <span class="p">}</span>
               <span class="nx">sub</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="dl">'</span><span class="se">\\</span><span class="s1">N</span><span class="dl">'</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/{.an8}/</span><span class="p">,</span>
                  <span class="dl">'</span><span class="s1">POSToppyTAG</span><span class="dl">'</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span>
                  <span class="sr">/</span><span class="se">\{(\\[\w]</span><span class="sr">+</span><span class="se">\(?([\w\d]</span><span class="sr">+,</span><span class="se">?)</span><span class="sr">+</span><span class="se">\)?)</span><span class="sr">+</span><span class="se">\}</span><span class="sr">/gi</span><span class="p">,</span> <span class="dl">''</span><span class="p">);</span>
               <span class="nx">sub</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">sub</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&lt;/g</span><span class="p">,</span> <span class="dl">'</span><span class="s1">&amp;lt;</span><span class="dl">'</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span>
                  <span class="sr">/&gt;/g</span><span class="p">,</span> <span class="dl">'</span><span class="s1">&amp;gt;</span><span class="dl">'</span><span class="p">);</span>
               <span class="nx">sub</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">sub</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span>
                  <span class="sr">/&amp;lt;</span><span class="se">(\/?(</span><span class="sr">font|b|u|i|s</span><span class="se">))((\s</span><span class="sr">+</span><span class="se">(\w</span><span class="sr">|</span><span class="se">\w[\w\-]</span><span class="sr">*</span><span class="se">\w)(\s</span><span class="sr">*=</span><span class="se">\s</span><span class="sr">*</span><span class="se">(?:</span><span class="sr">".*</span><span class="se">?</span><span class="sr">"|'.*</span><span class="se">?</span><span class="sr">'|</span><span class="se">[^</span><span class="sr">'"&gt;</span><span class="se">\s]</span><span class="sr">+</span><span class="se">))?)</span><span class="sr">+</span><span class="se">\s</span><span class="sr">*|</span><span class="se">\s</span><span class="sr">*</span><span class="se">)(\/?)</span><span class="sr">&amp;gt;/gi</span><span class="p">,</span>
                  <span class="dl">'</span><span class="s1">&lt;$1$3$7&gt;</span><span class="dl">'</span><span class="p">);</span>
               <span class="nx">sub</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">sub</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">\\</span><span class="sr">N/gi</span><span class="p">,</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="p">);</span>
               <span class="nx">sub</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">sub</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="dl">'</span><span class="s1">POSToppyTAG</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">{</span><span class="se">\\</span><span class="s1">an8}</span><span class="dl">'</span><span class="p">)</span>
               <span class="nx">subs</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">sub</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nx">subs</span><span class="p">;</span>
         <span class="p">}</span>
         <span class="k">return</span> <span class="nx">parseSRT</span><span class="p">;</span>
      <span class="p">})));</span>
      <span class="nx">setShotChanges</span><span class="p">()</span>
      <span class="nx">defer</span><span class="p">(</span><span class="nx">runAutoQC</span><span class="p">)</span>
   <span class="p">})()</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">imarunettuDoubleExportSRT</span><span class="p">()</span>
<span class="p">{</span>
   <span class="p">(</span><span class="kd">function</span> <span class="p">()</span>
   <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">our_clq</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2">=</span><span class="dl">"</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span>
         <span class="dl">"</span><span class="s2">:</span><span class="dl">"</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span>
      <span class="kd">var</span> <span class="nx">clq_pattern</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span>
         <span class="dl">'</span><span class="s1">^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$</span><span class="dl">'</span><span class="p">,</span>
         <span class="dl">'</span><span class="s1">i</span><span class="dl">'</span><span class="p">);</span>
      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">our_clq</span> <span class="o">||</span> <span class="o">!</span><span class="nx">clq_pattern</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">our_clq</span><span class="p">))</span>
      <span class="p">{</span>
         <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">You must be in a started, saved Originator task!</span><span class="dl">"</span><span class="p">);</span>
         <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span>
      <span class="p">}</span>
      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">clq_pattern</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">our_clq</span><span class="p">))</span>
      <span class="p">{</span>
         <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">The CLQ is invalid: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">our_clq</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span>
            <span class="dl">"</span><span class="s2">Please report me to the developer.</span><span class="dl">"</span><span class="p">);</span>
         <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span>
      <span class="p">}</span>
      <span class="kd">var</span> <span class="nx">bilingualHtml</span> <span class="o">=</span> <span class="s2">`&lt;head&gt;
    &lt;script&gt;
        var prevScrollpos=window.pageYOffset;
window.onscroll=function() {
    var currentScrollPos=window.pageYOffset;
    if (prevScrollpos &gt; currentScrollPos) {
        document.getElementById("navbar").style.top="0";
    }
    else {
        document.getElementById("navbar").style.top="-50px";
    }
    prevScrollpos=currentScrollPos;
}

&lt;/script&gt;
&lt;style&gt;#navbar {
    background-color: #333;
    top: 0;
    position: fixed;
    width: 80%;
    left: 10%;
    transition: top 0.5s;
    margin-left: auto;
    margin-right: auto;
    opacity: 0.7;
}

#navbar a {
    float: left;
    display: block;
    color: white;
    text-align: center;
    padding: 5px;
    text-decoration: none;
}

#navbar a:hover {
    background-color: #ddd;
    color: black;
}

body {
    background: #212121;
    color: grey;
}

table {
    width: 80%;
    table-layout: fixed;
    text-align: center;
    margin-left: auto;
    margin-right: auto;
    margin-top: 60px;
        border-collapse: collapse;

}

thead,
tbody,
td,
tr
 {
    display: block;
    font-family: monospace; 

}

tr {

background-image: linear-gradient(to right, darkgrey 30%, rgba(255,255,255,0) 0%);
background-position: bottom;
background-size: 3px 1px;
background-repeat: repeat-x;
}

tr:after {
    content: ' ';
    display: block;
    visibility: hidden;
    clear: both;
        border-bottom: 1px solid #ccc;

}

  #titleinfo {
            color: #fffff0;
            font-weight: bolder;
            font-style: normal;
            font-family: Roboto;
            font-size: 150%;
            margin-left: 55px;
            margin-top: 8px;
            flex-shrink: 1;
            width: 800px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: inline-block;
            }


thead th {
    height: 30px;
    /*text-align: left;*/
}


thead {
    /* fallback */
}

tbody td,
thead th {
    width: 33%;
    float: left;
}

tr:hover {
    color: darkgrey;
}


    &lt;/style&gt;
&lt;head&gt;&lt;body&gt;
         &lt;div id="navbar"&gt;
              &lt;a href="TITLELINK"&gt;&lt;img id="logonetflix" width="auto" height="32" src="https://upload.wikimedia.org/wikipedia/commons/0/08/Netflix_2015_logo.svg" title="Backup made on TITLEDATE"&gt;&lt;/a&gt;
              &lt;span id="titleinfo" title="TITLEINFO"&gt;TITLEINFO (TITLEDATE)&lt;/span&gt;&lt;/div&gt;
&lt;table&gt;
    &lt;thead&gt;
    &lt;tr&gt;
        &lt;th&gt;&lt;b&gt;&lt;u&gt;In-cue/Out-cue&lt;/b&gt;&lt;/u&gt;&lt;/th&gt;
        &lt;th&gt;&lt;b&gt;&lt;u&gt;Source&lt;/b&gt;&lt;/u&gt;&lt;/th&gt;
        &lt;th&gt;&lt;b&gt;&lt;u&gt;Translation&lt;/b&gt;&lt;/u&gt;&lt;/th&gt;
    &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
    `</span>
      <span class="kd">var</span> <span class="nx">lsJson</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">[</span><span class="dl">"</span><span class="s2">clq:origination:</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">our_clq</span><span class="p">]</span>
      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">lsJson</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Timed text events not found in localStorage</span><span class="se">\n</span><span class="s2">for CLQ: </span><span class="dl">"</span> <span class="o">+</span>
            <span class="nx">our_clq</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">If the CLQ is correct and</span><span class="dl">"</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span>
            <span class="dl">"</span><span class="se">\"</span><span class="s2">Save to local storage</span><span class="se">\"</span><span class="s2"> is enabled in Settings,</span><span class="dl">"</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span>
            <span class="dl">"</span><span class="s2">save the task and try again.</span><span class="dl">"</span><span class="p">);</span>
         <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span>
      <span class="p">}</span>
      <span class="kd">var</span> <span class="nx">json_obj</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">lsJson</span><span class="p">)</span>
      <span class="kd">var</span> <span class="nx">src</span> <span class="o">=</span> <span class="nx">json_obj</span><span class="p">[</span><span class="dl">"</span><span class="s2">events</span><span class="dl">"</span><span class="p">]</span>
      <span class="kd">var</span> <span class="nx">fps_</span> <span class="o">=</span> <span class="nx">json_obj</span><span class="p">[</span><span class="dl">"</span><span class="s2">meta</span><span class="dl">"</span><span class="p">][</span><span class="dl">"</span><span class="s2">fps</span><span class="dl">"</span><span class="p">]</span>
      <span class="kd">var</span> <span class="nx">fps</span> <span class="o">=</span> <span class="nx">fps_</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2">_</span><span class="dl">"</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">100</span>
      <span class="c1">//From {"fps":"FPS_2500"}</span>
      <span class="kd">var</span> <span class="nx">proposed_fps</span> <span class="o">=</span> <span class="nx">prompt</span><span class="p">(</span>
         <span class="dl">"</span><span class="s2">DOUBLE EXPORT SRT reportsâ€¦</span><span class="se">\n\n</span><span class="s2">Press Enter to accept framerate of </span><span class="dl">"</span> <span class="o">+</span>
         <span class="nx">fps</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> or enter new as 2400 or 2997:</span><span class="dl">"</span><span class="p">);</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">proposed_fps</span> <span class="o">!==</span> <span class="dl">""</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">int_fps</span> <span class="o">=</span> <span class="nx">proposed_fps</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
         <span class="kd">var</span> <span class="nx">decimal_fps</span> <span class="o">=</span> <span class="nx">proposed_fps</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nx">proposed_fps</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
         <span class="nx">fps_</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">FPS</span><span class="dl">"</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">_</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">int_fps</span> <span class="o">+</span> <span class="nx">decimal_fps</span>
         <span class="nx">fps</span> <span class="o">=</span> <span class="p">(</span><span class="nx">int_fps</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">.</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">decimal_fps</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="kd">var</span> <span class="nx">mid</span> <span class="o">=</span> <span class="nx">json_obj</span><span class="p">[</span><span class="dl">"</span><span class="s2">meta</span><span class="dl">"</span><span class="p">][</span><span class="dl">"</span><span class="s2">movieId</span><span class="dl">"</span><span class="p">]</span>
      <span class="kd">var</span> <span class="nx">pid</span> <span class="o">=</span> <span class="nx">json_obj</span><span class="p">[</span><span class="dl">"</span><span class="s2">meta</span><span class="dl">"</span><span class="p">][</span><span class="dl">"</span><span class="s2">packageId</span><span class="dl">"</span><span class="p">]</span>
      <span class="kd">var</span> <span class="nx">which_url</span> <span class="o">=</span> <span class="nx">prompt</span><span class="p">(</span>
         <span class="dl">"</span><span class="s2">DOUBLE EXPORT SRT reportsâ€¦</span><span class="se">\n\n</span><span class="s2">Press Enter to try the template. Enter anything to go for CC.</span><span class="dl">"</span>
         <span class="p">)</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">which_url</span> <span class="o">==</span> <span class="dl">""</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">template_url</span> <span class="o">=</span>
            <span class="dl">"</span><span class="s2">https://originator.backlot.netflix.com/api/request/timedText/</span><span class="dl">"</span> <span class="o">+</span>
            <span class="nx">our_clq</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">pid</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">mid</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/en/TEMPLATE/PRIMARY/</span><span class="dl">'</span> <span class="o">+</span>
            <span class="nx">fps_</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">?source=ORIGINATOR</span><span class="dl">'</span>
      <span class="p">}</span>
      <span class="k">else</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">template_url</span> <span class="o">=</span>
            <span class="dl">"</span><span class="s2">https://originator.backlot.netflix.com/api/request/timedText/</span><span class="dl">"</span> <span class="o">+</span>
            <span class="nx">our_clq</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">pid</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">mid</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/en/CC/PRIMARY/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">fps_</span> <span class="o">+</span>
            <span class="dl">'</span><span class="s1">?source=ARCHIVE</span><span class="dl">'</span>
      <span class="p">}</span>
      <span class="kd">var</span> <span class="nx">targetFilename</span> <span class="o">=</span> <span class="nx">srtName</span><span class="p">(</span><span class="nx">fps_</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">_TRANSLATION</span><span class="dl">"</span><span class="p">)</span>
      <span class="kd">var</span> <span class="nx">sourceFilename</span> <span class="o">=</span> <span class="nx">srtName</span><span class="p">(</span><span class="nx">fps_</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">_SOURCE</span><span class="dl">"</span><span class="p">)</span>
      <span class="kd">var</span> <span class="nx">backupFilename</span> <span class="o">=</span> <span class="nx">srtName</span><span class="p">(</span><span class="nx">fps_</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">_BILINGUAL_TABLE</span><span class="dl">"</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="s2">.srt</span><span class="dl">"</span><span class="p">,</span>
         <span class="dl">"</span><span class="s2">.html</span><span class="dl">"</span><span class="p">)</span>
      <span class="kd">var</span> <span class="nx">frms</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">/</span> <span class="nx">fps</span>
      <span class="k">async</span> <span class="kd">function</span> <span class="nx">getSourceColumnEvents</span><span class="p">()</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="p">(</span><span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">template_url</span><span class="p">)).</span><span class="nx">json</span><span class="p">();</span>
         <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">async</span> <span class="kd">function</span> <span class="nx">delayedDownload</span><span class="p">()</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getSourceColumnEvents</span><span class="p">();</span>
         <span class="nx">download</span><span class="p">(</span><span class="nx">sourceFilename</span><span class="p">,</span> <span class="nx">array2srt</span><span class="p">(</span><span class="nx">result</span><span class="p">))</span>
         <span class="c1">//  download(backupFilename, arrays2html(result, src),"html" )</span>
      <span class="p">}</span>
      <span class="nx">delayedDownload</span><span class="p">()</span>
      <span class="nx">download</span><span class="p">(</span><span class="nx">targetFilename</span><span class="p">,</span> <span class="nx">array2srt</span><span class="p">(</span><span class="nx">src</span><span class="p">))</span>

      <span class="kd">function</span> <span class="nx">srtName</span><span class="p">(</span><span class="nx">suffix</span> <span class="o">=</span> <span class="dl">""</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="dl">"</span><span class="s2">cpe-page-menu-label</span><span class="dl">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="p">.</span><span class="nx">innerText</span>
         <span class="kd">var</span> <span class="nx">srtName</span> <span class="o">=</span> <span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">[</span><span class="sr"> </span><span class="se">]</span><span class="sr">/g</span><span class="p">,</span> <span class="dl">'</span><span class="s1">_</span><span class="dl">'</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">[^</span><span class="sr">a-z0-9_</span><span class="se">]</span><span class="sr">/gi</span><span class="p">,</span> <span class="dl">''</span><span class="p">)</span> <span class="o">+</span>
               <span class="nx">suffix</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">.srt</span><span class="dl">"</span>
               <span class="p">)</span> <span class="c1">//This gets rid of all punctuation, spaces and non-English letters</span>
            <span class="p">.</span><span class="nx">trim</span><span class="p">()</span> <span class="c1">//resulting in a name like 14545_El_Burrito_A_Breaking_Fat_Movie_FPS_2500.srt</span>
         <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">srtName</span><span class="p">)</span> <span class="nx">srtName</span> <span class="o">=</span> <span class="nx">our_clq</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">_</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">suffix</span> <span class="o">+</span>
            <span class="dl">"</span><span class="s2">.srt</span><span class="dl">"</span> <span class="c1">//Fallback measure. Useful for debugging later</span>
         <span class="k">return</span> <span class="nx">srtName</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">frames2timecode</span><span class="p">(</span><span class="nx">frames</span><span class="p">)</span>
      <span class="p">{</span> <span class="c1">//frames to 00:01:02,000 format</span>
         <span class="kd">var</span> <span class="nx">milliseconds</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">frames</span> <span class="o">*</span> <span class="nx">frms</span><span class="p">)</span>
         <span class="kd">var</span> <span class="nx">srt_timecode</span> <span class="o">=</span> <span class="nx">TimeConversion</span><span class="p">(</span><span class="nx">milliseconds</span><span class="p">)</span>
         <span class="k">return</span> <span class="nx">srt_timecode</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">merge_same</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">merged</span> <span class="o">=</span> <span class="p">[]</span>
         <span class="kd">var</span> <span class="nx">skip_next</span> <span class="o">=</span> <span class="kc">false</span>
         <span class="k">for</span><span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">skip_next</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="nx">thisEvent</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
               <span class="nx">nextEvent</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">thisEvent</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="nx">nextEvent</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
               <span class="p">{</span>
                  <span class="nx">skip_next</span> <span class="o">=</span> <span class="kc">true</span>
                  <span class="nx">thisEvent</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">thisEvent</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">nextEvent</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                  <span class="nx">thisEvent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">nextEvent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
               <span class="p">}</span>
               <span class="nx">merged</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">thisEvent</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
               <span class="nx">skip_next</span> <span class="o">=</span> <span class="kc">false</span>
            <span class="p">}</span>
         <span class="p">}</span>
         <span class="k">return</span> <span class="nx">merged</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">arrays2html</span><span class="p">(</span><span class="nx">events_object</span><span class="p">,</span> <span class="nx">events_object2</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">ordered_events</span> <span class="o">=</span> <span class="p">[]</span>
         <span class="kd">var</span> <span class="nx">col</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">SRC</span><span class="dl">"</span>
         <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">id</span> <span class="k">in</span> <span class="nx">events_object</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">column</span><span class="dl">"</span><span class="p">]</span> <span class="o">=</span> <span class="nx">col</span>
            <span class="k">try</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">type_fn</span> <span class="o">=</span> <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">]</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">type_fn</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">fn</span><span class="dl">"</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">txt</span><span class="dl">"</span><span class="p">]</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">&lt;b&gt;&lt;/b&gt;</span><span class="dl">"</span><span class="p">;</span>
                  <span class="nx">type_fn</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
                  <span class="k">delete</span><span class="p">(</span><span class="nx">type_fn</span><span class="p">)</span>
               <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span>
            <span class="p">{}</span>
            <span class="nx">ordered_events</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span>
               <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">start</span><span class="dl">"</span><span class="p">],</span> <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">],</span>
               <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
               <span class="p">[</span><span class="dl">"</span><span class="s2">txt</span><span class="dl">"</span><span class="p">],</span>
               <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
               <span class="p">[</span><span class="dl">"</span><span class="s2">styles</span><span class="dl">"</span><span class="p">],</span>
               <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
               <span class="p">[</span><span class="dl">"</span><span class="s2">rgn</span><span class="dl">"</span><span class="p">],</span>
               <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
               <span class="p">[</span><span class="dl">"</span><span class="s2">column</span><span class="dl">"</span><span class="p">],</span>
            <span class="p">])</span>
         <span class="p">}</span>
         <span class="kd">var</span> <span class="nx">col</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">TRG</span><span class="dl">"</span>
         <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">id</span> <span class="k">in</span> <span class="nx">events_object2</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="nx">events_object2</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">column</span><span class="dl">"</span><span class="p">]</span> <span class="o">=</span> <span class="nx">col</span>
            <span class="nx">ordered_events</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span>
               <span class="nx">events_object2</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">start</span><span class="dl">"</span><span class="p">],</span> <span class="nx">events_object2</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">],</span>
               <span class="nx">events_object2</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
               <span class="p">[</span><span class="dl">"</span><span class="s2">txt</span><span class="dl">"</span><span class="p">],</span>
               <span class="nx">events_object2</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
               <span class="p">[</span><span class="dl">"</span><span class="s2">styles</span><span class="dl">"</span><span class="p">],</span>
               <span class="nx">events_object2</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
               <span class="p">[</span><span class="dl">"</span><span class="s2">rgn</span><span class="dl">"</span><span class="p">],</span>
               <span class="nx">events_object2</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
               <span class="p">[</span><span class="dl">"</span><span class="s2">column</span><span class="dl">"</span><span class="p">],</span>
            <span class="p">])</span>
         <span class="p">}</span>
         <span class="nx">ordered_events</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="k">return</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
         <span class="p">});</span> <span class="c1">//Array sorted by in_cues, sequentially</span>
         <span class="nx">ordered_events</span> <span class="o">=</span> <span class="nx">merge_same</span><span class="p">(</span><span class="nx">ordered_events</span><span class="p">)</span>
         <span class="c1">//    ordered_events.sort(function (a</span>
         <span class="c1">//        , b) {</span>
         <span class="c1">//        return a[1] - b[1];</span>
         <span class="c1">//    }); //Array sorted by out_cues this time, because merge_same changes some, sequentially</span>
         <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span>
         <span class="kd">var</span> <span class="nx">srt_txt</span> <span class="o">=</span> <span class="nx">bilingualHtml</span><span class="p">;</span>
         <span class="kd">var</span> <span class="nx">eol</span> <span class="o">=</span> <span class="dl">""</span>
         <span class="kd">var</span> <span class="nx">source_content</span> <span class="o">=</span> <span class="dl">''</span>
         <span class="k">for</span><span class="p">(</span><span class="nx">event</span> <span class="k">of</span> <span class="nx">ordered_events</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">start</span> <span class="o">=</span> <span class="nx">frames2timecode</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="kd">var</span> <span class="nx">end</span> <span class="o">=</span> <span class="nx">frames2timecode</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="kd">var</span> <span class="nx">startend</span> <span class="o">=</span> <span class="nx">start</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">end</span>
            <span class="k">try</span>
            <span class="p">{</span>
               <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">event</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">]</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">italic</span><span class="dl">"</span><span class="p">)</span>
                  <span class="p">{</span>
                     <span class="nx">content</span> <span class="o">=</span> <span class="nx">italicize</span><span class="p">(</span><span class="nx">content</span><span class="p">,</span> <span class="nx">event</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
                  <span class="p">}</span>
               <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span>
            <span class="p">{}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">SRC</span><span class="dl">"</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="nx">source_content</span> <span class="o">+=</span> <span class="nx">event</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
               <span class="nx">tr</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">&lt;tr&gt;&lt;td&gt;&lt;pre&gt;</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">startend</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;</span><span class="dl">'</span> <span class="o">+</span>
                  <span class="nx">source_content</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">event</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span>
                  <span class="dl">'</span><span class="s1">&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;</span><span class="dl">'</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="p">;</span>
               <span class="nx">srt_txt</span> <span class="o">+=</span> <span class="nx">tr</span><span class="p">;</span>
               <span class="nx">tr</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
               <span class="nx">source_content</span> <span class="o">=</span> <span class="dl">""</span>
            <span class="p">}</span>
         <span class="p">}</span>
         <span class="kd">var</span> <span class="nx">titleinfo</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span>
               <span class="dl">"</span><span class="s2">cpe-page-menu-label</span><span class="dl">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">innerText</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/ "/</span><span class="p">,</span> <span class="dl">"</span><span class="s2"> â€œ</span><span class="dl">"</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/"/</span><span class="p">,</span> <span class="dl">"</span><span class="s2">â€</span><span class="dl">"</span><span class="p">)</span>
         <span class="kd">var</span> <span class="nx">titlelink</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span>
         <span class="kd">var</span> <span class="nx">titledate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">().</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
         <span class="nx">srt_txt</span> <span class="o">=</span> <span class="nx">srt_txt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/TITLEINFO/g</span><span class="p">,</span> <span class="nx">titleinfo</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span>
            <span class="sr">/TITLELINK/</span><span class="p">,</span> <span class="nx">titlelink</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/TITLEDATE/g</span><span class="p">,</span> <span class="nx">titledate</span><span class="p">)</span>
         <span class="k">return</span> <span class="nx">srt_txt</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">array2srt</span><span class="p">(</span><span class="nx">events_object</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">ordered_events</span> <span class="o">=</span> <span class="p">[]</span>
         <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">id</span> <span class="k">in</span> <span class="nx">events_object</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="k">try</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">type_fn</span> <span class="o">=</span> <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">]</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">type_fn</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">fn</span><span class="dl">"</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">txt</span><span class="dl">"</span><span class="p">]</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">&lt;b&gt;&lt;/b&gt;</span><span class="dl">"</span><span class="p">;</span>
                  <span class="nx">type_fn</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
                  <span class="k">delete</span><span class="p">(</span><span class="nx">type_fn</span><span class="p">)</span>
               <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span>
            <span class="p">{}</span>
            <span class="nx">ordered_events</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span>
               <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">start</span><span class="dl">"</span><span class="p">],</span> <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">],</span>
               <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
               <span class="p">[</span><span class="dl">"</span><span class="s2">txt</span><span class="dl">"</span><span class="p">],</span>
               <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
               <span class="p">[</span><span class="dl">"</span><span class="s2">styles</span><span class="dl">"</span><span class="p">],</span>
               <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
               <span class="p">[</span><span class="dl">"</span><span class="s2">rgn</span><span class="dl">"</span><span class="p">]</span>
            <span class="p">])</span>
         <span class="p">}</span>
         <span class="nx">ordered_events</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="k">return</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
         <span class="p">});</span> <span class="c1">//Array sorted by in_cues, sequentially</span>
         <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span>
         <span class="kd">var</span> <span class="nx">srt_txt</span> <span class="o">=</span> <span class="dl">''</span>
         <span class="k">for</span><span class="p">(</span><span class="nx">event</span> <span class="k">of</span> <span class="nx">ordered_events</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="nx">index</span><span class="o">++</span>
            <span class="kd">var</span> <span class="nx">start</span> <span class="o">=</span> <span class="nx">frames2timecode</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="kd">var</span> <span class="nx">end</span> <span class="o">=</span> <span class="nx">frames2timecode</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="kd">var</span> <span class="nx">content</span> <span class="o">=</span> <span class="nx">event</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">try</span>
            <span class="p">{</span>
               <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">event</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">]</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">italic</span><span class="dl">"</span><span class="p">)</span>
                  <span class="p">{</span>
                     <span class="nx">content</span> <span class="o">=</span> <span class="nx">italicize</span><span class="p">(</span><span class="nx">content</span><span class="p">,</span> <span class="nx">event</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
                  <span class="p">}</span>
               <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span>
            <span class="p">{}</span>
            <span class="k">try</span>
            <span class="p">{</span>
               <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">event</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">top</span><span class="dl">"</span><span class="p">)</span>
                  <span class="p">{</span>
                     <span class="nx">content</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">{</span><span class="se">\\</span><span class="s2">an8}</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">content</span>
                  <span class="p">}</span>
               <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span>
            <span class="p">{}</span>
            <span class="k">try</span>
            <span class="p">{</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">fn</span><span class="dl">"</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">content</span> <span class="o">+=</span> <span class="dl">'</span><span class="s1">&lt;b&gt;&lt;/b&gt;</span><span class="dl">'</span>
               <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span>
            <span class="p">{}</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">content</span><span class="p">)</span>
            <span class="kd">var</span> <span class="nx">current_event</span> <span class="o">=</span> <span class="nx">index</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">start</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> --&gt; </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">end</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span>
               <span class="nx">content</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span>
            <span class="nx">srt_txt</span> <span class="o">+=</span> <span class="nx">current_event</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span>
         <span class="p">}</span>
         <span class="k">return</span> <span class="nx">srt_txt</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">italicize</span><span class="p">(</span><span class="nx">content</span><span class="p">,</span> <span class="nx">italics_array</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="nx">position_offset</span> <span class="o">=</span> <span class="mi">0</span>
         <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">italic</span> <span class="k">of</span> <span class="nx">italics_array</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">position_from</span> <span class="o">=</span> <span class="nx">italic</span><span class="p">[</span><span class="dl">"</span><span class="s2">from</span><span class="dl">"</span><span class="p">]</span> <span class="o">+</span> <span class="nx">position_offset</span><span class="p">;</span>
            <span class="nx">position_offset</span> <span class="o">+=</span> <span class="mi">3</span>
            <span class="nx">content</span> <span class="o">=</span> <span class="p">[</span><span class="nx">content</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">position_from</span><span class="p">),</span> <span class="dl">"</span><span class="s2">&lt;i&gt;</span><span class="dl">"</span><span class="p">,</span> <span class="nx">content</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span>
               <span class="nx">position_from</span><span class="p">)].</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">)</span>
            <span class="kd">var</span> <span class="nx">position_to</span> <span class="o">=</span> <span class="nx">italic</span><span class="p">[</span><span class="dl">"</span><span class="s2">to</span><span class="dl">"</span><span class="p">]</span> <span class="o">+</span> <span class="nx">position_offset</span><span class="p">;</span>
            <span class="nx">position_offset</span> <span class="o">+=</span> <span class="mi">4</span>
            <span class="nx">content</span> <span class="o">=</span> <span class="p">[</span><span class="nx">content</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">position_to</span><span class="p">),</span> <span class="dl">"</span><span class="s2">&lt;/i&gt;</span><span class="dl">"</span><span class="p">,</span> <span class="nx">content</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span>
               <span class="nx">position_to</span><span class="p">)].</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">)</span>
         <span class="p">}</span>
         <span class="k">return</span> <span class="nx">content</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">download</span><span class="p">(</span><span class="nx">filename</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">type</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">plain</span><span class="dl">"</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">);</span>
         <span class="nx">element</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">href</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">data:text/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">type</span> <span class="o">+</span>
            <span class="dl">'</span><span class="s1">;charset=utf-8,%EF%BB%BF</span><span class="dl">'</span> <span class="o">+</span> <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">text</span><span class="p">));</span>
         <span class="nx">element</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">download</span><span class="dl">'</span><span class="p">,</span> <span class="nx">filename</span><span class="p">);</span>
         <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">none</span><span class="dl">'</span><span class="p">;</span>
         <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
         <span class="nx">element</span><span class="p">.</span><span class="nx">click</span><span class="p">();</span>
         <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">TimeConversion</span><span class="p">(</span><span class="nx">duration</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kd">let</span> <span class="nx">time</span> <span class="o">=</span> <span class="nx">parseDuration</span><span class="p">(</span><span class="nx">duration</span><span class="p">)</span>
         <span class="k">return</span> <span class="nx">formatTimeHMSS</span><span class="p">(</span><span class="nx">time</span><span class="p">)</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">parseDuration</span><span class="p">(</span><span class="nx">duration</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kd">let</span> <span class="nx">remain</span> <span class="o">=</span> <span class="nx">duration</span>
         <span class="kd">let</span> <span class="nx">hours</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">remain</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">))</span>
         <span class="nx">remain</span> <span class="o">=</span> <span class="nx">remain</span> <span class="o">%</span> <span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
         <span class="kd">let</span> <span class="nx">minutes</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">remain</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span><span class="p">))</span>
         <span class="nx">remain</span> <span class="o">=</span> <span class="nx">remain</span> <span class="o">%</span> <span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
         <span class="kd">let</span> <span class="nx">seconds</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">remain</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1000</span><span class="p">))</span>
         <span class="nx">remain</span> <span class="o">=</span> <span class="nx">remain</span> <span class="o">%</span> <span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
         <span class="kd">let</span> <span class="nx">milliseconds</span> <span class="o">=</span> <span class="nx">remain</span>
         <span class="k">return</span> <span class="p">{</span>
            <span class="nx">hours</span><span class="p">,</span>
            <span class="nx">minutes</span><span class="p">,</span>
            <span class="nx">seconds</span><span class="p">,</span>
            <span class="nx">milliseconds</span>
         <span class="p">}</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">formatTimeHMSS</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kd">let</span> <span class="nx">hours</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">hours</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">hours</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">hours</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">hours</span>
         <span class="kd">let</span> <span class="nx">minutes</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">minutes</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">minutes</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">minutes</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">minutes</span>
         <span class="kd">let</span> <span class="nx">seconds</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">seconds</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">seconds</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">seconds</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">seconds</span>
         <span class="kd">let</span> <span class="nx">milliseconds</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">milliseconds</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">milliseconds</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">milliseconds</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">00</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">milliseconds</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">milliseconds</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)</span> <span class="nx">milliseconds</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">milliseconds</span>
         <span class="k">return</span> <span class="nx">hours</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">:</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">minutes</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">:</span><span class="dl">"</span> <span class="o">+</span>
            <span class="c1">//Example: 00:01:02,999 -- note that the SRT spec calls for a comma, not a period!</span>
            <span class="nx">seconds</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">,</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">milliseconds</span>
      <span class="p">}</span>
   <span class="p">})();</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">imarunettuBilingualExportHTML</span><span class="p">()</span>
<span class="p">{</span>
   <span class="p">(</span><span class="kd">function</span> <span class="p">()</span>
   <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">our_clq</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2">=</span><span class="dl">"</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span>
         <span class="dl">"</span><span class="s2">:</span><span class="dl">"</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span>
      <span class="kd">var</span> <span class="nx">clq_pattern</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span>
         <span class="dl">'</span><span class="s1">^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$</span><span class="dl">'</span><span class="p">,</span>
         <span class="dl">'</span><span class="s1">i</span><span class="dl">'</span><span class="p">);</span>
      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">our_clq</span> <span class="o">||</span> <span class="o">!</span><span class="nx">clq_pattern</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">our_clq</span><span class="p">))</span>
      <span class="p">{</span>
         <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">You must be in a started, saved Originator task!</span><span class="dl">"</span><span class="p">);</span>
         <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span>
      <span class="p">}</span>
      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">clq_pattern</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">our_clq</span><span class="p">))</span>
      <span class="p">{</span>
         <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">The CLQ is invalid: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">our_clq</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span>
            <span class="dl">"</span><span class="s2">Please report me to the developer.</span><span class="dl">"</span><span class="p">);</span>
         <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span>
      <span class="p">}</span>
      <span class="kd">var</span> <span class="nx">bilingualHtml</span> <span class="o">=</span> <span class="s2">`&lt;head&gt;
    &lt;script&gt;
        var prevScrollpos=window.pageYOffset;
window.onscroll=function() {
    var currentScrollPos=window.pageYOffset;
    if (prevScrollpos &gt; currentScrollPos) {
        document.getElementById("navbar").style.top="0";
    }
    else {
        document.getElementById("navbar").style.top="-50px";
    }
    prevScrollpos=currentScrollPos;
}

&lt;/script&gt;
&lt;style&gt;#navbar {
    background-color: #333;
    top: 0;
    position: fixed;
    width: 80%;
    left: 10%;
    transition: top 0.5s;
    margin-left: auto;
    margin-right: auto;
    opacity: 0.7;
}

#navbar a {
    float: left;
    display: block;
    color: white;
    text-align: center;
    padding: 5px;
    text-decoration: none;
}

#navbar a:hover {
    background-color: #ddd;
    color: black;
}

body {
    background: #212121;
    color: grey;
}

table {
    width: 80%;
    table-layout: fixed;
    text-align: center;
    margin-left: auto;
    margin-right: auto;
    margin-top: 60px;
        border-collapse: collapse;

}

thead,
tbody,
td,
tr
 {
    display: block;
    font-family: monospace; 

}

tr {

background-image: linear-gradient(to right, darkgrey 30%, rgba(255,255,255,0) 0%);
background-position: bottom;
background-size: 3px 1px;
background-repeat: repeat-x;
}

tr:after {
    content: ' ';
    display: block;
    visibility: hidden;
    clear: both;
        border-bottom: 1px solid #ccc;

}

  #titleinfo {
            color: #fffff0;
            font-weight: bolder;
            font-style: normal;
            font-family: Roboto;
            font-size: 150%;
            margin-left: 55px;
            margin-top: 8px;
            flex-shrink: 1;
            width: 800px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: inline-block;
            }


thead th {
    height: 30px;
    /*text-align: left;*/
}


thead {
}

tbody td,
thead th {
    width: 33%;
    float: left;
}

tr:hover {
    color: darkgrey;
}


    &lt;/style&gt;
&lt;head&gt;&lt;body&gt;
         &lt;div id="navbar"&gt;
              &lt;a href="TITLELINK"&gt;&lt;img id="logonetflix" width="auto" height="32" src="https://upload.wikimedia.org/wikipedia/commons/0/08/Netflix_2015_logo.svg" title="Backup made on TITLEDATE"&gt;&lt;/a&gt;
              &lt;span id="titleinfo" title="TITLEINFO"&gt;TITLEINFO (TITLEDATE)&lt;/span&gt;&lt;/div&gt;
&lt;table&gt;
    &lt;thead&gt;
    &lt;tr&gt;
        &lt;th&gt;&lt;b&gt;&lt;u&gt;In-cue/Out-cue&lt;/b&gt;&lt;/u&gt;&lt;/th&gt;
        &lt;th&gt;&lt;b&gt;&lt;u&gt;Source&lt;/b&gt;&lt;/u&gt;&lt;/th&gt;
        &lt;th&gt;&lt;b&gt;&lt;u&gt;Translation&lt;/b&gt;&lt;/u&gt;&lt;/th&gt;
    &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
    `</span>
      <span class="kd">var</span> <span class="nx">lsJson</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">[</span><span class="dl">"</span><span class="s2">clq:origination:</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">our_clq</span><span class="p">]</span>
      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">lsJson</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">Timed text events not found in localStorage</span><span class="se">\n</span><span class="s2">for CLQ: </span><span class="dl">"</span> <span class="o">+</span>
            <span class="nx">our_clq</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">If the CLQ is correct and</span><span class="dl">"</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span>
            <span class="dl">"</span><span class="se">\"</span><span class="s2">Save to local storage</span><span class="se">\"</span><span class="s2"> is enabled in Settings,</span><span class="dl">"</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span>
            <span class="dl">"</span><span class="s2">save the task and try again.</span><span class="dl">"</span><span class="p">);</span>
         <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span>
      <span class="p">}</span>
      <span class="kd">var</span> <span class="nx">json_obj</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">lsJson</span><span class="p">)</span>
      <span class="kd">var</span> <span class="nx">src</span> <span class="o">=</span> <span class="nx">json_obj</span><span class="p">[</span><span class="dl">"</span><span class="s2">events</span><span class="dl">"</span><span class="p">]</span>
      <span class="kd">var</span> <span class="nx">fps_</span> <span class="o">=</span> <span class="nx">json_obj</span><span class="p">[</span><span class="dl">"</span><span class="s2">meta</span><span class="dl">"</span><span class="p">][</span><span class="dl">"</span><span class="s2">fps</span><span class="dl">"</span><span class="p">]</span>
      <span class="kd">var</span> <span class="nx">fps</span> <span class="o">=</span> <span class="nx">fps_</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2">_</span><span class="dl">"</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">100</span>
      <span class="c1">//From {"fps":"FPS_2500"}</span>
      <span class="kd">var</span> <span class="nx">proposed_fps</span> <span class="o">=</span> <span class="nx">prompt</span><span class="p">(</span><span class="dl">"</span><span class="s2">Press Enter to accept framerate of </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">fps</span> <span class="o">+</span>
         <span class="dl">"</span><span class="s2"> or enter new as 2400 or 2997:</span><span class="dl">"</span><span class="p">);</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">proposed_fps</span> <span class="o">!==</span> <span class="dl">""</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">int_fps</span> <span class="o">=</span> <span class="nx">proposed_fps</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
         <span class="kd">var</span> <span class="nx">decimal_fps</span> <span class="o">=</span> <span class="nx">proposed_fps</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nx">proposed_fps</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
         <span class="nx">fps_</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">FPS</span><span class="dl">"</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">_</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">int_fps</span> <span class="o">+</span> <span class="nx">decimal_fps</span>
         <span class="nx">fps</span> <span class="o">=</span> <span class="p">(</span><span class="nx">int_fps</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">.</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">decimal_fps</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="kd">var</span> <span class="nx">mid</span> <span class="o">=</span> <span class="nx">json_obj</span><span class="p">[</span><span class="dl">"</span><span class="s2">meta</span><span class="dl">"</span><span class="p">][</span><span class="dl">"</span><span class="s2">movieId</span><span class="dl">"</span><span class="p">]</span>
      <span class="kd">var</span> <span class="nx">pid</span> <span class="o">=</span> <span class="nx">json_obj</span><span class="p">[</span><span class="dl">"</span><span class="s2">meta</span><span class="dl">"</span><span class="p">][</span><span class="dl">"</span><span class="s2">packageId</span><span class="dl">"</span><span class="p">]</span>
      <span class="kd">var</span> <span class="nx">which_url</span> <span class="o">=</span> <span class="nx">prompt</span><span class="p">(</span>
         <span class="dl">"</span><span class="s2">Press Enter to try the template. Enter anything to go for CC.</span><span class="dl">"</span><span class="p">)</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">which_url</span> <span class="o">==</span> <span class="dl">""</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">template_url</span> <span class="o">=</span>
            <span class="dl">"</span><span class="s2">https://originator.backlot.netflix.com/api/request/timedText/</span><span class="dl">"</span> <span class="o">+</span>
            <span class="nx">our_clq</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">pid</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">mid</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/en/TEMPLATE/PRIMARY/</span><span class="dl">'</span> <span class="o">+</span>
            <span class="nx">fps_</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">?source=ORIGINATOR</span><span class="dl">'</span>
      <span class="p">}</span>
      <span class="k">else</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">template_url</span> <span class="o">=</span>
            <span class="dl">"</span><span class="s2">https://originator.backlot.netflix.com/api/request/timedText/</span><span class="dl">"</span> <span class="o">+</span>
            <span class="nx">our_clq</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">pid</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">mid</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/en/CC/PRIMARY/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">fps_</span> <span class="o">+</span>
            <span class="dl">'</span><span class="s1">?source=ARCHIVE</span><span class="dl">'</span>
      <span class="p">}</span>
      <span class="kd">var</span> <span class="nx">targetFilename</span> <span class="o">=</span> <span class="nx">srtName</span><span class="p">(</span><span class="nx">fps_</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">_TRANSLATION</span><span class="dl">"</span><span class="p">)</span>
      <span class="kd">var</span> <span class="nx">sourceFilename</span> <span class="o">=</span> <span class="nx">srtName</span><span class="p">(</span><span class="nx">fps_</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">_SOURCE</span><span class="dl">"</span><span class="p">)</span>
      <span class="kd">var</span> <span class="nx">backupFilename</span> <span class="o">=</span> <span class="nx">srtName</span><span class="p">(</span><span class="nx">fps_</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">_BILINGUAL_TABLE</span><span class="dl">"</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="s2">.srt</span><span class="dl">"</span><span class="p">,</span>
         <span class="dl">"</span><span class="s2">.html</span><span class="dl">"</span><span class="p">)</span>
      <span class="kd">var</span> <span class="nx">frms</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">/</span> <span class="nx">fps</span>
      <span class="k">async</span> <span class="kd">function</span> <span class="nx">getSourceColumnEvents</span><span class="p">()</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="p">(</span><span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">template_url</span><span class="p">)).</span><span class="nx">json</span><span class="p">();</span>
         <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">async</span> <span class="kd">function</span> <span class="nx">delayedDownload</span><span class="p">()</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getSourceColumnEvents</span><span class="p">();</span>
         <span class="c1">//download(sourceFilename, array2srt(result))</span>
         <span class="nx">download</span><span class="p">(</span><span class="nx">backupFilename</span><span class="p">,</span> <span class="nx">arrays2html</span><span class="p">(</span><span class="nx">result</span><span class="p">,</span> <span class="nx">src</span><span class="p">),</span> <span class="dl">"</span><span class="s2">html</span><span class="dl">"</span><span class="p">)</span>
      <span class="p">}</span>
      <span class="nx">delayedDownload</span><span class="p">()</span>
      <span class="c1">//download(targetFilename,array2srt(src))</span>
      <span class="kd">function</span> <span class="nx">srtName</span><span class="p">(</span><span class="nx">suffix</span> <span class="o">=</span> <span class="dl">""</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="dl">"</span><span class="s2">cpe-page-menu-label</span><span class="dl">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="p">.</span><span class="nx">innerText</span>
         <span class="kd">var</span> <span class="nx">srtName</span> <span class="o">=</span> <span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">[</span><span class="sr"> </span><span class="se">]</span><span class="sr">/g</span><span class="p">,</span> <span class="dl">'</span><span class="s1">_</span><span class="dl">'</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/</span><span class="se">[^</span><span class="sr">a-z0-9_</span><span class="se">]</span><span class="sr">/gi</span><span class="p">,</span> <span class="dl">''</span><span class="p">)</span> <span class="o">+</span>
               <span class="nx">suffix</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">.srt</span><span class="dl">"</span>
               <span class="p">)</span> <span class="c1">//This gets rid of all punctuation, spaces and non-English letters</span>
            <span class="p">.</span><span class="nx">trim</span><span class="p">()</span> <span class="c1">//resulting in a name like 14545_El_Burrito_A_Breaking_Fat_Movie_FPS_2500.srt</span>
         <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">srtName</span><span class="p">)</span> <span class="nx">srtName</span> <span class="o">=</span> <span class="nx">our_clq</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">_</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">suffix</span> <span class="o">+</span>
            <span class="dl">"</span><span class="s2">.srt</span><span class="dl">"</span> <span class="c1">//Fallback measure. Useful for debugging later</span>
         <span class="k">return</span> <span class="nx">srtName</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">frames2timecode</span><span class="p">(</span><span class="nx">frames</span><span class="p">)</span>
      <span class="p">{</span> <span class="c1">//frames to 00:01:02,000 format</span>
         <span class="kd">var</span> <span class="nx">milliseconds</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">frames</span> <span class="o">*</span> <span class="nx">frms</span><span class="p">)</span>
         <span class="kd">var</span> <span class="nx">srt_timecode</span> <span class="o">=</span> <span class="nx">TimeConversion</span><span class="p">(</span><span class="nx">milliseconds</span><span class="p">)</span>
         <span class="k">return</span> <span class="nx">srt_timecode</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">merge_same</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">merged</span> <span class="o">=</span> <span class="p">[]</span>
         <span class="kd">var</span> <span class="nx">skip_next</span> <span class="o">=</span> <span class="kc">false</span>
         <span class="k">for</span><span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">skip_next</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="nx">thisEvent</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
               <span class="nx">nextEvent</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">thisEvent</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="nx">nextEvent</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
               <span class="p">{</span>
                  <span class="nx">skip_next</span> <span class="o">=</span> <span class="kc">true</span>
                  <span class="nx">thisEvent</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">thisEvent</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">nextEvent</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                  <span class="nx">thisEvent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">nextEvent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
               <span class="p">}</span>
               <span class="nx">merged</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">thisEvent</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
               <span class="nx">skip_next</span> <span class="o">=</span> <span class="kc">false</span>
            <span class="p">}</span>
         <span class="p">}</span>
         <span class="k">return</span> <span class="nx">merged</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">arrays2html</span><span class="p">(</span><span class="nx">events_object</span><span class="p">,</span> <span class="nx">events_object2</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">ordered_events</span> <span class="o">=</span> <span class="p">[]</span>
         <span class="kd">var</span> <span class="nx">col</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">SRC</span><span class="dl">"</span>
         <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">id</span> <span class="k">in</span> <span class="nx">events_object</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">column</span><span class="dl">"</span><span class="p">]</span> <span class="o">=</span> <span class="nx">col</span>
            <span class="k">try</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">type_fn</span> <span class="o">=</span> <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">]</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">type_fn</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">fn</span><span class="dl">"</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">txt</span><span class="dl">"</span><span class="p">]</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">&lt;b&gt;&lt;/b&gt;</span><span class="dl">"</span><span class="p">;</span>
                  <span class="nx">type_fn</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
                  <span class="k">delete</span><span class="p">(</span><span class="nx">type_fn</span><span class="p">)</span>
               <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span>
            <span class="p">{}</span>
            <span class="nx">ordered_events</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span>
               <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">start</span><span class="dl">"</span><span class="p">],</span> <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">],</span>
               <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
               <span class="p">[</span><span class="dl">"</span><span class="s2">txt</span><span class="dl">"</span><span class="p">],</span>
               <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
               <span class="p">[</span><span class="dl">"</span><span class="s2">styles</span><span class="dl">"</span><span class="p">],</span>
               <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
               <span class="p">[</span><span class="dl">"</span><span class="s2">rgn</span><span class="dl">"</span><span class="p">],</span>
               <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
               <span class="p">[</span><span class="dl">"</span><span class="s2">column</span><span class="dl">"</span><span class="p">],</span>
            <span class="p">])</span>
         <span class="p">}</span>
         <span class="kd">var</span> <span class="nx">col</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">TRG</span><span class="dl">"</span>
         <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">id</span> <span class="k">in</span> <span class="nx">events_object2</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="nx">events_object2</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">column</span><span class="dl">"</span><span class="p">]</span> <span class="o">=</span> <span class="nx">col</span>
            <span class="nx">ordered_events</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span>
               <span class="nx">events_object2</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">start</span><span class="dl">"</span><span class="p">],</span> <span class="nx">events_object2</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">],</span>
               <span class="nx">events_object2</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
               <span class="p">[</span><span class="dl">"</span><span class="s2">txt</span><span class="dl">"</span><span class="p">],</span>
               <span class="nx">events_object2</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
               <span class="p">[</span><span class="dl">"</span><span class="s2">styles</span><span class="dl">"</span><span class="p">],</span>
               <span class="nx">events_object2</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
               <span class="p">[</span><span class="dl">"</span><span class="s2">rgn</span><span class="dl">"</span><span class="p">],</span>
               <span class="nx">events_object2</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
               <span class="p">[</span><span class="dl">"</span><span class="s2">column</span><span class="dl">"</span><span class="p">],</span>
            <span class="p">])</span>
         <span class="p">}</span>
         <span class="nx">ordered_events</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="k">return</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
         <span class="p">});</span> <span class="c1">//Array sorted by in_cues, sequentially</span>
         <span class="nx">ordered_events</span> <span class="o">=</span> <span class="nx">merge_same</span><span class="p">(</span><span class="nx">ordered_events</span><span class="p">)</span>
         <span class="c1">//    ordered_events.sort(function (a</span>
         <span class="c1">//        , b) {</span>
         <span class="c1">//        return a[1] - b[1];</span>
         <span class="c1">//    }); //Array sorted by out_cues this time, because merge_same changes some, sequentially</span>
         <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span>
         <span class="kd">var</span> <span class="nx">srt_txt</span> <span class="o">=</span> <span class="nx">bilingualHtml</span><span class="p">;</span>
         <span class="kd">var</span> <span class="nx">eol</span> <span class="o">=</span> <span class="dl">""</span>
         <span class="kd">var</span> <span class="nx">source_content</span> <span class="o">=</span> <span class="dl">''</span>
         <span class="k">for</span><span class="p">(</span><span class="nx">event</span> <span class="k">of</span> <span class="nx">ordered_events</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">start</span> <span class="o">=</span> <span class="nx">frames2timecode</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="kd">var</span> <span class="nx">end</span> <span class="o">=</span> <span class="nx">frames2timecode</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="kd">var</span> <span class="nx">startend</span> <span class="o">=</span> <span class="nx">start</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">end</span>
            <span class="k">try</span>
            <span class="p">{</span>
               <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">event</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">]</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">italic</span><span class="dl">"</span><span class="p">)</span>
                  <span class="p">{</span>
                     <span class="nx">content</span> <span class="o">=</span> <span class="nx">italicize</span><span class="p">(</span><span class="nx">content</span><span class="p">,</span> <span class="nx">event</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
                  <span class="p">}</span>
               <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span>
            <span class="p">{}</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">SRC</span><span class="dl">"</span><span class="p">)</span>
            <span class="p">{</span>
               <span class="nx">source_content</span> <span class="o">+=</span> <span class="nx">event</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
               <span class="nx">tr</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">&lt;tr&gt;&lt;td&gt;&lt;pre&gt;</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">startend</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;</span><span class="dl">'</span> <span class="o">+</span>
                  <span class="nx">source_content</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">&lt;/pre&gt;&lt;/td&gt;&lt;td&gt;&lt;pre&gt;</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">event</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span>
                  <span class="dl">'</span><span class="s1">&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;</span><span class="dl">'</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span><span class="p">;</span>
               <span class="nx">srt_txt</span> <span class="o">+=</span> <span class="nx">tr</span><span class="p">;</span>
               <span class="nx">tr</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
               <span class="nx">source_content</span> <span class="o">=</span> <span class="dl">""</span>
            <span class="p">}</span>
         <span class="p">}</span>
         <span class="kd">var</span> <span class="nx">titleinfo</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span>
               <span class="dl">"</span><span class="s2">cpe-page-menu-label</span><span class="dl">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">innerText</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/ "/</span><span class="p">,</span> <span class="dl">"</span><span class="s2"> â€œ</span><span class="dl">"</span><span class="p">)</span>
            <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/"/</span><span class="p">,</span> <span class="dl">"</span><span class="s2">â€</span><span class="dl">"</span><span class="p">)</span>
         <span class="kd">var</span> <span class="nx">titlelink</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span>
         <span class="kd">var</span> <span class="nx">titledate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">().</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
         <span class="nx">srt_txt</span> <span class="o">=</span> <span class="nx">srt_txt</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/TITLEINFO/g</span><span class="p">,</span> <span class="nx">titleinfo</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span>
            <span class="sr">/TITLELINK/</span><span class="p">,</span> <span class="nx">titlelink</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/TITLEDATE/g</span><span class="p">,</span> <span class="nx">titledate</span><span class="p">)</span>
         <span class="k">return</span> <span class="nx">srt_txt</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">array2srt</span><span class="p">(</span><span class="nx">events_object</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">ordered_events</span> <span class="o">=</span> <span class="p">[]</span>
         <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">id</span> <span class="k">in</span> <span class="nx">events_object</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="k">try</span>
            <span class="p">{</span>
               <span class="kd">var</span> <span class="nx">type_fn</span> <span class="o">=</span> <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">]</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">type_fn</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">fn</span><span class="dl">"</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">txt</span><span class="dl">"</span><span class="p">]</span> <span class="o">+=</span> <span class="dl">"</span><span class="s2">&lt;b&gt;&lt;/b&gt;</span><span class="dl">"</span><span class="p">;</span>
                  <span class="nx">type_fn</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
                  <span class="k">delete</span><span class="p">(</span><span class="nx">type_fn</span><span class="p">)</span>
               <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span>
            <span class="p">{}</span>
            <span class="nx">ordered_events</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span>
               <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">start</span><span class="dl">"</span><span class="p">],</span> <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">][</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">],</span>
               <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
               <span class="p">[</span><span class="dl">"</span><span class="s2">txt</span><span class="dl">"</span><span class="p">],</span>
               <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
               <span class="p">[</span><span class="dl">"</span><span class="s2">styles</span><span class="dl">"</span><span class="p">],</span>
               <span class="nx">events_object</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
               <span class="p">[</span><span class="dl">"</span><span class="s2">rgn</span><span class="dl">"</span><span class="p">]</span>
            <span class="p">])</span>
         <span class="p">}</span>
         <span class="nx">ordered_events</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="k">return</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
         <span class="p">});</span> <span class="c1">//Array sorted by in_cues, sequentially</span>
         <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="mi">0</span>
         <span class="kd">var</span> <span class="nx">srt_txt</span> <span class="o">=</span> <span class="dl">''</span>
         <span class="k">for</span><span class="p">(</span><span class="nx">event</span> <span class="k">of</span> <span class="nx">ordered_events</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="nx">index</span><span class="o">++</span>
            <span class="kd">var</span> <span class="nx">start</span> <span class="o">=</span> <span class="nx">frames2timecode</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="kd">var</span> <span class="nx">end</span> <span class="o">=</span> <span class="nx">frames2timecode</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="kd">var</span> <span class="nx">content</span> <span class="o">=</span> <span class="nx">event</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">try</span>
            <span class="p">{</span>
               <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">event</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">]</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">italic</span><span class="dl">"</span><span class="p">)</span>
                  <span class="p">{</span>
                     <span class="nx">content</span> <span class="o">=</span> <span class="nx">italicize</span><span class="p">(</span><span class="nx">content</span><span class="p">,</span> <span class="nx">event</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
                  <span class="p">}</span>
               <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span>
            <span class="p">{}</span>
            <span class="k">try</span>
            <span class="p">{</span>
               <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">event</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">undefined</span><span class="dl">"</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">top</span><span class="dl">"</span><span class="p">)</span>
                  <span class="p">{</span>
                     <span class="nx">content</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">{</span><span class="se">\\</span><span class="s2">an8}</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">content</span>
                  <span class="p">}</span>
               <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span>
            <span class="p">{}</span>
            <span class="k">try</span>
            <span class="p">{</span>
               <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">[</span><span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">fn</span><span class="dl">"</span><span class="p">)</span>
               <span class="p">{</span>
                  <span class="nx">content</span> <span class="o">+=</span> <span class="dl">'</span><span class="s1">&lt;b&gt;&lt;/b&gt;</span><span class="dl">'</span>
               <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span>
            <span class="p">{}</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">content</span><span class="p">)</span>
            <span class="kd">var</span> <span class="nx">current_event</span> <span class="o">=</span> <span class="nx">index</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">start</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> --&gt; </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">end</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span> <span class="o">+</span>
               <span class="nx">content</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span>
            <span class="nx">srt_txt</span> <span class="o">+=</span> <span class="nx">current_event</span> <span class="o">+</span> <span class="dl">"</span><span class="se">\n</span><span class="dl">"</span>
         <span class="p">}</span>
         <span class="k">return</span> <span class="nx">srt_txt</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">italicize</span><span class="p">(</span><span class="nx">content</span><span class="p">,</span> <span class="nx">italics_array</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="nx">position_offset</span> <span class="o">=</span> <span class="mi">0</span>
         <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">italic</span> <span class="k">of</span> <span class="nx">italics_array</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">position_from</span> <span class="o">=</span> <span class="nx">italic</span><span class="p">[</span><span class="dl">"</span><span class="s2">from</span><span class="dl">"</span><span class="p">]</span> <span class="o">+</span> <span class="nx">position_offset</span><span class="p">;</span>
            <span class="nx">position_offset</span> <span class="o">+=</span> <span class="mi">3</span>
            <span class="nx">content</span> <span class="o">=</span> <span class="p">[</span><span class="nx">content</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">position_from</span><span class="p">),</span> <span class="dl">"</span><span class="s2">&lt;i&gt;</span><span class="dl">"</span><span class="p">,</span> <span class="nx">content</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span>
               <span class="nx">position_from</span><span class="p">)].</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">)</span>
            <span class="kd">var</span> <span class="nx">position_to</span> <span class="o">=</span> <span class="nx">italic</span><span class="p">[</span><span class="dl">"</span><span class="s2">to</span><span class="dl">"</span><span class="p">]</span> <span class="o">+</span> <span class="nx">position_offset</span><span class="p">;</span>
            <span class="nx">position_offset</span> <span class="o">+=</span> <span class="mi">4</span>
            <span class="nx">content</span> <span class="o">=</span> <span class="p">[</span><span class="nx">content</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">position_to</span><span class="p">),</span> <span class="dl">"</span><span class="s2">&lt;/i&gt;</span><span class="dl">"</span><span class="p">,</span> <span class="nx">content</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span>
               <span class="nx">position_to</span><span class="p">)].</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">)</span>
         <span class="p">}</span>
         <span class="k">return</span> <span class="nx">content</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">download</span><span class="p">(</span><span class="nx">filename</span><span class="p">,</span> <span class="nx">text</span><span class="p">,</span> <span class="nx">type</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">plain</span><span class="dl">"</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">);</span>
         <span class="nx">element</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">href</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">data:text/</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">type</span> <span class="o">+</span>
            <span class="dl">'</span><span class="s1">;charset=utf-8,%EF%BB%BF</span><span class="dl">'</span> <span class="o">+</span> <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">text</span><span class="p">));</span>
         <span class="nx">element</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">download</span><span class="dl">'</span><span class="p">,</span> <span class="nx">filename</span><span class="p">);</span>
         <span class="nx">element</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">none</span><span class="dl">'</span><span class="p">;</span>
         <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
         <span class="nx">element</span><span class="p">.</span><span class="nx">click</span><span class="p">();</span>
         <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">TimeConversion</span><span class="p">(</span><span class="nx">duration</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kd">let</span> <span class="nx">time</span> <span class="o">=</span> <span class="nx">parseDuration</span><span class="p">(</span><span class="nx">duration</span><span class="p">)</span>
         <span class="k">return</span> <span class="nx">formatTimeHMSS</span><span class="p">(</span><span class="nx">time</span><span class="p">)</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">parseDuration</span><span class="p">(</span><span class="nx">duration</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kd">let</span> <span class="nx">remain</span> <span class="o">=</span> <span class="nx">duration</span>
         <span class="kd">let</span> <span class="nx">hours</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">remain</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">))</span>
         <span class="nx">remain</span> <span class="o">=</span> <span class="nx">remain</span> <span class="o">%</span> <span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
         <span class="kd">let</span> <span class="nx">minutes</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">remain</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span><span class="p">))</span>
         <span class="nx">remain</span> <span class="o">=</span> <span class="nx">remain</span> <span class="o">%</span> <span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
         <span class="kd">let</span> <span class="nx">seconds</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">remain</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1000</span><span class="p">))</span>
         <span class="nx">remain</span> <span class="o">=</span> <span class="nx">remain</span> <span class="o">%</span> <span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
         <span class="kd">let</span> <span class="nx">milliseconds</span> <span class="o">=</span> <span class="nx">remain</span>
         <span class="k">return</span> <span class="p">{</span>
            <span class="nx">hours</span><span class="p">,</span>
            <span class="nx">minutes</span><span class="p">,</span>
            <span class="nx">seconds</span><span class="p">,</span>
            <span class="nx">milliseconds</span>
         <span class="p">}</span>
      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">formatTimeHMSS</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="kd">let</span> <span class="nx">hours</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">hours</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">hours</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">hours</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">hours</span>
         <span class="kd">let</span> <span class="nx">minutes</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">minutes</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">minutes</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">minutes</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">minutes</span>
         <span class="kd">let</span> <span class="nx">seconds</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">seconds</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">seconds</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">seconds</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">seconds</span>
         <span class="kd">let</span> <span class="nx">milliseconds</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">milliseconds</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">milliseconds</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">milliseconds</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">00</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">milliseconds</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">milliseconds</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)</span> <span class="nx">milliseconds</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">milliseconds</span>
         <span class="k">return</span> <span class="nx">hours</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">:</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">minutes</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">:</span><span class="dl">"</span> <span class="o">+</span>
            <span class="c1">//Example: 00:01:02,999 -- note that the SRT spec calls for a comma, not a period!</span>
            <span class="nx">seconds</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">,</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">milliseconds</span>
      <span class="p">}</span>
   <span class="p">})();</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">imarunettuImportBetterSrt</span><span class="p">()</span>
<span class="p">{</span>
   <span class="nx">alert</span><span class="p">(</span>
      <span class="dl">"</span><span class="s2">DISABLED FOR NOW.</span><span class="se">\n</span><span class="s2">Possible fixes: Send everybody to Github?</span><span class="se">\n</span><span class="s2">Store and open in any report?</span><span class="se">\n</span><span class="s2">Completely replace current window? hmm.</span><span class="dl">"</span><span class="p">);</span>
   <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{})()</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">imarunettuAuxFade</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">ms</span><span class="p">,</span> <span class="nx">el</span><span class="p">,</span> <span class="nx">remove</span> <span class="o">=</span> <span class="kc">false</span><span class="p">)</span>
<span class="p">{</span>
   <span class="kd">var</span> <span class="nx">isIn</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">in</span><span class="dl">'</span><span class="p">,</span>
      <span class="nx">opacity</span> <span class="o">=</span> <span class="nx">isIn</span> <span class="p">?</span> <span class="mi">0</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="nx">interval</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span>
      <span class="nx">duration</span> <span class="o">=</span> <span class="nx">ms</span><span class="p">,</span>
      <span class="nx">gap</span> <span class="o">=</span> <span class="nx">interval</span> <span class="o">/</span> <span class="nx">duration</span>
   <span class="k">if</span><span class="p">(</span><span class="nx">isIn</span><span class="p">)</span>
   <span class="p">{</span>
      <span class="nx">el</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">inline</span><span class="dl">'</span>
      <span class="nx">el</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">opacity</span> <span class="o">=</span> <span class="nx">opacity</span>
   <span class="p">}</span>

   <span class="kd">function</span> <span class="nx">func</span><span class="p">()</span>
   <span class="p">{</span>
      <span class="nx">opacity</span> <span class="o">=</span> <span class="nx">isIn</span> <span class="p">?</span> <span class="nx">opacity</span> <span class="o">+</span> <span class="nx">gap</span> <span class="p">:</span> <span class="nx">opacity</span> <span class="o">-</span> <span class="nx">gap</span>
      <span class="nx">el</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">opacity</span> <span class="o">=</span> <span class="nx">opacity</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">opacity</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="nx">remove</span> <span class="p">?</span> <span class="nx">el</span><span class="p">.</span><span class="nx">remove</span><span class="p">()</span> <span class="p">:</span> <span class="nx">el</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">none</span><span class="dl">'</span>
      <span class="p">}</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">opacity</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">opacity</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="nb">window</span><span class="p">.</span><span class="nx">clearInterval</span><span class="p">(</span><span class="nx">fading</span><span class="p">)</span>
   <span class="p">}</span>
   <span class="kd">var</span> <span class="nx">fading</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">setInterval</span><span class="p">(</span><span class="nx">func</span><span class="p">,</span> <span class="nx">interval</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">imarunettuCleanup</span><span class="p">()</span>
<span class="p">{</span>
   <span class="kd">var</span> <span class="nx">menu</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">div.popup</span><span class="dl">"</span><span class="p">)</span>
   <span class="kd">var</span> <span class="nx">itemButtons</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="dl">"</span><span class="s2">item-button</span><span class="dl">"</span><span class="p">)</span>
   <span class="kd">var</span> <span class="nx">dropdown</span> <span class="o">=</span> <span class="nx">itemButtons</span><span class="p">[</span><span class="nx">itemButtons</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span>
      <span class="mi">1</span><span class="p">]</span> <span class="c1">//this should always yield the More Actions dropdown trigger</span>
   <span class="c1">//if(!menu) {dropdown.click();} </span>
   <span class="k">for</span><span class="p">(</span><span class="nx">byeButton</span> <span class="k">of</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="dl">"</span><span class="s2">mnfkbtn</span><span class="dl">"</span><span class="p">))</span>
   <span class="p">{</span>
      <span class="nx">imarunettuAuxFade</span><span class="p">(</span><span class="dl">'</span><span class="s1">out</span><span class="dl">'</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="nx">byeButton</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
   <span class="p">}</span>
   <span class="nx">dropdown</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="nx">imarunettuClickDropdown</span><span class="p">,</span>
   <span class="p">{</span>
      <span class="na">passive</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="na">capture</span><span class="p">:</span> <span class="kc">true</span>
   <span class="p">})</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">imarunettuAddButtonsToMenu</span><span class="p">(</span><span class="nx">btnid</span><span class="p">,</span> <span class="nx">disabled</span> <span class="o">=</span> <span class="dl">""</span><span class="p">)</span>
<span class="p">{</span>
   <span class="kd">var</span> <span class="nx">gonnaBeLast</span> <span class="o">=</span> <span class="kc">false</span>
   <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">btnid</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">undefined</span><span class="dl">'</span><span class="p">)</span>
   <span class="p">{</span>
      <span class="nx">gonnaBeLast</span> <span class="o">=</span> <span class="kc">true</span>
      <span class="k">for</span><span class="p">(</span><span class="nx">btnid</span> <span class="k">in</span> <span class="nx">imarunettuButtons</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="nx">imarunettuAddButtonsToMenu</span><span class="p">(</span><span class="nx">btnid</span><span class="p">)</span>
      <span class="p">}</span>
   <span class="p">}</span>
   <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">gonnaBeLast</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">btnid</span><span class="p">))</span>
   <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">btntext</span> <span class="o">=</span> <span class="nx">imarunettuButtons</span><span class="p">[</span><span class="nx">btnid</span><span class="p">]</span>
      <span class="kd">var</span> <span class="nx">menu</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">div.popup</span><span class="dl">"</span><span class="p">)</span>
      <span class="kd">var</span> <span class="nx">button</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">);</span>
      <span class="nx">button</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">icon-button mnfkbtn</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">disabled</span>
      <span class="nx">button</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">btnid</span>
      <span class="nx">button</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">,</span> <span class="nx">btntext</span><span class="p">)</span>
      <span class="nx">button</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">&lt;i class="bhicons"&gt;&lt;/i&gt;</span><span class="dl">'</span>
      <span class="kd">var</span> <span class="nx">span</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">span</span><span class="dl">"</span><span class="p">)</span>
      <span class="nx">span</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">label</span><span class="dl">"</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">btnid</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">imarunettuRunAutoQC</span><span class="dl">"</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="nx">btntext</span> <span class="o">=</span> <span class="nx">btntext</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> for </span><span class="dl">"</span> <span class="o">+</span> <span class="nb">window</span><span class="p">.</span><span class="nx">imarunettuLang</span>
      <span class="p">}</span>
      <span class="nx">span</span><span class="p">.</span><span class="nx">innerText</span> <span class="o">=</span> <span class="nx">btntext</span>
      <span class="nx">button</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span>
      <span class="p">{</span>
         <span class="k">if</span><span class="p">(</span><span class="nx">btnid</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">imarunettuCleanup</span><span class="dl">"</span><span class="p">)</span>
         <span class="p">{</span>
            <span class="nx">event</span><span class="p">.</span><span class="nx">stopImmediatePropagation</span><span class="p">();</span>
            <span class="nx">imarunettuCleanup</span><span class="p">();</span>
         <span class="p">}</span>
         <span class="k">else</span>
         <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">funktion</span> <span class="o">=</span> <span class="nx">btnid</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">();</span><span class="dl">'</span>
            <span class="nb">eval</span><span class="p">(</span><span class="nx">btnid</span> <span class="o">+</span> <span class="dl">""</span> <span class="o">+</span>
               <span class="dl">"</span><span class="s2">();</span><span class="dl">"</span><span class="p">)</span> <span class="c1">//Hmm, I'm gonna try storing the principal JS code of the bookmarklets as text strings properties of one big object</span>
         <span class="p">}</span>
      <span class="p">}</span>
      <span class="nx">button</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">span</span><span class="p">)</span>
      <span class="nx">menu</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">button</span><span class="p">)</span>
   <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">imarunettuGetLang</span><span class="p">()</span>
<span class="p">{</span>
   <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">imarunettuLang</span><span class="p">)</span>
   <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">taskTitle</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="dl">"</span><span class="s2">cpe-page-menu-label</span><span class="dl">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
         <span class="p">.</span><span class="nx">innerText</span>
      <span class="nx">taskTitle</span> <span class="o">=</span> <span class="nx">taskTitle</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2">,</span><span class="dl">"</span><span class="p">)</span>
      <span class="kd">var</span> <span class="nx">lang</span> <span class="o">=</span> <span class="nx">taskTitle</span><span class="p">[</span><span class="nx">taskTitle</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">2</span><span class="p">].</span><span class="nx">trim</span><span class="p">().</span><span class="nx">toUpperCase</span><span class="p">()</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">imarunettuLang</span> <span class="o">=</span> <span class="nx">lang</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="nb">window</span><span class="p">.</span><span class="nx">imarunettuLang</span>
<span class="p">}</span>
</code></pre></div></div>

        </article>
      </div>
    </div>
    <footer>
      <div class="creds">
        <small>This page generated using <a href="https://pages.github.com/">GitHub Pages</a><br>theme by <a href="https://twitter.com/jonrohan/">Jon Rohan</a></small>
      </div>
    </footer>
  </div>
  <div class="current-section">
    <a href="#top">Scroll to top</a>
    <a href="https://github.com/katzurki/nettufurikusu/tarball/gh-pages" class="tar">tar</a><a href="https://github.com/katzurki/nettufurikusu/zipball/gh-pages" class="zip">zip</a><a href="" class="code">source code</a>
    <p class="name"></p>
  </div>


<iframe id="autoQCFullLatest" width="0" height="0" border="0" style="visibility:none;" src="AutoQC_latest.js.txt" onload="imaruIframeLoaded();"></iframe> 
</body>
</html>
